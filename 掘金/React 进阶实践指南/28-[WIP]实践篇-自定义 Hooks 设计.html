<!DOCTYPE html><html lang="en"><head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç¬¬ 01 è®²ï¼šè®¾è®¡ä¸€ä»½å¸å¼•é¢è¯•å®˜çš„ç®€å†</title>
<style type="text/css">
:root {
    --control-text-color: #777;
    --select-text-bg-color: rgba(223, 197, 223);  /*#7e66992e;*/
    
    /* side bar */
    --side-bar-bg-color: rgb(255, 255, 255);
    --active-file-text-color: #8163bd;
    --active-file-bg-color: #E9E4F0;
    --item-hover-bg-color: #E9E4F0;
    --active-file-border-color: #8163bd;

    --title-color: #6c549c;
    --font-sans-serif: 'Ubuntu', 'Source Sans Pro', sans-serif !important;
    --font-monospace: 'Fira Code', 'Roboto Mono', monospace !important;
    --purple-1: #8163bd;
    --purple-2: #79589F;
    --purple-3: #fd5eb8;
    --purple-light-1: rgba(99, 99, 172, .05);
    --purple-light-2: rgba(99, 99, 172, .1);
    --purple-light-3: rgba(99, 99, 172, .2);
    --purple-light-4: rgba(129, 99, 189, .3);
    --purple-light-5: #E9E4F0;
    --purple-light-6: rgba(129, 99, 189, .8);
}

/* html {
    font-size: 16px;
} */

body {
    font-family: var(--font-sans-serif);
    color: #34495e;
    -webkit-font-smoothing: antialiased;
    line-height: 1.6rem;
    letter-spacing: 0;
    margin: 0;
    overflow-x: hidden;
}

/* é¡µè¾¹è· å’Œ é¡µé¢å¤§å° */
#write {
    padding-left: 6ch;
    padding-right: 6ch;
    margin: 0 auto;
}

#write p {
    line-height: 1.6rem;
    word-spacing: .05rem;
}

#write ol li {
    padding-left: 0.5rem;
}

#write > ul:first-child,
#write > ol:first-child {
    margin-top: 30px;
}

body > *:first-child {
    margin-top: 0 !important;
}

body > *:last-child {
    margin-bottom: 0 !important;
}

a {
    color: var(--purple-1);
    padding: 0 2px;
    text-decoration: none;
}
.md-content {
    color: var(--purple-light-6);
}
#write a {
    border-bottom: 1px solid var(--purple-1);
    color: var(--purple-1);
    text-decoration: none;
}

h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 0.5rem;
    /* font-weight: bold; */
    font-weight: 500 !important;
    line-height: 1.4;
    cursor: text;
    color: var(--title-color);
    font-family: var(--font-sans-serif);
}

h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}

h1 tt,
h1 code {
    font-size: inherit !important;
}
h2 tt,
h2 code {
    font-size: inherit !important;
}
h3 tt,
h3 code {
    font-size: inherit !important;
}
h4 tt,
h4 code {
    font-size: inherit !important;
}
h5 tt,
h5 code {
    font-size: inherit !important;
}
h6 tt,
h6 code {
    font-size: inherit !important;
}


h1 {
    padding-bottom: .4rem;
    font-size: 2.2rem;
    line-height: 1.3;
}
h1 {
    text-align: center;
    padding-bottom: 0.3em;
    font-size: 2.2em;
    line-height: 1.2;
    margin: 2.4em auto 1.2em;
}
h1:after {
    content: '';
    display: block;
    margin: 0.2em auto 0;
    width: 100px;
    height: 2px;
    border-bottom: 2px solid var(--title-color);
}

h2 {
    margin: 1.6em auto 0.5em;
    padding-left: 10px;
    line-height: 1.4;
    font-size: 1.8em;
    border-left: 9px solid var(--title-color);
    border-bottom: 1px solid var(--title-color);
}
h3 {
    font-size: 1.5rem;
    margin: 1.2em auto 0.5em;
}
h4 {
    font-size: 1.3rem;
}
h5 {
    font-size: 1.2rem;
}
h6 {
    font-size: 1.1rem;
}

p,
blockquote,
ul,
ol,
dl,
table {
    margin: 0.8em 0;
}

li > ol,
li > ul {
    margin: 0 0;
}

hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

body > h2:first-child {
    margin-top: 0;
    padding-top: 0;
}

body > h1:first-child {
    margin-top: 0;
    padding-top: 0;
}

body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0;
}

body > h3:first-child,
body > h4:first-child,
body > h5:first-child,
body > h6:first-child {
    margin-top: 0;
    padding-top: 0;
}

a:first-child h1,
a:first-child h2,
a:first-child h3,
a:first-child h4,
a:first-child h5,
a:first-child h6 {
    margin-top: 0;
    padding-top: 0;
}

h1 p,
h2 p,
h3 p,
h4 p,
h5 p,
h6 p {
    margin-top: 0;
}

li p.first {
    display: inline-block;
}

ul,
ol {
    padding-left: 30px;
}

ul:first-child,
ol:first-child {
    margin-top: 0;
}

ul:last-child,
ol:last-child {
    margin-bottom: 0;
}

/* å¼•ç”¨ */
blockquote {
    /* margin-left: 1rem; */
    border-left: 4px solid var(--purple-light-4);
    padding: 10px 15px;
    color: #777;
    background-color: var(--purple-light-1);
}

/* è¡¨æ ¼ */
table {
    padding: 0;
    word-break: initial;
}

table tr {
    border-top: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}

/* è¡¨æ ¼ èƒŒæ™¯è‰² */
table tr:nth-child(2n),
thead {
    background-color: var(--purple-light-1);
}
#write table thead th {
    background-color: var(--purple-light-2);
}

table tr th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}

table tr td {
    border: 1px solid #dfe2e5;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}

table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}

table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}

/* ç²—ä½“ */
#write strong {
    padding: 0 2px;
    color: var(--purple-1);
}

/* æ–œä½“ */
#write em {
    padding: 0 5px 0 2px;
    /* font-style: normal; */
    color: #42b983;
}

/* inline code */
#write code, tt {
    padding: 2px 4px;
    border-radius: 2px;
    font-family: var(--font-monospace);
    font-size: 0.92rem;
    color: var(--purple-3); 
    background-color: rgba(99, 99, 172, .05);
}

tt {
    margin: 0 2px;
}

#write .md-footnote {
    background-color: #f8f8f8;
    color: var(--purple-3);
}

/* heighlight. */
#write mark {
    background-color: #fbd3ea;
    border-radius: 2px;
    padding: 2px 4px;
    margin: 0 2px;
}

#write del {
    padding: 1px 2px;
}

.md-task-list-item > input {
    margin-left: -1.3em;
}

@media print {
    html {
        font-size: 0.9rem;
    }

    table,
    pre {
        page-break-inside: avoid;
    }

    pre {
        word-wrap: break-word;
    }
}

#write pre.md-meta-block {
    padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block > .code-tooltip {
    bottom: .375rem;
}

/* å›¾ç‰‡ */
.md-image > .md-meta {
    border-radius: 3px;
    font-family: var(--font-monospace);
    padding: 2px 0 0 4px;
    font-size: 0.9em;
    color: inherit;
}
p .md-image:only-child{
    width: auto;
    text-align: left;
    margin-left: 2rem;
}
.md-tag {
    color: inherit;
}
/* å½“ â€œ![shadow-éšä¾¿å†™]()â€å†™æ—¶ï¼Œä¼šæœ‰é˜´å½± */
.md-image img[alt|='shadow'] {
    /* box-shadow: 0 4px 24px -6px #ddd; */
    box-shadow:var(--purple-light-2) 0px 10px 15px;
}

#write a.md-toc-inner {
    line-height: 1.6;
    white-space: pre-line;
    border-bottom: none;
    font-size: 0.9rem;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

#md-notification:before {
    top: 10px;
}

header,
.context-menu,
.megamenu-content,
footer {
    font-family: var(--font-sans-serif);
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state {
    visibility: visible;
}

.md-lang {
    color: #b4654d;
}

.html-for-mac .context-menu {
    --item-hover-bg-color: #E6F0FE;
}

/* ä»£ç æ¡† */
/* CodeMirror 3024 Day theme */

/* ä»£ç æ®µ èƒŒæ™¯ */
pre {
    --select-text-bg-color: rgba(223, 197, 223) !important;
    margin: .5em 0;
    padding: 1em 1.4em;
    border-radius: 8px;
    background: #f6f8fa;
    overflow-x: auto;
    box-sizing: border-box;
    font-size: 14px;
}

/* è¾¹æ¡† */
.md-fences {
    border: 1px solid #e7eaed;
    border-radius: 3px;
}

.cm-s-inner {
  padding: .25rem;
  border-radius: .25rem;
}

.cm-s-inner.CodeMirror, .cm-s-inner .CodeMirror-gutters {
  background-color: #f8f8f8 !important;
  color: #3a3432 !important;
  border: none;
}

.cm-s-inner .CodeMirror-gutters {
  color: #6d8a88;
}

.cm-s-inner .CodeMirror-cursor {
  border-left: solid thin #5c5855 !important;
}

.cm-s-inner .CodeMirror-linenumber {
  color: #807d7c;
}

.cm-s-inner .CodeMirror-line::selection, .cm-s-inner .CodeMirror-line::-moz-selection,
.cm-s-inner .CodeMirror-line > span::selection,
.cm-s-inner .CodeMirror-line > span::-moz-selection,
.cm-s-inner .CodeMirror-line > span > span::selection,
.cm-s-inner .CodeMirror-line > span > span::-moz-selection {
  background: var(--purple-light-2);
}

.cm-s-inner span.cm-comment {
  color: #cdab53;
}

.cm-s-inner span.cm-string, .cm-s-inner span.cm-string-2 {
  color: #f2b01d;
}

.cm-s-inner span.cm-number {
  color: #a34e8f;
}

.cm-s-inner span.cm-variable {
  color: #01a252;
}

.cm-s-inner span.cm-variable-2 {
  color: #01a0e4;
}

.cm-s-inner span.cm-def {
  /* color: #e8bbd0; */
  color: #e2287f;
}

.cm-s-inner span.cm-operator {
  color: #ff79c6;
}

.cm-s-inner span.cm-keyword {
  color: #db2d20;
}

.cm-s-inner span.cm-atom {
  color: #a34e8f;
}

.cm-s-inner span.cm-meta {
  color: inherit;
}

.cm-s-inner span.cm-tag {
  color: #db2d20;
}

.cm-s-inner span.cm-attribute {
  color: #01a252;
}

.cm-s-inner span.cm-qualifier {
  color: #388aa3;
}

.cm-s-inner span.cm-property {
  color: #01a252;
}

.cm-s-inner span.cm-builtin {
  color: #388aa3;
}

.cm-s-inner span.cm-variable-3, .cm-s-inner span.cm-type {
  color: #ffb86c;
}

.cm-s-inner span.cm-bracket {
  color: #3a3432;
}

.cm-s-inner span.cm-link {
  color: #a34e8f;
}

.cm-s-inner span.cm-error {
  background: #db2d20;
  color: #5c5855;
}

/* .md-fences.md-focus .cm-s-inner .CodeMirror-activeline-background {
  background: var(--purple-light-2);
} */

.cm-s-inner .CodeMirror-matchingbracket {
  text-decoration: underline;
  color: #a34e8f !important;
}

#fences-auto-suggest .active {
  background: #ddd;
}

#write .code-tooltip {
  bottom: initial;
  top: calc(100% - 1px);
  background: #f7f7f7;
  border: 1px solid #ddd;
  border-top: 0;
}

.auto-suggest-container {
  border-color: #b4b4b4;
}

.auto-suggest-container .autoComplt-hint.active {
  background: #b4b4b4;
  color: inherit;
}

/* task list */
#write .md-task-list-item > input {
  -webkit-appearance: initial;
  display: block;
  position: absolute;
  border: 1px solid #b4b4b4;
  border-radius: .25rem;
  margin-top: .1rem;
  margin-left: -1.8rem;
  height: 1.2rem;
  width: 1.2rem;
  transition: background 0.3s;
}

#write .md-task-list-item > input:focus {
  outline: none;
  box-shadow: none;
}

#write .md-task-list-item > input:hover {
  background: #ddd;
}

#write .md-task-list-item > input[checked]::before {
  content: '';
  position: absolute;
  top: 20%;
  left: 50%;
  height: 60%;
  width: 2px;
  transform: rotate(40deg);
  background: #333;
}

#write .md-task-list-item > input[checked]::after {
  content: '';
  position: absolute;
  top: 46%;
  left: 25%;
  height: 30%;
  width: 2px;
  transform: rotate(-40deg);
  background: #333;
}

#write .md-task-list-item > p {
  transition: color 0.3s, opacity 0.3s;
}

#write .md-task-list-item.task-list-done > p {
  color: #b4b4b4;
  text-decoration: line-through;
}

#write .md-task-list-item.task-list-done > p > .md-emoji {
  opacity: .5;
}

#write .md-task-list-item.task-list-done > p > .md-link > a {
  opacity: .6;
}

/* sidebar and outline */
.pin-outline .outline-active {
  color: var(--active-file-text-color); 
}

.file-list-item {
    border-bottom: 1px solid;
    border-color: var(--purple-light-5);
}

.file-list-item-summary {
    font-weight: 400;
}

.file-list-item.active {
    color: var(--active-file-text-color);
    background-color: var(--purple-light-5);
}

.file-tree-node.active>.file-node-background {
    background-color: var(--purple-light-5);
    font-weight: 700;
} 

.file-tree-node.active>.file-node-content {
    color: var(--active-file-text-color);
    font-weight: 700;
}

.file-node-content {
    color: #5e676d;
}

.sidebar-tabs {
    border-bottom: none;
}
.sidebar-tab.active {
    font-weight: 400;
}

.sidebar-content-content {
    font-size: 0.9rem;
}

img {
    max-width: 100%;
}

body {
    background-color: rgb(237, 237, 237);
}
#content {
    width: 836px;
    padding: 50px;
    background: #fff;
    margin: 0 auto;
}/*# sourceURL=/Users/young/Documents/Codes/Fun/lagou/public/purple.css*/</style><style type="text/css">.hljs{display:block;overflow-x:auto;padding:.5em;color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}/*# sourceURL=/Users/young/Documents/Codes/Fun/lagou/public/atom-one-light.min.css*/</style></head>
<body>
<div id="content"><h1>[WIP]å®è·µç¯‡-è‡ªå®šä¹‰ Hooks è®¾è®¡</h1>
<h2>ä¸€ å‰è¨€</h2>
<p>æœ¬ç« èŠ‚å°†å›´ç»•è‡ªå®šä¹‰ hooks å±•å¼€ï¼Œæœ¬ç« èŠ‚å«çš„çŸ¥è¯†ç‚¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>è‡ªå®šä¹‰ hooks çš„è®¾è®¡å’Œç¼–å†™ã€‚</li>
<li>å‡ ä¸ªè‡ªå®šä¹‰ hooks å®æˆ˜ã€‚</li>
</ul>
<h2>äºŒ å…¨é¢ç†è§£è‡ªå®šä¹‰ hooks</h2>
<p>åœ¨ hooks åŸç†ç« èŠ‚ï¼Œè¯¦ç»†ä»‹ç»äº† <code>React Hooks</code> åŸç†ï¼Œåœ¨å…¶ä»–çš„ç« èŠ‚ï¼Œä¹Ÿé™†ç»­è®²è§£äº†æ‰€æœ‰å¸¸ç”¨çš„ hooks ç”¨æ³•ã€‚æ¥ä¸‹æ¥é’ˆå¯¹ hooks è¿›è¡ŒåŠŸèƒ½æ€§æ‹“å±•ï¼Œæ¥ç ”ç©¶ä¸€ä¸‹åœ¨ React ä¸­ä¸€ç§é€»è¾‘å¤ç”¨ï¼Œç»„ä»¶å¼ºåŒ–æ–¹å¼â€”â€”è‡ªå®šä¹‰ hooks ã€‚</p>
<h3>1 æ¦‚å¿µ</h3>
<p>è‡ªå®šä¹‰ hooks æ˜¯åœ¨ React Hooks åŸºç¡€ä¸Šçš„ä¸€ä¸ªæ‹“å±•ï¼Œå¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚åˆ¶å®šæ»¡è¶³ä¸šåŠ¡éœ€è¦çš„ç»„åˆ hooks ï¼Œæ›´æ³¨é‡çš„æ˜¯é€»è¾‘å•å…ƒã€‚é€šè¿‡ä¸šåŠ¡åœºæ™¯ä¸åŒï¼Œåˆ°åº•éœ€è¦React Hooks åšä»€ä¹ˆï¼Œæ€ä¹ˆæ ·æŠŠä¸€æ®µé€»è¾‘å°è£…èµ·æ¥ï¼Œåšåˆ°å¤ç”¨ï¼Œè¿™æ˜¯è‡ªå®šä¹‰ hooks äº§ç”Ÿçš„åˆè¡·ã€‚</p>
<p>è‡ªå®šä¹‰ hooks ä¹Ÿå¯ä»¥è¯´æ˜¯ React Hooks èšåˆäº§ç‰©ï¼Œå…¶å†…éƒ¨æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ª React Hooks ç»„æˆï¼Œç”¨äºè§£å†³ä¸€äº›å¤æ‚é€»è¾‘ã€‚</p>
<p>ä¸€ä¸ªä¼ ç»Ÿè‡ªå®šä¹‰ hooks é•¿å¦‚ä¸‹çš„æ ·å­ï¼š</p>
<p>ç¼–å†™ï¼š</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useXXX</span>(<span class="hljs-params">å‚æ•°A,å‚æ•°B</span>){
    <span class="hljs-comment">/*  
     ...è‡ªå®šä¹‰ hooks é€»è¾‘
     å†…éƒ¨åº”ç”¨äº†å…¶ä»– React Hooks â€”â€” useState | useEffect | useRef ...
    */</span>
    <span class="hljs-keyword">return</span> [xxx,...]
}

</code></pre>
<p>ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> [ xxx , ... ] = <span class="hljs-title function_">useXXX</span>(å‚æ•°A,å‚æ•°B...)
</code></pre>
<p>å®é™…ä¸Šè‡ªå®šä¹‰ hooks çš„ç¼–å†™å¾ˆç®€å•ï¼Œå¼€å‘è€…åªéœ€è¦å…³å¿ƒï¼Œä¼ å…¥ä»€ä¹ˆå‚æ•°ï¼ˆä¹Ÿå¯ä»¥æ²¡æœ‰å‚æ•°ï¼‰ï¼Œå’Œè¿”å›ä»€ä¹ˆå†…å®¹å°±å¯ä»¥äº†ï¼Œå½“ç„¶æœ‰ä¸€äº›ç›‘å¬å’Œæ‰§è¡Œå‰¯ä½œç”¨çš„è‡ªå®šä¹‰ hooks ï¼Œæ ¹æœ¬æ— éœ€è¿”å›å€¼ã€‚</p>
<p>è‡ªå®šä¹‰ hooks å‚æ•°å¯èƒ½æ˜¯ä»¥ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>hooks åˆå§‹åŒ–å€¼ã€‚</li>
<li>ä¸€äº›å‰¯ä½œç”¨æˆ–äº‹ä»¶çš„å›è°ƒå‡½æ•°ã€‚</li>
<li>å¯ä»¥æ˜¯ useRef è·å–çš„ DOM å…ƒç´ æˆ–è€…ç»„ä»¶å®ä¾‹ã€‚</li>
<li>ä¸éœ€è¦å‚æ•°</li>
</ul>
<p>è‡ªå®šä¹‰ hooks è¿”å›å€¼å¯èƒ½æ˜¯ä»¥ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>è´Ÿè´£æ¸²æŸ“è§†å›¾è·å–çš„çŠ¶æ€ã€‚</li>
<li>æ›´æ–°å‡½æ•°ç»„ä»¶æ–¹æ³•ï¼Œæœ¬è´¨ä¸Šæ˜¯ useState æˆ–è€… useReducerã€‚</li>
<li>ä¸€äº›ä¼ é€’ç»™å­å­™ç»„ä»¶çš„çŠ¶æ€ã€‚</li>
<li>æ²¡æœ‰è¿”å›å€¼ã€‚</li>
</ul>
<h3>2 ç‰¹æ€§</h3>
<p>ä¸Šè¿°è®²åˆ°äº†è‡ªå®šä¹‰ hooks åŸºæœ¬æ¦‚å¿µï¼Œæ¥ä¸‹æ¥åˆ†æä¸€ä¸‹å®ƒçš„ç‰¹æ€§ã€‚</p>
<h4>â‘  é©±åŠ¨æ¡ä»¶</h4>
<p>é¦–å…ˆè¦æ˜ç™½ä¸€ç‚¹ï¼Œå¼€å‘è€…å†™çš„è‡ªå®šä¹‰ hooks æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸”å‡½æ•°åœ¨å‡½æ•°ç»„ä»¶ä¸­è¢«æ‰§è¡Œã€‚é‚£ä¹ˆ<strong>è‡ªå®šä¹‰ hooks é©±åŠ¨æœ¬è´¨ä¸Šå°±æ˜¯å‡½æ•°ç»„ä»¶çš„æ‰§è¡Œ</strong>ã€‚</p>
<p>è‡ªå®šä¹‰ hooks é©±åŠ¨æ¡ä»¶ï¼š</p>
<ul>
<li>props æ”¹å˜å¸¦æ¥çš„å‡½æ•°ç»„ä»¶æ‰§è¡Œã€‚</li>
<li>useState | useReducer æ”¹å˜ state å¼•èµ·å‡½æ•°ç»„ä»¶çš„æ›´æ–°ã€‚</li>
</ul>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9fca8bd0234c43fda413c71b2023d8a2~tplv-k3u1fbpfcp-watermark.image" alt="1.jpg"></p>
<h4>â‘¡ é¡ºåºåŸåˆ™</h4>
<p>è‡ªå®šä¹‰ hooks å†…éƒ¨è‡³å°‘æœ‰ä¸€ä¸ª React Hooks ï¼Œé‚£ä¹ˆè‡ªå®šä¹‰ hooks ä¹Ÿè¦éµå¾ª hooks çš„è§„åˆ™ï¼Œ<strong>ä¸èƒ½æ”¾åœ¨æ¡ä»¶è¯­å¥ä¸­ï¼Œè€Œä¸”è¦ä¿æŒæ‰§è¡Œé¡ºåºçš„ä¸€è‡´æ€§ã€‚</strong> è‡³äºä¸ºä»€ä¹ˆï¼Ÿ åœ¨ hooks åŸç†ç« èŠ‚å·²ç»è®²è¿‡äº†ã€‚</p>
<h4>â‘¢ æ¡ä»¶é™å®š</h4>
<p>åœ¨è‡ªå®šä¹‰ hooks ä¸­ï¼Œæ¡ä»¶é™å®š<strong>ç‰¹åˆ«é‡è¦</strong>ã€‚ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Œå› ä¸ºè€ƒè™‘ hooks çš„é™å®šæ¡ä»¶ï¼Œæ˜¯ä¸€ä¸ªå‡ºè‰²çš„è‡ªå®šä¹‰ hooks é‡è¦å› ç´ ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p>
<p>ä¸€äº›åŒå­¦å®¹æ˜“æ»¥ç”¨è‡ªå®šä¹‰ hooks å¯¼è‡´ä¸€äº›é—®é¢˜çš„å‘ç”Ÿ ï¼Œæ¯”å¦‚åœ¨ä¸€ä¸ªè‡ªå®šä¹‰è¿™é‡Œå†™ï¼š</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useXXX</span>(<span class="hljs-params"></span>){
    <span class="hljs-keyword">const</span> value = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useContext</span>(defaultContext)
    <span class="hljs-comment">/* .....ç”¨ä¸Šä¸‹æ–‡ä¸­ value ä¸€æ®µåˆå§‹åŒ–é€»è¾‘  */</span>
    <span class="hljs-keyword">const</span> newValue = <span class="hljs-title function_">initValueFunction</span>(value) <span class="hljs-comment">/* åˆå§‹åŒ– value å¾—åˆ°æ–°çš„ newValue  */</span>
    <span class="hljs-comment">/* ...... */</span>
    <span class="hljs-keyword">return</span> newValue
}
</code></pre>
<p>æ¯”å¦‚ä¸Šè¿°ä¸€ä¸ªéå¸¸ç®€å•è‡ªå®šä¹‰ hooks ï¼Œä» <code>context</code> å–å‡ºçŠ¶æ€ value ï¼Œé€šè¿‡ <code>initValueFunction</code> åŠ å·¥ value ï¼Œå¾—åˆ°å¹¶è¿”å›æœ€æ–°çš„ newValue ã€‚å¦‚æœç›´æ¥æŒ‰ç…§ä¸Šè¿°è¿™ä¹ˆå†™ï¼Œä¼šå¯¼è‡´ä»€ä¹ˆå‘ç”Ÿå‘¢ï¼Ÿ</p>
<p>é¦–å…ˆæ¯ä¸€æ¬¡å‡½æ•°ç»„ä»¶æ›´æ–°ï¼Œå°±ä¼šæ‰§è¡Œæ­¤è‡ªå®šä¹‰ hooks ï¼Œé‚£ä¹ˆå°±ä¼šé‡å¤æ‰§è¡Œåˆå§‹åŒ–é€»è¾‘ï¼Œé‡å¤æ‰§è¡Œ<code>initValueFunction</code> ï¼Œæ¯ä¸€æ¬¡éƒ½ä¼šå¾—åˆ°ä¸€ä¸ªæœ€æ–°çš„ newValue ã€‚ å¦‚æœ newValue ä½œä¸º <code>useMemo</code> å’Œ <code>useEffect</code> çš„ deps ï¼Œæˆ–è€…ä½œä¸ºå­ç»„ä»¶çš„ props ï¼Œé‚£ä¹ˆå­ç»„ä»¶çš„æµ…æ¯”è¾ƒ props å°†å¤±å»ä½œç”¨ï¼Œé‚£ä¹ˆä¼šå¸¦æ¥ä¸€ä¸²éº»çƒ¦ã€‚</p>
<p>é‚£ä¹ˆå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿç­”æ¡ˆå¾ˆç®€å•ï¼Œå¯ä»¥é€šè¿‡ useRef å¯¹ newValue ç¼“å­˜ï¼Œç„¶åæ¯æ¬¡æ‰§è¡Œè‡ªå®šä¹‰ hooks åˆ¤æ–­æœ‰æ— ç¼“å­˜å€¼ã€‚å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useXXX</span>(<span class="hljs-params"></span>){
    <span class="hljs-keyword">const</span> newValue =  <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>)  <span class="hljs-comment">/* åˆ›å»ºä¸€ä¸ª value ä¿å­˜çŠ¶æ€ã€‚  */</span>
    <span class="hljs-keyword">const</span> value = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useContext</span>(defaultContext)
    <span class="hljs-keyword">if</span>(!newValue.<span class="hljs-property">current</span>){  <span class="hljs-comment">/* å¦‚æœ newValue ä¸å­˜åœ¨ */</span>
          newValue.<span class="hljs-property">current</span> = <span class="hljs-title function_">initValueFunction</span>(value)
    }
    <span class="hljs-keyword">return</span> newValue.<span class="hljs-property">current</span>
}
</code></pre>
<ul>
<li>ç”¨ä¸€ä¸ª useRef ä¿å­˜åˆå§‹åŒ–è¿‡ç¨‹ä¸­äº§ç”Ÿçš„ value å€¼ ã€‚</li>
<li>åˆ¤æ–­å¦‚æœ value ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆé€šè¿‡ initValueFunction åˆ›å»ºï¼Œå¦‚æœå­˜åœ¨ç›´æ¥è¿”å› newValue.current ã€‚</li>
</ul>
<p>å¦‚ä¸ŠåŠ äº†æ¡ä»¶åˆ¤æ–­ä¹‹åï¼Œä¼šè®©è‡ªå®šä¹‰ hooks å†…éƒ¨æŒ‰ç…§æœŸæœ›çš„æ–¹å‘å‘å±•ã€‚æ¡ä»¶é™å®šæ˜¯ç¼–å†™å‡ºè‰²çš„ hooks é‡è¦çš„å› ç´ ã€‚</p>
<h4>â‘£ è€ƒè™‘å¯å˜æ€§</h4>
<p>åœ¨ç¼–å†™è‡ªå®šä¹‰ hooks çš„æ—¶å€™ï¼Œå¯å˜æ€§ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ hooks ç‰¹æ€§ã€‚ä»€ä¹ˆå«åšå¯å˜æ€§ï¼Œ<strong>å°±æ˜¯è€ƒè™‘ä¸€äº›çŠ¶æ€å€¼å‘ç”Ÿå˜åŒ–ï¼Œæ˜¯å¦æœ‰ä¾èµ–äºå½“å‰å€¼å˜åŒ–çš„æ‰§è¡Œé€»è¾‘æˆ–æ‰§è¡Œå‰¯ä½œç”¨ã€‚</strong></p>
<p>æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ğŸŒ°ä¸­ï¼Œå¦‚æœ defaultContext ä¸­çš„ value æ˜¯å¯å˜çš„ï¼Œé‚£ä¹ˆå¦‚æœè¿˜åƒä¸Šè¿°ç”¨ useRef è¿™ä¹ˆå†™ï¼Œå°±ä¼šé€ æˆ context å˜åŒ–ï¼Œå¾—ä¸åˆ°æœ€æ–°çš„ value å€¼çš„æƒ…å†µå‘ç”Ÿã€‚</p>
<p>æ‰€ä»¥ä¸ºäº†è§£å†³ä¸Šè¿°å¯å˜æ€§çš„é—®é¢˜ï¼š</p>
<ul>
<li>å¯¹äºä¾èµ–äºå¯å˜æ€§çŠ¶æ€çš„æ‰§è¡Œé€»è¾‘ï¼Œå¯ä»¥ç”¨ <code>useMemo</code> æ¥å¤„ç†ã€‚</li>
<li>å¯¹äºå¯å˜æ€§çŠ¶æ€çš„æ‰§è¡Œå‰¯ä½œç”¨ï¼Œå¯ä»¥ç”¨ <code>useEffect</code> æ¥å¤„ç†ã€‚</li>
<li>å¯¹äºä¾èµ–å¯å˜æ€§çŠ¶æ€çš„å‡½æ•°æˆ–è€…å±æ€§ï¼Œå¯ä»¥ç”¨<code>useCallback</code>æ¥å¤„ç†ã€‚
äºæ˜¯éœ€è¦æŠŠä¸Šè¿°è‡ªå®šä¹‰ hooks æ”¹ç‰ˆã€‚</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useXXX</span>(<span class="hljs-params"></span>){
    <span class="hljs-keyword">const</span> value = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useContext</span>(defaultContext)
    <span class="hljs-keyword">const</span> newValue = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useMemo</span>(<span class="hljs-function">()=></span> <span class="hljs-title function_">initValueFunction</span>(value) ,[  value  ] )  
    <span class="hljs-keyword">return</span>  newValue
}
</code></pre>
<ul>
<li>ç”¨ React.useMemo æ¥å¯¹ initValueFunction åˆå§‹åŒ–é€»è¾‘åšç¼“å­˜ï¼Œå½“ä¸Šä¸‹æ–‡ value æ”¹å˜çš„æ—¶å€™ï¼Œé‡æ–°ç”Ÿæˆæ–°çš„ newValue ã€‚</li>
</ul>
<p>è¿™åªæ˜¯ä¸€ä¸ªç®€å•ä¾‹å­ï¼Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œè¦æ¯”è¿™ç§æƒ…å†µå¤æ‚ã€‚å¼€å‘è€…åº”è¯¥æ³¨æ„åœ¨è‡ªå®šä¹‰ hooks ä¸­ï¼Œå“ªäº›çŠ¶æ€æ˜¯å¯å˜çš„ï¼ŒçŠ¶æ€æ”¹å˜ï¼Œåˆä¼šç´§è·Ÿç€å“ªäº›å½±å“ã€‚</p>
<h4>â‘¤ é—­åŒ…æ•ˆåº”</h4>
<p>é—­åŒ…ä¹Ÿæ˜¯è‡ªå®šä¹‰ hooks åº”è¯¥æ³¨æ„çš„é—®é¢˜ã€‚è¿™ä¸ªé—®é¢˜å’Œ â‘£ æœ¬è´¨ä¸€æ ·ã€‚é¦–å…ˆå‡½æ•°ç»„ä»¶æ›´æ–°å°±æ˜¯å‡½æ•°æœ¬èº«æ‰§è¡Œï¼Œä¸€æ¬¡æ›´æ–°æ‰€æœ‰å«æœ‰çŠ¶æ€çš„ hooks ï¼ˆ <code>useState</code> å’Œ <code>useReducer</code> ï¼‰äº§ç”Ÿçš„çŠ¶æ€ state æ˜¯é‡æ–°å£°æ˜çš„ã€‚ä½†æ˜¯å¦‚æœåƒ <code>useEffect</code> ï¼Œ <code>useMemo</code> ï¼Œ<code>useCallback</code> ç­‰ï¼Œå®ƒä»¬å†…éƒ¨å¦‚æœå¼•ç”¨äº† state æˆ– props çš„å€¼ï¼Œè€Œä¸”è¿™äº›çŠ¶æ€æœ€åä¿å­˜åœ¨äº†å‡½æ•°ç»„ä»¶å¯¹åº”çš„ fiber ä¸Šï¼Œé‚£ä¹ˆæ­¤æ¬¡å‡½æ•°ç»„ä»¶æ‰§è¡Œå®Œæ¯•åï¼Œè¿™äº›çŠ¶æ€å°±ä¸ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶é‡Šæ”¾ã€‚è¿™æ ·é€ æˆçš„å½±å“æ˜¯ï¼Œä¸Šè¿° hooks å¦‚æœæ²¡æœ‰æŠŠå†…éƒ¨ä½¿ç”¨çš„ state æˆ– props ä½œä¸ºä¾èµ–é¡¹ï¼Œé‚£ä¹ˆå†…éƒ¨å°±ä¸€ç›´æ— æ³•ä½¿ç”¨æœ€æ–°çš„ props æˆ–è€… state ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä¸¾ä¸ªç®€å•çš„ä¾‹å­ã€‚</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useTest</span>(<span class="hljs-params"></span>){
    <span class="hljs-keyword">const</span> [ number ] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">const</span> value = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useMemo</span>(<span class="hljs-function">()=></span>{
         <span class="hljs-comment">// å†…éƒ¨å¼•ç”¨äº† number è¿›è¡Œè®¡ç®—</span>
    },[])
}
</code></pre>
<ul>
<li>å¦‚ä¸Š useMemo å†…éƒ¨ä½¿ç”¨äº† state ä¸­çš„ number è¿›è¡Œè®¡ç®—ï¼Œå½“ number æ”¹å˜ä½†æ˜¯æ— æ³•å¾—åˆ°æœ€æ–°çš„ value ã€‚è¿™å°±æ˜¯ä¸Šé¢æˆ‘è¯´åˆ°çš„é—­åŒ…é—®é¢˜ã€‚è§£å†³æ–¹æ³•å°±æ˜¯ useMemo çš„ deps ä¸­åŠ å…¥ numberã€‚</li>
</ul>
<p>ä½†æ˜¯æœ‰çš„æ—¶å€™è¿™ç§ä¾èµ–å…³ç³»å¾€å¾€æ˜¯æ›´å¤æ‚çš„ã€‚æˆ‘å°†å¦‚ä¸Š demo ä¿®æ”¹ã€‚</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useTest</span>(<span class="hljs-params"></span>){
    <span class="hljs-keyword">const</span> [ number ] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">const</span> value = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useMemo</span>(<span class="hljs-function">()=></span>{
         <span class="hljs-comment">// å†…éƒ¨å¼•ç”¨äº† number è¿›è¡Œè®¡ç®—</span>
    },[ number ])
    <span class="hljs-keyword">const</span> callback = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){
         <span class="hljs-comment">// å†…éƒ¨å¼•ç”¨äº† useEffect</span>
    },[ value ])
    
}
</code></pre>
<ul>
<li>å¦‚ä¸Šï¼Œåœ¨ä¹‹å‰çš„åŸºç¡€ä¸Šï¼ŒåˆåŠ äº† useCallback è€Œä¸”å†…éƒ¨å¼•ç”¨äº† useMemo ç”Ÿæˆçš„ valueã€‚ è¿™ä¸ªæ—¶å€™å¦‚æœ useCallback æ‰§è¡Œï¼Œå†…éƒ¨æƒ³è¦è·å–æ–°çš„çŠ¶æ€å€¼ valueï¼Œé‚£ä¹ˆå°±éœ€è¦æŠŠ value æ”¾åœ¨ useCallback çš„ deps ä¸­ã€‚</li>
</ul>
<p><strong>ğŸ¤”æ€è€ƒï¼šå¦‚ä½•åˆ†æ¸…æ¥šä¾èµ–å…³ç³»å‘¢ï¼Ÿ</strong></p>
<ul>
<li><strong>ç¬¬ä¸€æ­¥</strong>ï¼šæ‰¾åˆ° hooks å†…éƒ¨å¯èƒ½å‘ç”Ÿå˜åŒ–çš„çŠ¶æ€ ï¼Œ è¿™ä¸ªçŠ¶æ€å¯ä»¥æ˜¯ state æˆ–è€… propsã€‚</li>
<li><strong>ç¬¬äºŒæ­¥</strong>ï¼šåˆ†æ useMemo æˆ–è€… useCallback å†…éƒ¨æ˜¯å¦ä½¿ç”¨ä¸Šè¿°çŠ¶æ€ï¼Œæˆ–è€…æ˜¯å¦<strong>å…³è”ä½¿ç”¨</strong> useMemo æˆ–è€… useCallback æ´¾ç”Ÿå‡ºæ¥çš„çŠ¶æ€ï¼ˆ æ¯”å¦‚ä¸Šè¿°çš„ value ï¼Œå°±æ˜¯ useMemo æ´¾ç”Ÿçš„çŠ¶æ€ ï¼‰ ï¼Œå¦‚æœæœ‰ä½¿ç”¨ï¼Œé‚£ä¹ˆåŠ å…¥åˆ° deps ã€‚</li>
<li><strong>ç¬¬ä¸‰æ­¥</strong>ï¼šåˆ†æ useEffect ï¼ŒuseLayoutEffect ï¼ŒuseImperativeHandle å†…éƒ¨æ˜¯å¦ä½¿ç”¨ä¸Šè¿°ä¸¤ä¸ªæ­¥éª¤äº§ç”Ÿçš„å€¼ï¼Œè€Œä¸”è¿˜è¦è¿™äº›å€¼åšä¸€äº›å‰¯ä½œç”¨ï¼Œå¦‚æœæœ‰ï¼Œé‚£ä¹ˆåŠ å…¥åˆ° deps ã€‚</li>
</ul>
<h2>ä¸‰ è‡ªå®šä¹‰ hooks è®¾è®¡</h2>
<p>ä¸Šè¿°ä»‹ç»äº†è‡ªå®šä¹‰ hooks çš„æ¦‚å¿µå’Œç‰¹æ€§ï¼Œæ¥ä¸‹æ¥é‡ç‚¹åˆ†æä¸€ä¸‹ï¼Œå¦‚ä½•å»è®¾è®¡ä¸€ä¸ªè‡ªå®šä¹‰ hooks ã€‚</p>
<p>é¦–å…ˆæ˜ç¡®çš„ä¸€ç‚¹æ˜¯ï¼Œè‡ªå®šä¹‰ hooks è§£å†³é€»è¾‘å¤ç”¨çš„é—®é¢˜ï¼Œé‚£ä¹ˆåœ¨æ­£å¸¸çš„ä¸šåŠ¡å¼€å‘è¿‡ç¨‹ä¸­ï¼Œè¦æ˜ç™½å“ªäº›é€»è¾‘æ˜¯é‡å¤æ€§å¼ºçš„é€»è¾‘ï¼Œè¿™æ®µé€»è¾‘ä¸»è¦åŠŸèƒ½æ˜¯ä»€ä¹ˆã€‚</p>
<p>ä¸‹é¢æˆ‘æŠŠè‡ªå®šä¹‰ hooks èƒ½å®ç°çš„åŠŸèƒ½åŒ–æ•´ä¸ºé›¶ï¼Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯èƒ½æ˜¯ä¸‹é¢ä¸€ç§æˆ–è€…å‡ ç§çš„ç»“åˆã€‚</p>
<h3>1 æ¥æ”¶çŠ¶æ€</h3>
<p>è‡ªå®šä¹‰ hooks ï¼Œå¯ä»¥é€šè¿‡å‡½æ•°å‚æ•°æ¥ç›´æ¥æ¥æ”¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„çŠ¶æ€ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ useContext ï¼Œæ¥éšå¼è·å–ä¸Šä¸‹æ–‡ä¸­çš„çŠ¶æ€ã€‚æ¯”å¦‚ React Router ä¸­æœ€ç®€å•çš„ä¸€ä¸ªè‡ªå®šä¹‰ hooks â€”â€” useHistory ï¼Œç”¨äºè·å– history å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useHistory</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">RouterContext</span>).<span class="hljs-property">history</span>
}
</code></pre>
<p>æ³¨æ„âš ï¸ï¼š<strong>å¦‚æœä½¿ç”¨äº†å†…éƒ¨å«æœ‰ useContext çš„è‡ªå®šä¹‰ hooks ï¼Œé‚£ä¹ˆå½“ context ä¸Šä¸‹æ–‡æ”¹å˜ï¼Œä¼šè®©ä½¿ç”¨è‡ªå®šä¹‰ hooks çš„ç»„ä»¶è‡ªåŠ¨æ¸²æŸ“ã€‚</strong></p>
<h3>2 å­˜å‚¨ï½œç®¡ç†çŠ¶æ€</h3>
<p><strong>å‚¨å­˜çŠ¶æ€</strong></p>
<p>è‡ªå®šä¹‰ hooks ä¹Ÿå¯ä»¥ç”¨æ¥å‚¨å­˜å’Œç®¡ç†çŠ¶æ€ã€‚æœ¬è´¨ä¸Šåº”ç”¨ useRef ä¿å­˜åŸå§‹å¯¹è±¡çš„ç‰¹æ€§ã€‚</p>
<p>æ¯”å¦‚ <code>rc-form</code> ä¸­çš„ <code>useForm</code> é‡Œé¢å°±æ˜¯ç”¨ useRef æ¥ä¿å­˜è¡¨å•çŠ¶æ€ç®¡ç† Store çš„ã€‚ç®€åŒ–æµç¨‹å¦‚ä¸‹</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useForm</span>(<span class="hljs-params"></span>){
    <span class="hljs-keyword">const</span> formCurrent = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>)
    <span class="hljs-keyword">if</span>(!formCurrent.<span class="hljs-property">current</span>){
        formCurrent.<span class="hljs-property">current</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormStore</span>()
    }
    <span class="hljs-keyword">return</span> formCurrent.<span class="hljs-property">current</span>
}
</code></pre>
<p><strong>è®°å½•çŠ¶æ€</strong></p>
<p>å½“ç„¶ useRef å’Œ useEffect å¯ä»¥é…åˆè®°å½•å‡½æ•°ç»„ä»¶çš„å†…éƒ¨çš„çŠ¶æ€ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰ hooks ç”¨äºè®°å½•å‡½æ•°ç»„ä»¶æ‰§è¡Œæ¬¡æ•°ï¼Œå’Œæ˜¯å¦ç¬¬ä¸€æ¬¡æ¸²æŸ“ã€‚</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useRenderCount</span>(<span class="hljs-params"></span>){
    <span class="hljs-keyword">const</span> isFirstRender = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useRef</span>(<span class="hljs-literal">true</span>) <span class="hljs-comment">/* è®°å½•æ˜¯å¦æ˜¯ç¬¬ä¸€æ¬¡æ¸²æŸ“ */</span>
    <span class="hljs-keyword">const</span> renderCount = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useRef</span>(<span class="hljs-number">1</span>)      <span class="hljs-comment">/* è®°å½•æ¸²æŸ“æ¬¡æ•° */</span>
    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">()=></span>{
        isFirstRender.<span class="hljs-property">current</span> = <span class="hljs-literal">false</span>        <span class="hljs-comment">/* ç¬¬ä¸€æ¬¡æ¸²æŸ“å®Œæˆï¼Œæ”¹å˜çŠ¶æ€ */</span>
    },[])
    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">()=></span>{
        <span class="hljs-keyword">if</span>(!isFirstRender.<span class="hljs-property">current</span>) renderCount.<span class="hljs-property">current</span>++ <span class="hljs-comment">/* å¦‚æœä¸æ˜¯ç¬¬ä¸€æ¬¡æ¸²æŸ“ï¼Œé‚£ä¹ˆæ·»åŠ æ¸²æŸ“æ¬¡æ•°  */</span>
    })  
    <span class="hljs-keyword">return</span> [ renderCount.<span class="hljs-property">current</span> , isFirstRender.<span class="hljs-property">current</span> ]
} 
</code></pre>
<ul>
<li>å¦‚ä¸Šç”¨ isFirstRender  è®°å½•æ˜¯å¦æ˜¯ç¬¬ä¸€æ¬¡æ¸²æŸ“ ï¼Œç”¨ renderCount è®°å½•æ¸²æŸ“æ¬¡æ•°ï¼Œç¬¬ä¸€ä¸ª useEffect ä¾èµ–é¡¹ä¸ºç©ºï¼Œåªæ‰§è¡Œä¸€æ¬¡ï¼Œç¬¬äºŒä¸ª useEffect æ²¡æœ‰ä¾èµ–é¡¹ï¼Œæ¯ä¸€æ¬¡å‡½æ•°ç»„ä»¶æ‰§è¡Œï¼Œéƒ½ä¼šæ‰§è¡Œï¼Œç»Ÿè®¡æ¸²æŸ“æ¬¡æ•°ã€‚</li>
</ul>
<p>ä¸Šè¿°åªæ˜¯ä¸¾äº†ä¸€ä¸ªä¾‹å­ï¼Œå½“ç„¶åœ¨å…·ä½“å¼€å‘ä¸­ï¼Œå¯ä»¥ç”¨è‡ªå®šä¹‰ hooks å»è®°å½•ä¸€äº›å…¶ä»–çš„ä¸œè¥¿ã€‚æ¯”å¦‚å…ƒç´ çš„ä¿¡æ¯ï¼Œå› ä¸ºå¯ä»¥åœ¨ useEffect ä¸­è·å–åˆ°æœ€æ–°çš„ DOM å…ƒç´ ä¿¡æ¯çš„ã€‚</p>
<h3>3 æ›´æ–°çŠ¶æ€</h3>
<p><strong>æ”¹å˜çŠ¶æ€</strong></p>
<p>è‡ªå®šä¹‰ hooks å†…éƒ¨å¯ä»¥ä¿å­˜çŠ¶æ€ï¼Œå¯ä»¥æŠŠæ›´æ–°çŠ¶æ€çš„æ–¹æ³•æš´éœ²å‡ºå»ï¼Œæ¥æ”¹å˜ hooks å†…éƒ¨çŠ¶æ€ã€‚è€Œæ›´æ–°çŠ¶æ€çš„æ–¹æ³•å¯ä»¥æ˜¯ç»„åˆå¤šæ€çš„ã€‚</p>
<p>æ¯”å¦‚å®ç°ä¸€ä¸ªé˜²æŠ–èŠ‚æµçš„è‡ªå®šä¹‰ hooks ï¼š</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">debounce</span>(<span class="hljs-params">fn, time</span>) {
    <span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">...arg</span>) {
      <span class="hljs-keyword">if</span> (timer) <span class="hljs-built_in">clearTimeout</span>(timer);
      timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =></span> {
        fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, arg);
      }, time);
    };
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">useDebounceState</span>(<span class="hljs-params">defauleValue,time</span>){
    <span class="hljs-keyword">const</span> [ value , changeValue ] = <span class="hljs-title function_">useState</span>(defauleValue)
    <span class="hljs-comment">/* å¯¹ changeValue åšé˜²æŠ–å¤„ç†   */</span>
    <span class="hljs-keyword">const</span> newChange = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useMemo</span>(<span class="hljs-function">()=></span> <span class="hljs-title function_">debounce</span>(changeValue,time) ,[ time ])
    <span class="hljs-keyword">return</span> [ value , newChange ]
}
</code></pre>
<p>ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Index</span>(<span class="hljs-params"></span>){
    <span class="hljs-keyword">const</span> [ value , setValue ] = <span class="hljs-title function_">useDebounceState</span>(<span class="hljs-string">''</span>,<span class="hljs-number">300</span>)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value)
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">marginTop:</span>'<span class="hljs-attr">50px</span>' }} ></span>
        ã€ŠReact è¿›é˜¶å®è·µæŒ‡å—ã€‹
        <span class="hljs-tag">&#x3C;<span class="hljs-name">input</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">""</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span>=></span>setValue(e.target.value)}  />
    <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>
}
</code></pre>
<p>æ•ˆæœï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5aa90ff8fe8f401e8ba669af510c35d3~tplv-k3u1fbpfcp-watermark.image" alt="3.gif"></p>
<p><strong>ç»„åˆstate</strong></p>
<p>è‡ªå®šä¹‰ hooks å¯ä»¥ç»´æŠ¤å¤šä¸ª state ï¼Œç„¶åå¯ä»¥ç»„åˆæ›´æ–°å‡½æ•°ã€‚æˆ‘è¿™ä¹ˆè¯´å¯èƒ½å¾ˆå¤šåŒå­¦ä¸ç†è§£ï¼Œä¸‹é¢æˆ‘æ¥ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œæ¯”å¦‚æ§åˆ¶æ•°æ®åŠ è½½å’Œloadingæ•ˆæœï¼Œ</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useControlData</span>(<span class="hljs-params"></span>){
    <span class="hljs-keyword">const</span> [ isLoading , setLoading ] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>)
    <span class="hljs-keyword">const</span> [ data,  setData ] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>([])
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">getData</span> = (<span class="hljs-params">data</span>)=> { <span class="hljs-comment">/* è·å–åˆ°æ•°æ®ï¼Œæ¸…ç©º loading æ•ˆæœ  */</span>
        <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>)
        <span class="hljs-title function_">setData</span>(data)
    }  
    <span class="hljs-comment">// ... å…¶ä»–é€»è¾‘</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">resetData</span> = (<span class="hljs-params"></span>) =>{  <span class="hljs-comment">/* è¯·æ±‚æ•°æ®ä¹‹å‰ï¼Œæ·»åŠ  loading æ•ˆæœ */</span>
        <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">true</span>)
        <span class="hljs-title function_">setData</span>([])
    }
    <span class="hljs-keyword">return</span> [ getData , resetData , ...  ] 
}
</code></pre>
<p><strong>åˆç†state</strong></p>
<p>useState å’Œ useRef éƒ½å¯ä»¥ä¿å­˜çŠ¶æ€ï¼š</p>
<ul>
<li>useRef åªè¦ç»„ä»¶ä¸é”€æ¯ï¼Œä¸€ç›´å­˜åœ¨ï¼Œè€Œä¸”å¯ä»¥éšæ—¶è®¿é—®æœ€æ–°çŠ¶æ€å€¼ã€‚</li>
<li>useState å¯ä»¥è®©ç»„ä»¶æ›´æ–°ï¼Œä½†æ˜¯ state éœ€è¦åœ¨ä¸‹ä¸€æ¬¡å‡½æ•°ç»„ä»¶æ‰§è¡Œçš„æ—¶å€™æ‰æ›´æ–°ï¼Œè€Œä¸”å¦‚æœæƒ³è®© useEffect æˆ–è€… useMemo è®¿é—®æœ€æ–°çš„ state å€¼ï¼Œéœ€è¦å°† state æ·»åŠ åˆ° deps ä¾èµ–é¡¹ä¸­ã€‚</li>
</ul>
<p>è‡ªå®šä¹‰ hooks å¯ä»¥é€šè¿‡ useState + useRef çš„ç‰¹æ€§ï¼Œå–å…¶ç²¾åï¼Œæ›´åˆç†çš„ç®¡ç† stateã€‚æ¯”å¦‚å¦‚ä¸‹å®ç°ä¸€ä¸ª<strong>åŒæ­¥çš„state</strong></p>
<pre><code class="hljs language-js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useSyncState</span>(<span class="hljs-params">defaultValue</span>){
   <span class="hljs-keyword">const</span> value = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useRef</span>(defaultValue)        <span class="hljs-comment">/* useRef ç”¨äºä¿å­˜çŠ¶æ€ */</span>
   <span class="hljs-keyword">const</span> [ ,forceUpdate ] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>)   <span class="hljs-comment">/* useState ç”¨äºæ›´æ–°ç»„ä»¶ */</span>
   <span class="hljs-keyword">const</span> <span class="hljs-title function_">dispatch</span> = (<span class="hljs-params">fn</span>) => {                      <span class="hljs-comment">/* æ¨¡æ‹Ÿä¸€ä¸ªæ›´æ–°å‡½æ•° */</span>
       <span class="hljs-keyword">let</span> newValue
       <span class="hljs-keyword">if</span>( <span class="hljs-keyword">typeof</span> fn === <span class="hljs-string">'function'</span> ){
            newValue = <span class="hljs-title function_">fn</span>(value.<span class="hljs-property">current</span>)           <span class="hljs-comment">/* å½“å‚æ•°ä¸ºå‡½æ•°çš„æƒ…å†µ */</span>
       }<span class="hljs-keyword">else</span>{
           newValue = fn                           <span class="hljs-comment">/* å½“å‚æ•°ä¸ºå…¶ä»–çš„æƒ…å†µ */</span>
       }
       value.<span class="hljs-property">current</span> = newValue
       <span class="hljs-title function_">forceUpdate</span>({})                             <span class="hljs-comment">/* å¼ºåˆ¶æ›´æ–° */</span>
   } 
   <span class="hljs-keyword">return</span> [  value , dispatch  ]                   <span class="hljs-comment">/* è¿”å›å’Œ useState ä¸€æ ·çš„æ ¼å¼ */</span>
}
</code></pre>
<ul>
<li>useRef ç”¨äºä¿å­˜çŠ¶æ€ ï¼ŒuseState ç”¨äºæ›´æ–°ç»„ä»¶ã€‚</li>
<li>åšä¸€ä¸ª <code>dispatch</code> å¤„ç†å‚æ•°ä¸ºå‡½æ•°çš„æƒ…å†µã€‚åœ¨ dispatch å†…éƒ¨ç”¨ forceUpdate è§¦å‘çœŸæ­£çš„æ›´æ–°ã€‚</li>
<li>è¿”å›çš„ç»“æ„å’Œ useState ç»“æ„ç›¸åŒã€‚ä¸è¿‡æ³¨æ„çš„æ˜¯ä½¿ç”¨çš„æ—¶å€™è¦ç”¨ value.current ã€‚</li>
</ul>
<p>ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Index</span>(<span class="hljs-params"></span>){
    <span class="hljs-keyword">const</span> [ data , setData  ] = <span class="hljs-title function_">useSyncState</span>(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">marginTop:</span>'<span class="hljs-attr">50px</span>' }} ></span>
        ã€ŠReact è¿›é˜¶å®è·µæŒ‡å—ã€‹ ç‚¹èµ ğŸ‘ { data.current }
       <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{</span> ()=></span> {
           setData(num => num + 1)
           console.log(data.current) //æ‰“å°åˆ°æœ€æ–°çš„å€¼
       } } >ç‚¹å‡»<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
    <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>
}
</code></pre>
<h3>4 æ“çºµ DOM / ç»„ä»¶å®ä¾‹</h3>
<p>è‡ªå®šä¹‰ hooks ä¹Ÿå¯ä»¥è®¾è®¡æˆå¯¹åŸç”Ÿ DOM çš„æ“çºµæ§åˆ¶ã€‚ç©¶å…¶åŸç†ç”¨ useRef è·å–å…ƒç´ ï¼Œ åœ¨ useEffect ä¸­åšå…ƒç´ çš„ç›‘å¬ã€‚</p>
<p>æ¯”å¦‚å¦‚ä¸‹åœºæ™¯ï¼Œç”¨ä¸€ä¸ªè‡ªå®šä¹‰ hooks åšä¸€äº›åŸºäº DOM çš„æ“ä½œ ã€‚</p>
<pre><code class="hljs language-js"><span class="hljs-comment">/* <span class="hljs-doctag">TODO:</span> æ“çºµåŸç”Ÿdom  */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useGetDOM</span>(<span class="hljs-params"></span>){
    <span class="hljs-keyword">const</span> dom = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useRef</span>()
    <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">()=></span>{
       <span class="hljs-comment">/* åšä¸€äº›åŸºäº dom çš„æ“ä½œ */</span>
       <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dom.<span class="hljs-property">current</span>)
    },[])
    <span class="hljs-keyword">return</span> dom
}
</code></pre>
<ul>
<li>è‡ªå®šä¹‰ useGetDOM ï¼Œç”¨ useRef è·å– DOM å…ƒç´ ï¼Œåœ¨ useEffect ä¸­åšä¸€äº›åŸºäº DOM çš„æ“ä½œã€‚</li>
</ul>
<p>ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Index</span>(<span class="hljs-params"></span>){
    <span class="hljs-keyword">const</span> dom = <span class="hljs-title function_">useGetDOM</span>()
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{</span> <span class="hljs-attr">dom</span> } ></span>
        ã€ŠReactè¿›é˜¶å®è·µæŒ‡å—ã€‹
        <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> ></span>ç‚¹èµ<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
    <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>
}
</code></pre>
<h3>5 æ‰§è¡Œå‰¯ä½œç”¨</h3>
<p>è‡ªå®šä¹‰ hooks ä¹Ÿå¯ä»¥æ‰§è¡Œä¸€äº›å‰¯ä½œç”¨ï¼Œæ¯”å¦‚è¯´ç›‘å¬ä¸€äº› props æˆ– state å˜åŒ–è€Œå¸¦æ¥çš„å‰¯ä½œç”¨ã€‚æ¯”å¦‚å¦‚ä¸‹ç›‘å¬ï¼Œå½“ <code>value</code> æ”¹å˜çš„æ—¶å€™ï¼Œæ‰§è¡Œ <code>cb</code>ã€‚</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useEffectProps</span>(<span class="hljs-params">value,cb</span>){
    <span class="hljs-keyword">const</span> isMounted = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useRef</span>(<span class="hljs-literal">false</span>)
    <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">()=></span>{
         <span class="hljs-comment">/* é˜²æ­¢ç¬¬ä¸€æ¬¡æ‰§è¡Œ */</span>
        isMounted.<span class="hljs-property">current</span> &#x26;&#x26; cb &#x26;&#x26; <span class="hljs-title function_">cb</span>()
    },[ value ])
    <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">()=></span>{
          <span class="hljs-comment">/* ç¬¬ä¸€æ¬¡æŒ‚è½½ */</span>
         isMounted.<span class="hljs-property">current</span> = <span class="hljs-literal">true</span>
    },[])
}
</code></pre>
<ul>
<li>ç”¨ useRef ä¿å­˜æ˜¯å¦ç¬¬ä¸€æ¬¡çš„çŠ¶æ€ã€‚ç„¶ååœ¨ä¸€ä¸ª useEffect æ”¹å˜åŠ è½½å®ŒæˆçŠ¶æ€ã€‚</li>
<li>åªæœ‰å½“ä¸æ˜¯ç¬¬ä¸€æ¬¡åŠ è½½ä¸” value æ”¹å˜çš„æ—¶å€™ï¼Œæ‰§è¡Œå›è°ƒå‡½æ•° cb ã€‚</li>
<li>å½“ä½¿ç”¨è¿™ä¸ªè‡ªå®šä¹‰ hooks å°±å¯ä»¥ç›‘å¬ï¼Œprops æˆ–è€… state å˜åŒ–ã€‚æ¥ä¸‹æ¥å°è¯•ä¸€ä¸‹ã€‚</li>
</ul>
<p>ä½¿ç”¨ç»„ä»¶å’Œçˆ¶ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Index</span>(<span class="hljs-params">props</span>){
    <span class="hljs-title function_">useEffectProps</span>( props.<span class="hljs-property">a</span> ,<span class="hljs-function">()=></span>{<span class="hljs-comment">/* ç›‘å¬ a å˜åŒ– */</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'props a å˜åŒ–:'</span>, props.<span class="hljs-property">a</span>  )
    } )
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>å­ç»„ä»¶<span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Home</span>(<span class="hljs-params"></span>){
    <span class="hljs-keyword">const</span> [ a , setA ] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">const</span> [ b , setB ] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">Index</span> <span class="hljs-attr">a</span>=<span class="hljs-string">{a}</span>  <span class="hljs-attr">b</span>=<span class="hljs-string">{b}</span> /></span>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span>=></span> setA(a+1)} >æ”¹å˜ props a  <span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span>=></span> setB(b+1)} >æ”¹å˜ props b  <span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
    <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>
}
</code></pre>
<p>æ•ˆæœï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/abe8ac2134bf40c890a71e0b12688879~tplv-k3u1fbpfcp-watermark.image" alt="2.gif"></p>
<ul>
<li>å½“åŠ¨æ€ç›‘å¬ props.a ï¼Œprops.a å˜åŒ–ï¼Œç›‘å¬å‡½æ•°æ‰§è¡Œã€‚</li>
</ul>
<h3>6 æŒç»­ç»´æŠ¤ä¸­ï½</h3>
<p>æœ¬ç« èŠ‚ï¼Œç¬¬äºŒåä¸ƒç« èŠ‚ï¼Œç¬¬åå››ç« èŠ‚ä¸ºæŒç»­ç»´æŠ¤ç« èŠ‚ï¼Œä¼šæœ‰æ›´å¤šç²¾å½©çš„è‡ªå®šä¹‰ hooks è®¾è®¡åœºæ™¯ã€‚</p>
<h2>å›› æ€»ç»“</h2>
<p>æœ¬ç« èŠ‚å­¦ä¹ çš„å†…å®¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>è‡ªå®šä¹‰ hooks çš„æ¦‚å¿µä¸ç‰¹æ€§ã€‚</li>
<li>è‡ªå®šä¹‰ hooks è®¾è®¡æ–¹å¼ã€‚</li>
</ul>
<p>ä¸‹ä¸€ç« å°†ä»‹ç»è‡ªå®šä¹‰ hooks å®è·µã€‚</p></div>
</body></html>