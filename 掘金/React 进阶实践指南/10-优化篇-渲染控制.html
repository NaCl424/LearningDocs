<!DOCTYPE html><html lang="en"><head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç¬¬ 01 è®²ï¼šè®¾è®¡ä¸€ä»½å¸å¼•é¢è¯•å®˜çš„ç®€å†</title>
<style type="text/css">
:root {
    --control-text-color: #777;
    --select-text-bg-color: rgba(223, 197, 223);  /*#7e66992e;*/
    
    /* side bar */
    --side-bar-bg-color: rgb(255, 255, 255);
    --active-file-text-color: #8163bd;
    --active-file-bg-color: #E9E4F0;
    --item-hover-bg-color: #E9E4F0;
    --active-file-border-color: #8163bd;

    --title-color: #6c549c;
    --font-sans-serif: 'Ubuntu', 'Source Sans Pro', sans-serif !important;
    --font-monospace: 'Fira Code', 'Roboto Mono', monospace !important;
    --purple-1: #8163bd;
    --purple-2: #79589F;
    --purple-3: #fd5eb8;
    --purple-light-1: rgba(99, 99, 172, .05);
    --purple-light-2: rgba(99, 99, 172, .1);
    --purple-light-3: rgba(99, 99, 172, .2);
    --purple-light-4: rgba(129, 99, 189, .3);
    --purple-light-5: #E9E4F0;
    --purple-light-6: rgba(129, 99, 189, .8);
}

/* html {
    font-size: 16px;
} */

body {
    font-family: var(--font-sans-serif);
    color: #34495e;
    -webkit-font-smoothing: antialiased;
    line-height: 1.6rem;
    letter-spacing: 0;
    margin: 0;
    overflow-x: hidden;
}

/* é¡µè¾¹è· å’Œ é¡µé¢å¤§å° */
#write {
    padding-left: 6ch;
    padding-right: 6ch;
    margin: 0 auto;
}

#write p {
    line-height: 1.6rem;
    word-spacing: .05rem;
}

#write ol li {
    padding-left: 0.5rem;
}

#write > ul:first-child,
#write > ol:first-child {
    margin-top: 30px;
}

body > *:first-child {
    margin-top: 0 !important;
}

body > *:last-child {
    margin-bottom: 0 !important;
}

a {
    color: var(--purple-1);
    padding: 0 2px;
    text-decoration: none;
}
.md-content {
    color: var(--purple-light-6);
}
#write a {
    border-bottom: 1px solid var(--purple-1);
    color: var(--purple-1);
    text-decoration: none;
}

h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 0.5rem;
    /* font-weight: bold; */
    font-weight: 500 !important;
    line-height: 1.4;
    cursor: text;
    color: var(--title-color);
    font-family: var(--font-sans-serif);
}

h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}

h1 tt,
h1 code {
    font-size: inherit !important;
}
h2 tt,
h2 code {
    font-size: inherit !important;
}
h3 tt,
h3 code {
    font-size: inherit !important;
}
h4 tt,
h4 code {
    font-size: inherit !important;
}
h5 tt,
h5 code {
    font-size: inherit !important;
}
h6 tt,
h6 code {
    font-size: inherit !important;
}


h1 {
    padding-bottom: .4rem;
    font-size: 2.2rem;
    line-height: 1.3;
}
h1 {
    text-align: center;
    padding-bottom: 0.3em;
    font-size: 2.2em;
    line-height: 1.2;
    margin: 2.4em auto 1.2em;
}
h1:after {
    content: '';
    display: block;
    margin: 0.2em auto 0;
    width: 100px;
    height: 2px;
    border-bottom: 2px solid var(--title-color);
}

h2 {
    margin: 1.6em auto 0.5em;
    padding-left: 10px;
    line-height: 1.4;
    font-size: 1.8em;
    border-left: 9px solid var(--title-color);
    border-bottom: 1px solid var(--title-color);
}
h3 {
    font-size: 1.5rem;
    margin: 1.2em auto 0.5em;
}
h4 {
    font-size: 1.3rem;
}
h5 {
    font-size: 1.2rem;
}
h6 {
    font-size: 1.1rem;
}

p,
blockquote,
ul,
ol,
dl,
table {
    margin: 0.8em 0;
}

li > ol,
li > ul {
    margin: 0 0;
}

hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

body > h2:first-child {
    margin-top: 0;
    padding-top: 0;
}

body > h1:first-child {
    margin-top: 0;
    padding-top: 0;
}

body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0;
}

body > h3:first-child,
body > h4:first-child,
body > h5:first-child,
body > h6:first-child {
    margin-top: 0;
    padding-top: 0;
}

a:first-child h1,
a:first-child h2,
a:first-child h3,
a:first-child h4,
a:first-child h5,
a:first-child h6 {
    margin-top: 0;
    padding-top: 0;
}

h1 p,
h2 p,
h3 p,
h4 p,
h5 p,
h6 p {
    margin-top: 0;
}

li p.first {
    display: inline-block;
}

ul,
ol {
    padding-left: 30px;
}

ul:first-child,
ol:first-child {
    margin-top: 0;
}

ul:last-child,
ol:last-child {
    margin-bottom: 0;
}

/* å¼•ç”¨ */
blockquote {
    /* margin-left: 1rem; */
    border-left: 4px solid var(--purple-light-4);
    padding: 10px 15px;
    color: #777;
    background-color: var(--purple-light-1);
}

/* è¡¨æ ¼ */
table {
    padding: 0;
    word-break: initial;
}

table tr {
    border-top: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}

/* è¡¨æ ¼ èƒŒæ™¯è‰² */
table tr:nth-child(2n),
thead {
    background-color: var(--purple-light-1);
}
#write table thead th {
    background-color: var(--purple-light-2);
}

table tr th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}

table tr td {
    border: 1px solid #dfe2e5;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}

table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}

table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}

/* ç²—ä½“ */
#write strong {
    padding: 0 2px;
    color: var(--purple-1);
}

/* æ–œä½“ */
#write em {
    padding: 0 5px 0 2px;
    /* font-style: normal; */
    color: #42b983;
}

/* inline code */
#write code, tt {
    padding: 2px 4px;
    border-radius: 2px;
    font-family: var(--font-monospace);
    font-size: 0.92rem;
    color: var(--purple-3); 
    background-color: rgba(99, 99, 172, .05);
}

tt {
    margin: 0 2px;
}

#write .md-footnote {
    background-color: #f8f8f8;
    color: var(--purple-3);
}

/* heighlight. */
#write mark {
    background-color: #fbd3ea;
    border-radius: 2px;
    padding: 2px 4px;
    margin: 0 2px;
}

#write del {
    padding: 1px 2px;
}

.md-task-list-item > input {
    margin-left: -1.3em;
}

@media print {
    html {
        font-size: 0.9rem;
    }

    table,
    pre {
        page-break-inside: avoid;
    }

    pre {
        word-wrap: break-word;
    }
}

#write pre.md-meta-block {
    padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block > .code-tooltip {
    bottom: .375rem;
}

/* å›¾ç‰‡ */
.md-image > .md-meta {
    border-radius: 3px;
    font-family: var(--font-monospace);
    padding: 2px 0 0 4px;
    font-size: 0.9em;
    color: inherit;
}
p .md-image:only-child{
    width: auto;
    text-align: left;
    margin-left: 2rem;
}
.md-tag {
    color: inherit;
}
/* å½“ â€œ![shadow-éšä¾¿å†™]()â€å†™æ—¶ï¼Œä¼šæœ‰é˜´å½± */
.md-image img[alt|='shadow'] {
    /* box-shadow: 0 4px 24px -6px #ddd; */
    box-shadow:var(--purple-light-2) 0px 10px 15px;
}

#write a.md-toc-inner {
    line-height: 1.6;
    white-space: pre-line;
    border-bottom: none;
    font-size: 0.9rem;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

#md-notification:before {
    top: 10px;
}

header,
.context-menu,
.megamenu-content,
footer {
    font-family: var(--font-sans-serif);
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state {
    visibility: visible;
}

.md-lang {
    color: #b4654d;
}

.html-for-mac .context-menu {
    --item-hover-bg-color: #E6F0FE;
}

/* ä»£ç æ¡† */
/* CodeMirror 3024 Day theme */

/* ä»£ç æ®µ èƒŒæ™¯ */
pre {
    --select-text-bg-color: rgba(223, 197, 223) !important;
    margin: .5em 0;
    padding: 1em 1.4em;
    border-radius: 8px;
    background: #f6f8fa;
    overflow-x: auto;
    box-sizing: border-box;
    font-size: 14px;
}

/* è¾¹æ¡† */
.md-fences {
    border: 1px solid #e7eaed;
    border-radius: 3px;
}

.cm-s-inner {
  padding: .25rem;
  border-radius: .25rem;
}

.cm-s-inner.CodeMirror, .cm-s-inner .CodeMirror-gutters {
  background-color: #f8f8f8 !important;
  color: #3a3432 !important;
  border: none;
}

.cm-s-inner .CodeMirror-gutters {
  color: #6d8a88;
}

.cm-s-inner .CodeMirror-cursor {
  border-left: solid thin #5c5855 !important;
}

.cm-s-inner .CodeMirror-linenumber {
  color: #807d7c;
}

.cm-s-inner .CodeMirror-line::selection, .cm-s-inner .CodeMirror-line::-moz-selection,
.cm-s-inner .CodeMirror-line > span::selection,
.cm-s-inner .CodeMirror-line > span::-moz-selection,
.cm-s-inner .CodeMirror-line > span > span::selection,
.cm-s-inner .CodeMirror-line > span > span::-moz-selection {
  background: var(--purple-light-2);
}

.cm-s-inner span.cm-comment {
  color: #cdab53;
}

.cm-s-inner span.cm-string, .cm-s-inner span.cm-string-2 {
  color: #f2b01d;
}

.cm-s-inner span.cm-number {
  color: #a34e8f;
}

.cm-s-inner span.cm-variable {
  color: #01a252;
}

.cm-s-inner span.cm-variable-2 {
  color: #01a0e4;
}

.cm-s-inner span.cm-def {
  /* color: #e8bbd0; */
  color: #e2287f;
}

.cm-s-inner span.cm-operator {
  color: #ff79c6;
}

.cm-s-inner span.cm-keyword {
  color: #db2d20;
}

.cm-s-inner span.cm-atom {
  color: #a34e8f;
}

.cm-s-inner span.cm-meta {
  color: inherit;
}

.cm-s-inner span.cm-tag {
  color: #db2d20;
}

.cm-s-inner span.cm-attribute {
  color: #01a252;
}

.cm-s-inner span.cm-qualifier {
  color: #388aa3;
}

.cm-s-inner span.cm-property {
  color: #01a252;
}

.cm-s-inner span.cm-builtin {
  color: #388aa3;
}

.cm-s-inner span.cm-variable-3, .cm-s-inner span.cm-type {
  color: #ffb86c;
}

.cm-s-inner span.cm-bracket {
  color: #3a3432;
}

.cm-s-inner span.cm-link {
  color: #a34e8f;
}

.cm-s-inner span.cm-error {
  background: #db2d20;
  color: #5c5855;
}

/* .md-fences.md-focus .cm-s-inner .CodeMirror-activeline-background {
  background: var(--purple-light-2);
} */

.cm-s-inner .CodeMirror-matchingbracket {
  text-decoration: underline;
  color: #a34e8f !important;
}

#fences-auto-suggest .active {
  background: #ddd;
}

#write .code-tooltip {
  bottom: initial;
  top: calc(100% - 1px);
  background: #f7f7f7;
  border: 1px solid #ddd;
  border-top: 0;
}

.auto-suggest-container {
  border-color: #b4b4b4;
}

.auto-suggest-container .autoComplt-hint.active {
  background: #b4b4b4;
  color: inherit;
}

/* task list */
#write .md-task-list-item > input {
  -webkit-appearance: initial;
  display: block;
  position: absolute;
  border: 1px solid #b4b4b4;
  border-radius: .25rem;
  margin-top: .1rem;
  margin-left: -1.8rem;
  height: 1.2rem;
  width: 1.2rem;
  transition: background 0.3s;
}

#write .md-task-list-item > input:focus {
  outline: none;
  box-shadow: none;
}

#write .md-task-list-item > input:hover {
  background: #ddd;
}

#write .md-task-list-item > input[checked]::before {
  content: '';
  position: absolute;
  top: 20%;
  left: 50%;
  height: 60%;
  width: 2px;
  transform: rotate(40deg);
  background: #333;
}

#write .md-task-list-item > input[checked]::after {
  content: '';
  position: absolute;
  top: 46%;
  left: 25%;
  height: 30%;
  width: 2px;
  transform: rotate(-40deg);
  background: #333;
}

#write .md-task-list-item > p {
  transition: color 0.3s, opacity 0.3s;
}

#write .md-task-list-item.task-list-done > p {
  color: #b4b4b4;
  text-decoration: line-through;
}

#write .md-task-list-item.task-list-done > p > .md-emoji {
  opacity: .5;
}

#write .md-task-list-item.task-list-done > p > .md-link > a {
  opacity: .6;
}

/* sidebar and outline */
.pin-outline .outline-active {
  color: var(--active-file-text-color); 
}

.file-list-item {
    border-bottom: 1px solid;
    border-color: var(--purple-light-5);
}

.file-list-item-summary {
    font-weight: 400;
}

.file-list-item.active {
    color: var(--active-file-text-color);
    background-color: var(--purple-light-5);
}

.file-tree-node.active>.file-node-background {
    background-color: var(--purple-light-5);
    font-weight: 700;
} 

.file-tree-node.active>.file-node-content {
    color: var(--active-file-text-color);
    font-weight: 700;
}

.file-node-content {
    color: #5e676d;
}

.sidebar-tabs {
    border-bottom: none;
}
.sidebar-tab.active {
    font-weight: 400;
}

.sidebar-content-content {
    font-size: 0.9rem;
}

img {
    max-width: 100%;
}

body {
    background-color: rgb(237, 237, 237);
}
#content {
    width: 836px;
    padding: 50px;
    background: #fff;
    margin: 0 auto;
}/*# sourceURL=/Users/young/Documents/Codes/Fun/lagou/public/purple.css*/</style><style type="text/css">.hljs{display:block;overflow-x:auto;padding:.5em;color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}/*# sourceURL=/Users/young/Documents/Codes/Fun/lagou/public/atom-one-light.min.css*/</style></head>
<body>
<div id="content"><h1>ä¼˜åŒ–ç¯‡-æ¸²æŸ“æ§åˆ¶</h1>
<h2>ä¸€ å‰è¨€</h2>
<p>ä»æœ¬èŠ‚å¼€å§‹ï¼Œæˆ‘ä»¬å°†å¼€å§‹æ­£å¼ä»‹ç» React ä¼˜åŒ–ç¯èŠ‚ï¼ŒReact ä¼˜åŒ–ä¼šä»<strong>æ¸²æŸ“ã€åŠ è½½ã€æµ·é‡æ•°æ®ã€ç»†èŠ‚</strong>å››ä¸ªæ–¹å‘å…¥æ‰‹ï¼Œè¯¦ç»†ä»‹ç» React ä¼˜åŒ–è¿‡ç¨‹ä¸­çš„æ–¹æ³•å’ŒæŠ€å·§ã€‚æœ¬ç« èŠ‚å°†é‡ç‚¹è°ˆè°ˆ React çš„æ¸²æŸ“ä»¥åŠä¼˜åŒ–æ‰‹æ®µã€‚</p>
<p>é€šè¿‡æœ¬ç« èŠ‚çš„å­¦ä¹ ï¼Œä½ å°†æ”¶è· React æ¸²æŸ“æ§åˆ¶çš„å¸¸è§„æ–¹æ³•ä»¥åŠåŸç†ï¼Œå¹¶ä¸”å­¦ä¼šæ€§èƒ½ä¼˜åŒ–çš„ä¸»è¦æ‰‹æ®µã€‚</p>
<h2>äºŒ å†è°ˆ React æ¸²æŸ“</h2>
<p>å¯¹äº React æ¸²æŸ“ï¼Œä½ ä¸è¦ä»…ä»…ç†è§£æˆç±»ç»„ä»¶è§¦å‘ render å‡½æ•°ï¼Œå‡½æ•°ç»„ä»¶æœ¬èº«æ‰§è¡Œï¼Œäº‹å®ä¸Šï¼Œä»è°ƒåº¦æ›´æ–°ä»»åŠ¡åˆ°è°ƒå’Œ fiberï¼Œå†åˆ°æµè§ˆå™¨æ¸²æŸ“çœŸå® DOMï¼Œæ¯ä¸€ä¸ªç¯èŠ‚éƒ½æ˜¯æ¸²æŸ“çš„ä¸€éƒ¨åˆ†ï¼Œè‡³äºå¯¹äºæ¯ä¸ªç¯èŠ‚çš„æ€§èƒ½ä¼˜åŒ–ï¼ŒReact åœ¨åº•å±‚å·²ç»å¤„ç†äº†å¤§éƒ¨åˆ†ä¼˜åŒ–ç»†èŠ‚ï¼ŒåŒ…æ‹¬è®¾ç«‹ä»»åŠ¡ä¼˜å…ˆçº§ã€å¼‚æ­¥è°ƒåº¦ã€diffç®—æ³•ã€æ—¶é—´åˆ†ç‰‡éƒ½æ˜¯ React ä¸ºäº†æé«˜æ€§èƒ½ï¼Œæå‡ç”¨æˆ·ä½“éªŒé‡‡å–çš„æ‰‹æ®µã€‚æ‰€ä»¥ï¼Œå¼€å‘è€…åªéœ€è¦å‘Šè¯‰ React å“ªäº›ç»„ä»¶éœ€è¦æ›´æ–°ï¼Œå“ªäº›ç»„ä»¶ä¸éœ€è¦æ›´æ–°ã€‚äºæ˜¯ï¼ŒReact æä¾›äº† PureComponentï¼ŒshouldComponentUpdatedï¼Œmemo ç­‰ä¼˜åŒ–æ‰‹æ®µã€‚è¿™äº›æ‰‹æ®µæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<h3>renderé˜¶æ®µä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>é¦–å…ˆæ¥æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œç»„ä»¶åœ¨ä¸€æ¬¡æ›´æ–°ä¸­ï¼Œç±»ç»„ä»¶æ‰§è¡Œ render ï¼Œæ‰§è¡Œå‡½æ•°ç»„ä»¶ renderWithHooks ï¼ˆ renderWithHook å†…éƒ¨æ‰§è¡Œ React å‡½æ•°ç»„ä»¶æœ¬èº«ï¼‰ï¼Œä»–ä»¬çš„ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ ä»–ä»¬çœŸå®æ¸²æŸ“äº† DOM äº†å—ï¼Ÿæ˜¾ç„¶ä¸æ˜¯ï¼ŒçœŸå® DOM æ˜¯åœ¨ commit é˜¶æ®µæŒ‚è½½çš„ï¼Œä¹‹å‰ç« èŠ‚æ‰“å°è¿‡ render åçš„å†…å®¹ã€‚</p>
<p>é‚£ä¹ˆ<strong>renderçš„ä½œç”¨</strong>æ˜¯æ ¹æ®ä¸€æ¬¡æ›´æ–°ä¸­äº§ç”Ÿçš„æ–°çŠ¶æ€å€¼ï¼Œé€šè¿‡ React.createElement ï¼Œæ›¿æ¢æˆæ–°çš„çŠ¶æ€ï¼Œå¾—åˆ°æ–°çš„ React element å¯¹è±¡ï¼Œæ–°çš„ element å¯¹è±¡ä¸Šï¼Œä¿å­˜äº†æœ€æ–°çŠ¶æ€å€¼ã€‚ createElement ä¼šäº§ç”Ÿä¸€ä¸ªå…¨æ–°çš„propsã€‚åˆ°æ­¤ render å‡½æ•°ä½¿å‘½å®Œæˆäº†ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼ŒReact ä¼šè°ƒå’Œç”± render å‡½æ•°äº§ç”Ÿ chidlrenï¼Œå°†å­ä»£ element å˜æˆ  fiberï¼ˆè¿™ä¸ªè¿‡ç¨‹å¦‚æœå­˜åœ¨ alternateï¼Œä¼šå¤ç”¨ alternate è¿›è¡Œå…‹éš†ï¼Œå¦‚æœæ²¡æœ‰ alternate ï¼Œé‚£ä¹ˆå°†åˆ›å»ºä¸€ä¸ªï¼‰ï¼Œå°† props å˜æˆ pendingProps ï¼Œè‡³æ­¤å½“å‰ç»„ä»¶æ›´æ–°å®Œæ¯•ã€‚ç„¶åå¦‚æœ children æ˜¯ç»„ä»¶ï¼Œä¼šç»§ç»­é‡å¤ä¸Šä¸€æ­¥ï¼Œç›´åˆ°å…¨éƒ¨ fiber è°ƒå’Œå®Œæ¯•ã€‚å®Œæˆ render é˜¶æ®µã€‚</p>
<h2>ä¸‰ React å‡ ç§æ§åˆ¶ render æ–¹æ³•</h2>
<p>React æä¾›äº†å‡ ç§æ§åˆ¶ render çš„æ–¹å¼ã€‚æˆ‘è¿™é‡Œä¼šä»‹ç»åŸç†å’Œä½¿ç”¨ã€‚è¯´åˆ°å¯¹render çš„æ§åˆ¶ï¼Œç©¶å…¶æœ¬è´¨ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li>ç¬¬ä¸€ç§å°±æ˜¯ä»çˆ¶ç»„ä»¶ç›´æ¥éš”æ–­å­ç»„ä»¶çš„æ¸²æŸ“ï¼Œç»å…¸çš„å°±æ˜¯ memoï¼Œç¼“å­˜ element å¯¹è±¡ã€‚</li>
<li>ç¬¬äºŒç§å°±æ˜¯ç»„ä»¶ä»è‡ªèº«æ¥æ§åˆ¶æ˜¯å¦ render ï¼Œæ¯”å¦‚ï¼šPureComponent ï¼ŒshouldComponentUpdate ã€‚</li>
</ul>
<h3>1 ç¼“å­˜React.elementå¯¹è±¡</h3>
<p>ç¬¬ä¸€ç§æ˜¯å¯¹ React.element å¯¹è±¡çš„ç¼“å­˜ã€‚è¿™æ˜¯ä¸€ç§çˆ¶å¯¹å­çš„æ¸²æŸ“æ§åˆ¶æ–¹æ¡ˆï¼Œæ¥æºäºä¸€ç§æƒ…å†µï¼Œçˆ¶ç»„ä»¶ render ï¼Œå­ç»„ä»¶æœ‰æ²¡æœ‰å¿…è¦è·Ÿç€çˆ¶ç»„ä»¶ä¸€èµ· render ï¼Œå¦‚æœæ²¡æœ‰å¿…è¦ï¼Œåˆ™å°±éœ€è¦é˜»æ–­æ›´æ–°æµï¼Œå¦‚ä¸‹å…ˆä¸¾ä¸¤ä¸ªå°ä¾‹å­ğŸŒ°ï¼š</p>
<pre><code class="hljs language-js"><span class="hljs-comment">/* å­ç»„ä»¶ */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Children</span> (<span class="hljs-params">{ number }</span>)</span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'å­ç»„ä»¶æ¸²æŸ“'</span>)
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>let us learn React!  { number } <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>
}
<span class="hljs-comment">/* çˆ¶ç»„ä»¶ */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Index</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span></span>{
    state={
        <span class="hljs-attr">numberA</span>:<span class="hljs-number">0</span>,
        <span class="hljs-attr">numberB</span>:<span class="hljs-number">0</span>,
    }
    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span>{
        <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>
            <span class="hljs-tag">&#x3C;<span class="hljs-name">Children</span> <span class="hljs-attr">number</span>=<span class="hljs-string">{</span> <span class="hljs-attr">this.state.numberA</span> } /></span>
           <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{</span> ()=></span> this.setState({ numberA:this.state.numberA + 1 }) } >æ”¹å˜numberA -{ this.state.numberA } <span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
           <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{</span> ()=></span> this.setState({ numberB:this.state.numberB + 1 }) } >æ”¹å˜numberB -{ this.state.numberB }<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
        <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>
     }

}
</code></pre>
<p>å¯¹äºå­ç»„ä»¶ Children ï¼Œåªæœ‰ props ä¸­ numberA æ›´æ–°æ‰æ˜¯æœ‰ç”¨çš„ï¼Œ numberB æ›´æ–°å¸¦æ¥æ¸²æŸ“ï¼ŒChildren æ ¹æœ¬ä¸éœ€è¦ã€‚ä½†æ˜¯å¦‚æœä¸å¤„ç†å­ç»„ä»¶çš„è¯ï¼Œå°±ä¼šå‡ºç°å¦‚ä¸‹æƒ…å†µã€‚æ— è®ºæ”¹å˜ numberA è¿˜æ˜¯æ”¹å˜ numberB ï¼Œå­ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“ï¼Œæ˜¾ç„¶è¿™ä¸æ˜¯æƒ³è¦çš„ç»“æœã€‚</p>
<p><strong>æ•ˆæœ</strong></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/99e32bcd5b1344ea9654001fb56917c0~tplv-k3u1fbpfcp-watermark.image" alt="1.gif"></p>
<p>é‚£ä¹ˆæ€ä¹ˆæ ·ç”¨ç¼“å­˜ element æ¥é¿å… children æ²¡æœ‰å¿…è¦çš„æ›´æ–°å‘¢ï¼Ÿå°†å¦‚ä¸Šçˆ¶ç»„ä»¶åšå¦‚ä¸‹ä¿®æ”¹ã€‚</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Index</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span></span>{
    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">props</span>)</span>{
        <span class="hljs-built_in">super</span>(props)
        <span class="hljs-built_in">this</span>.state={
            <span class="hljs-attr">numberA</span>:<span class="hljs-number">0</span>,
            <span class="hljs-attr">numberB</span>:<span class="hljs-number">0</span>,
        }
        <span class="hljs-built_in">this</span>.component =  <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">Children</span> <span class="hljs-attr">number</span>=<span class="hljs-string">{this.state.numberA}</span> /></span></span>
    }
    controllComponentRender=<span class="hljs-function">()=></span>{ <span class="hljs-comment">/* é€šè¿‡æ­¤å‡½æ•°åˆ¤æ–­ */</span>
        <span class="hljs-keyword">const</span> { props } = <span class="hljs-built_in">this</span>.component
        <span class="hljs-keyword">if</span>(props.number !== <span class="hljs-built_in">this</span>.state.numberA ){ <span class="hljs-comment">/* åªæœ‰ numberA å˜åŒ–çš„æ—¶å€™ï¼Œé‡æ–°åˆ›å»º element å¯¹è±¡  */</span>
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.component = React.cloneElement(<span class="hljs-built_in">this</span>.component,{ <span class="hljs-attr">number</span>:<span class="hljs-built_in">this</span>.state.numberA })
        }
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.component
    }
    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span>{
       <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>
          { this.controllComponentRender()  } 
          <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{</span> ()=></span> this.setState({ numberA:this.state.numberA + 1 }) } >æ”¹å˜numberA<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
          <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{</span> ()=></span> this.setState({ numberB:this.state.numberB + 1 }) }  >æ”¹å˜numberB<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
       <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>
    }
}
</code></pre>
<ul>
<li>é¦–å…ˆæŠŠ Children ç»„ä»¶å¯¹åº”çš„ element å¯¹è±¡ï¼ŒæŒ‚è½½åˆ°ç»„ä»¶å®ä¾‹çš„ component å±æ€§ä¸‹ã€‚</li>
<li>é€šè¿‡ controllComponentRender æ§åˆ¶æ¸²æŸ“ Children ç»„ä»¶ï¼Œå¦‚æœ numberA å˜åŒ–äº†ï¼Œè¯æ˜ Childrençš„props å˜åŒ–äº†ï¼Œé‚£ä¹ˆé€šè¿‡ cloneElement  è¿”å›æ–°çš„ element å¯¹è±¡ï¼Œå¹¶é‡æ–°èµ‹å€¼ç»™ component ï¼Œå¦‚æœæ²¡æœ‰å˜åŒ–ï¼Œé‚£ä¹ˆç›´æ¥è¿”å›ç¼“å­˜çš„ component ã€‚</li>
</ul>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c60e3744029f45d3a6ef8a324c0e0327~tplv-k3u1fbpfcp-watermark.image" alt="2.gif"></p>
<p><strong>å®Œç¾è¾¾åˆ°æ•ˆæœ</strong></p>
<p>ä½†æ˜¯åœ¨è¿™é‡Œä¸æ¨èåœ¨ React ç±»ç»„ä»·ä¸­è¿™ä¹ˆå†™ï¼Œå¯¹äºåŸºç¡€ä¸å¤Ÿæ‰å®çš„åŒå­¦ï¼Œå¾ˆå®¹æ˜“å‡ºç°é”™è¯¯ã€‚æˆ‘è¿˜æ˜¯æ¨èå¤§å®¶åœ¨å‡½æ•°ç»„ä»¶é‡Œç”¨ <code>useMemo</code> è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Index</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">const</span> [ numberA , setNumberA ] = React.useState(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">const</span> [ numberB , setNumberB ] = React.useState(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>
        { useMemo(()=> <span class="hljs-tag">&#x3C;<span class="hljs-name">Children</span> <span class="hljs-attr">number</span>=<span class="hljs-string">{numberA}</span> /></span>,[ numberA ]) }
        <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{</span> ()=></span> setNumberA(numberA + 1) } >æ”¹å˜numberA<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{</span> ()=></span> setNumberB(numberB + 1) } >æ”¹å˜numberB<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
    <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>
}
</code></pre>
<ul>
<li>ç”¨ React.useMemo å¯ä»¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼Œ éœ€è¦æ›´æ–°çš„å€¼ numberA æ”¾åœ¨ deps ä¸­ï¼ŒnumberA æ”¹å˜ï¼Œé‡æ–°å½¢æˆelementå¯¹è±¡ï¼Œå¦åˆ™é€šè¿‡ useMemo æ‹¿åˆ°ä¸Šæ¬¡çš„ç¼“å­˜å€¼ã€‚è¾¾åˆ°å¦‚ä¸ŠåŒæ ·æ•ˆæœã€‚æ¯”èµ·ç±»ç»„ä»¶ï¼Œæˆ‘æ›´æ¨èå‡½æ•°ç»„ä»¶ç”¨ useMemo è¿™ç§æ–¹å¼ã€‚</li>
</ul>
<p><strong>ï½œ--------é—®ä¸ç­”---------ï½œ</strong><br>
è¯¦ç»†ä»‹ç»ä¸€ä¸‹ useMemo ï¼Ÿ</p>
<p><strong>useMemo ç”¨æ³•ï¼š</strong></p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> cacheSomething = useMemo(create,deps)
</code></pre>
<ul>
<li><code>create</code>ï¼šç¬¬ä¸€ä¸ªå‚æ•°ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°çš„è¿”å›å€¼ä½œä¸ºç¼“å­˜å€¼ï¼Œå¦‚ä¸Š demo ä¸­æŠŠ Children å¯¹åº”çš„ element å¯¹è±¡ï¼Œç¼“å­˜èµ·æ¥ã€‚</li>
<li><code>deps</code>ï¼š ç¬¬äºŒä¸ªå‚æ•°ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œå­˜æ”¾å½“å‰ useMemo çš„ä¾èµ–é¡¹ï¼Œåœ¨å‡½æ•°ç»„ä»¶ä¸‹ä¸€æ¬¡æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼šå¯¹æ¯” deps ä¾èµ–é¡¹é‡Œé¢çš„çŠ¶æ€ï¼Œæ˜¯å¦æœ‰æ”¹å˜ï¼Œå¦‚æœæœ‰æ”¹å˜é‡æ–°æ‰§è¡Œ create ï¼Œå¾—åˆ°æ–°çš„ç¼“å­˜å€¼ã€‚</li>
<li><code>cacheSomething</code>ï¼šè¿”å›å€¼ï¼Œæ‰§è¡Œ create çš„è¿”å›å€¼ã€‚å¦‚æœ deps ä¸­æœ‰ä¾èµ–é¡¹æ”¹å˜ï¼Œè¿”å›çš„é‡æ–°æ‰§è¡Œ create äº§ç”Ÿçš„å€¼ï¼Œå¦åˆ™å–ä¸Šä¸€æ¬¡ç¼“å­˜å€¼ã€‚</li>
</ul>
<p><strong>useMemoåŸç†ï¼š</strong></p>
<p>useMemo ä¼šè®°å½•ä¸Šä¸€æ¬¡æ‰§è¡Œ create çš„è¿”å›å€¼ï¼Œå¹¶æŠŠå®ƒç»‘å®šåœ¨å‡½æ•°ç»„ä»¶å¯¹åº”çš„ fiber å¯¹è±¡ä¸Šï¼Œåªè¦ç»„ä»¶ä¸é”€æ¯ï¼Œç¼“å­˜å€¼å°±ä¸€ç›´å­˜åœ¨ï¼Œä½†æ˜¯ deps ä¸­å¦‚æœæœ‰ä¸€é¡¹æ”¹å˜ï¼Œå°±ä¼šé‡æ–°æ‰§è¡Œ create ï¼Œè¿”å›å€¼ä½œä¸ºæ–°çš„å€¼è®°å½•åˆ° fiber å¯¹è±¡ä¸Šã€‚</p>
<p><strong>useMemoåº”ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>å¯ä»¥ç¼“å­˜ element å¯¹è±¡ï¼Œä»è€Œè¾¾åˆ°æŒ‰æ¡ä»¶æ¸²æŸ“ç»„ä»¶ï¼Œä¼˜åŒ–æ€§èƒ½çš„ä½œç”¨ã€‚</li>
<li>å¦‚æœç»„ä»¶ä¸­ä¸æœŸæœ›æ¯æ¬¡ render éƒ½é‡æ–°è®¡ç®—ä¸€äº›å€¼,å¯ä»¥åˆ©ç”¨ useMemo æŠŠå®ƒç¼“å­˜èµ·æ¥ã€‚</li>
<li>å¯ä»¥æŠŠå‡½æ•°å’Œå±æ€§ç¼“å­˜èµ·æ¥ï¼Œä½œä¸º PureComponent çš„ç»‘å®šæ–¹æ³•ï¼Œæˆ–è€…é…åˆå…¶ä»–Hooksä¸€èµ·ä½¿ç”¨ã€‚</li>
</ul>
<p><strong>ï½œ--------end---------ï½œ</strong><br></p>
<p><strong>åŸç†æ­ç§˜</strong></p>
<p>å¦‚ä¸Šè®²äº†åˆ©ç”¨ element çš„ç¼“å­˜ï¼Œå®ç°äº†æ§åˆ¶å­ç»„ä»¶ä¸å¿…è¦çš„æ¸²æŸ“ï¼Œç©¶å…¶åŸç†æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>åŸç†å…¶å®å¾ˆç®€å•ï¼Œä¸Šè¿°æ¯æ¬¡æ‰§è¡Œ render æœ¬è´¨ä¸Š createElement ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ propsï¼Œè¿™ä¸ª props å°†ä½œä¸ºå¯¹åº” fiber çš„ <code>pendingProps</code> ï¼Œåœ¨æ­¤ fiber æ›´æ–°è°ƒå’Œé˜¶æ®µï¼ŒReact ä¼šå¯¹æ¯” fiber ä¸Šè€ oldProps å’Œæ–°çš„ newProp ï¼ˆ pendingProps ï¼‰æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰å‡½æ•°ç»„ä»¶å°±ä¼šæ”¾å¼ƒå­ç»„ä»¶çš„è°ƒå’Œæ›´æ–°ï¼Œä»è€Œå­ç»„ä»¶ä¸ä¼šé‡æ–°æ¸²æŸ“ï¼›å¦‚æœä¸Šè¿°æŠŠ element å¯¹è±¡ç¼“å­˜èµ·æ¥ï¼Œä¸Šé¢ props ä¹Ÿå°±å’Œ fiber ä¸Š oldProps æŒ‡å‘ç›¸åŒçš„å†…å­˜ç©ºé—´ï¼Œä¹Ÿå°±æ˜¯ç›¸ç­‰ï¼Œä»è€Œè·³è¿‡äº†æœ¬æ¬¡æ›´æ–°ã€‚</p>
<h3>2 PureComponent</h3>
<p>çº¯ç»„ä»¶æ˜¯ä¸€ç§å‘è‡ªç»„ä»¶æœ¬èº«çš„æ¸²æŸ“ä¼˜åŒ–ç­–ç•¥ï¼Œå½“å¼€å‘ç±»ç»„ä»¶é€‰æ‹©äº†ç»§æ‰¿ PureComponent ï¼Œå°±æ„å‘³è¿™è¦éµå¾ªå…¶æ¸²æŸ“è§„åˆ™ã€‚è§„åˆ™å°±æ˜¯<strong>æµ…æ¯”è¾ƒ state å’Œ props æ˜¯å¦ç›¸ç­‰</strong>ã€‚é¦–å…ˆæ¥çœ‹ä¸€ä¸‹ PureComponent çš„åŸºæœ¬ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-js"><span class="hljs-comment">/* çº¯ç»„ä»¶æœ¬èº« */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Children</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">PureComponent</span></span>{
    state={
        <span class="hljs-attr">name</span>:<span class="hljs-string">'alien'</span>,
        <span class="hljs-attr">age</span>:<span class="hljs-number">18</span>,
        <span class="hljs-attr">obj</span>:{
            <span class="hljs-attr">number</span>:<span class="hljs-number">1</span>,
        }
    }
    changeObjNumber=<span class="hljs-function">()=></span>{
        <span class="hljs-keyword">const</span> { obj } = <span class="hljs-built_in">this</span>.state
        obj.number++
        <span class="hljs-built_in">this</span>.setState({ obj })
    }
    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'ç»„ä»¶æ¸²æŸ“'</span>)
        <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>  ></span>
           <span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span> ç»„ä»¶æœ¬èº«æ”¹å˜state <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>
           <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =></span> this.setState({ name:'alien' }) } >stateç›¸åŒæƒ…å†µ<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
           <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =></span> this.setState({ age:this.state.age + 1  }) }>stateä¸åŒæƒ…å†µ<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
           <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{</span> <span class="hljs-attr">this.changeObjNumber</span> } ></span>stateä¸ºå¼•ç”¨æ•°æ®ç±»å‹æ—¶å€™<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
           <span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>hello,my name is alien,let us learn React!<span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>
        <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>
    }
}
<span class="hljs-comment">/* çˆ¶ç»„ä»¶ */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Home</span> (<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">const</span> [ numberA , setNumberA ] = React.useState(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">const</span> [ numberB , setNumberB ] = React.useState(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span> çˆ¶ç»„ä»¶æ”¹å˜props <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{</span> ()=></span> setNumberA(numberA + 1) } >æ”¹å˜numberA<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{</span> ()=></span> setNumberB(numberB + 1) } >æ”¹å˜numberB<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">Children</span> <span class="hljs-attr">number</span>=<span class="hljs-string">{numberA}</span>  /></span> 
    <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>
}
</code></pre>
<p>æ•ˆæœï¼š</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/23bb0f80f537418a8dedaf9a3fd88f1e~tplv-k3u1fbpfcp-watermark.image" alt="3.gif"></p>
<ul>
<li>å¯¹äº props ï¼ŒPureComponent ä¼šæµ…æ¯”è¾ƒ props æ˜¯å¦å‘ç”Ÿæ”¹å˜ï¼Œå†å†³å®šæ˜¯å¦æ¸²æŸ“ç»„ä»¶ï¼Œæ‰€ä»¥åªæœ‰ç‚¹å‡» numberA æ‰ä¼šä¿ƒä½¿ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚</li>
<li>å¯¹äº state ï¼Œå¦‚ä¸Šä¹Ÿä¼šæµ…æ¯”è¾ƒå¤„ç†ï¼Œå½“ä¸Šè¿°è§¦å‘ â€˜ state ç›¸åŒæƒ…å†µâ€™ æŒ‰é’®æ—¶ï¼Œç»„ä»¶æ²¡æœ‰æ¸²æŸ“ã€‚</li>
<li>æµ…æ¯”è¾ƒåªä¼šæ¯”è¾ƒåŸºç¡€æ•°æ®ç±»å‹ï¼Œå¯¹äºå¼•ç”¨ç±»å‹ï¼Œæ¯”å¦‚ demo ä¸­ state çš„ obj ï¼Œå•çº¯çš„æ”¹å˜ obj ä¸‹å±æ€§æ˜¯ä¸ä¼šä¿ƒä½¿ç»„ä»¶æ›´æ–°çš„ï¼Œå› ä¸ºæµ…æ¯”è¾ƒä¸¤æ¬¡ obj è¿˜æ˜¯æŒ‡å‘åŒä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œæƒ³è¦è§£å†³è¿™ä¸ªé—®é¢˜ä¹Ÿå®¹æ˜“ï¼Œæµ…æ‹·è´å°±å¯ä»¥è§£å†³ï¼Œå°†å¦‚ä¸Š changeObjNumber è¿™ä¹ˆä¿®æ”¹ã€‚è¿™æ ·å°±æ˜¯é‡æ–°åˆ›å»ºäº†ä¸€ä¸ª obj ï¼Œæ‰€ä»¥æµ…æ¯”è¾ƒä¼šä¸ç›¸ç­‰ï¼Œç»„ä»¶å°±ä¼šæ›´æ–°äº†ã€‚</li>
</ul>
<pre><code class="hljs language-js">  changeObjNumber=<span class="hljs-function">()=></span>{
        <span class="hljs-keyword">const</span> { obj } = <span class="hljs-built_in">this</span>.state
        obj.number++
        <span class="hljs-built_in">this</span>.setState({ <span class="hljs-attr">obj</span>:{...obj} })
    }
</code></pre>
<p><strong>PureComponent åŸç†åŠå…¶æµ…æ¯”è¾ƒåŸåˆ™</strong></p>
<p>PureComponent å†…éƒ¨æ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢ï¼Œé¦–å…ˆå½“é€‰æ‹©åŸºäº PureComponent ç»§æ‰¿çš„ç»„ä»¶ã€‚åŸå‹é“¾ä¸Šä¼šæœ‰ isPureReactComponent å±æ€§ã€‚ä¸€èµ·çœ‹ä¸€ä¸‹åˆ›å»º PureComponent æ—¶å€™ï¼š</p>
<blockquote>
<p>react/src/ReactBaseClasses.js</p>
</blockquote>
<pre><code class="hljs language-js"><span class="hljs-comment">/* pureComponentPrototype çº¯ç»„ä»¶æ„é€ å‡½æ•°çš„ prototype å¯¹è±¡ï¼Œç»‘å®šisPureReactComponent å±æ€§ã€‚ */</span>
pureComponentPrototype.isPureReactComponent = <span class="hljs-literal">true</span>;
</code></pre>
<p><code>isPureReactComponent</code> è¿™ä¸ªå±æ€§åœ¨æ›´æ–°ç»„ä»¶ <code>updateClassInstance</code> æ–¹æ³•ä¸­ä½¿ç”¨çš„ï¼Œåœ¨ç”Ÿå‘½å‘¨æœŸç« èŠ‚ä¸­å·²ç»è®²è¿‡ï¼Œç›¸ä¿¡çœ‹è¿‡çš„åŒå­¦éƒ½ä¼šæœ‰å°è±¡ï¼Œè¿™ä¸ªå‡½æ•°åœ¨æ›´æ–°ç»„ä»¶çš„æ—¶å€™è¢«è°ƒç”¨ï¼Œåœ¨è¿™ä¸ªå‡½æ•°å†…éƒ¨ï¼Œæœ‰ä¸€ä¸ªä¸“é—¨è´Ÿè´£æ£€æŸ¥æ˜¯å¦æ›´æ–°çš„å‡½æ•°  <code>checkShouldComponentUpdate</code> ã€‚</p>
<blockquote>
<p>react/react-reconciler/ReactFiberClassComponent.js</p>
</blockquote>
<pre><code class="hljs language-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkShouldComponentUpdate</span>(<span class="hljs-params"></span>)</span>{
     <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> instance.shouldComponentUpdate === <span class="hljs-string">'function'</span>) {
         <span class="hljs-keyword">return</span> instance.shouldComponentUpdate(newProps,newState,nextContext)  <span class="hljs-comment">/* shouldComponentUpdate é€»è¾‘ */</span>
     } 
    <span class="hljs-keyword">if</span> (ctor.prototype &#x26;&#x26; ctor.prototype.isPureReactComponent) {
        <span class="hljs-keyword">return</span>  !shallowEqual(oldProps, newProps) || !shallowEqual(oldState, newState)
    }
}
</code></pre>
<ul>
<li>isPureReactComponent å°±æ˜¯åˆ¤æ–­å½“å‰ç»„ä»¶æ˜¯ä¸æ˜¯çº¯ç»„ä»¶çš„ï¼Œå¦‚æœæ˜¯ PureComponent ä¼šæµ…æ¯”è¾ƒ props å’Œ state æ˜¯å¦ç›¸ç­‰ã€‚</li>
<li>è¿˜æœ‰ä¸€ç‚¹å€¼å¾—æ³¨æ„çš„å°±æ˜¯ shouldComponentUpdate çš„æƒé‡ï¼Œä¼šå¤§äº PureComponentã€‚</li>
<li>shallowEqual æ˜¯å¦‚ä½•æµ…æ¯”è¾ƒçš„å‘¢ï¼Œç”±äºæˆ‘ä¸æƒ³åœ¨ç« èŠ‚ä¸­å†™è¿‡å¤šçš„æºç ï¼Œæˆ‘åœ¨è¿™é‡Œå°±ç›´æ¥æè¿°è¿‡ç¨‹äº†ã€‚</li>
</ul>
<p>shallowEqual æµ…æ¯”è¾ƒæµç¨‹ï¼š</p>
<ul>
<li>ç¬¬ä¸€æ­¥ï¼Œé¦–å…ˆä¼šç›´æ¥æ¯”è¾ƒæ–°è€ props æˆ–è€…æ–°è€ state æ˜¯å¦ç›¸ç­‰ã€‚å¦‚æœç›¸ç­‰é‚£ä¹ˆä¸æ›´æ–°ç»„ä»¶ã€‚</li>
<li>ç¬¬äºŒæ­¥ï¼Œåˆ¤æ–­æ–°è€ state æˆ–è€… props ï¼Œæœ‰ä¸æ˜¯å¯¹è±¡æˆ–è€…ä¸º null çš„ï¼Œé‚£ä¹ˆç›´æ¥è¿”å› false ï¼Œæ›´æ–°ç»„ä»¶ã€‚</li>
<li>ç¬¬ä¸‰æ­¥ï¼Œé€šè¿‡ Object.keys å°†æ–°è€ props æˆ–è€…æ–°è€ state çš„å±æ€§å key å˜æˆæ•°ç»„ï¼Œåˆ¤æ–­æ•°ç»„çš„é•¿åº¦æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœä¸ç›¸ç­‰ï¼Œè¯æ˜æœ‰å±æ€§å¢åŠ æˆ–è€…å‡å°‘ï¼Œé‚£ä¹ˆæ›´æ–°ç»„ä»¶ã€‚</li>
<li>ç¬¬å››æ­¥ï¼Œéå†è€ props æˆ–è€…è€ state ï¼Œåˆ¤æ–­å¯¹åº”çš„æ–° props æˆ–æ–° state ï¼Œæœ‰æ²¡æœ‰ä¸ä¹‹å¯¹åº”å¹¶ä¸”ç›¸ç­‰çš„ï¼ˆè¿™ä¸ªç›¸ç­‰æ˜¯æµ…æ¯”è¾ƒï¼‰ï¼Œå¦‚æœæœ‰ä¸€ä¸ªä¸å¯¹åº”æˆ–è€…ä¸ç›¸ç­‰ï¼Œé‚£ä¹ˆç›´æ¥è¿”å› false ï¼Œæ›´æ–°ç»„ä»¶ã€‚</li>
</ul>
<p>åˆ°æ­¤ä¸ºæ­¢ï¼Œæµ…æ¯”è¾ƒæµç¨‹ç»“æŸï¼Œ PureComponent å°±æ˜¯è¿™ä¹ˆåšæ¸²æŸ“èŠ‚æµä¼˜åŒ–çš„ã€‚</p>
<p><strong>PureComponentæ³¨æ„äº‹é¡¹</strong></p>
<p>PureComponent å¯ä»¥è®©ç»„ä»¶è‡ªå‘çš„åšä¸€å±‚æ€§èƒ½ä¸Šçš„è°ƒä¼˜ï¼Œä½†æ˜¯ï¼Œçˆ¶ç»„ä»¶ç»™æ˜¯ PureComponent çš„å­ç»„ä»¶ç»‘å®šäº‹ä»¶è¦æ ¼å¤–å°å¿ƒï¼Œé¿å…ä¸¤ç§æƒ…å†µå‘ç”Ÿï¼š</p>
<p>1 é¿å…ä½¿ç”¨ç®­å¤´å‡½æ•°ã€‚ä¸è¦ç»™æ˜¯ PureComponent å­ç»„ä»¶ç»‘å®šç®­å¤´å‡½æ•°ï¼Œå› ä¸ºçˆ¶ç»„ä»¶æ¯ä¸€æ¬¡ render ï¼Œå¦‚æœæ˜¯ç®­å¤´å‡½æ•°ç»‘å®šçš„è¯ï¼Œéƒ½ä¼šé‡æ–°ç”Ÿæˆä¸€ä¸ªæ–°çš„ç®­å¤´å‡½æ•°ï¼Œ PureComponent å¯¹æ¯”æ–°è€ props æ—¶å€™ï¼Œå› ä¸ºæ˜¯æ–°çš„å‡½æ•°ï¼Œæ‰€ä»¥ä¼šåˆ¤æ–­ä¸æƒ³ç­‰ï¼Œè€Œè®©ç»„ä»¶ç›´æ¥æ¸²æŸ“ï¼ŒPureComponent ä½œç”¨ç»ˆä¼šå¤±æ•ˆã€‚</p>
<pre><code class="hljs language-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Index</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">PureComponent</span></span>{}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Father</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span></span>{
    render=<span class="hljs-function">()=></span> <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">Index</span> <span class="hljs-attr">callback</span>=<span class="hljs-string">{()</span>=></span>{}}   /></span>
}
</code></pre>
<p>2 PureComponent çš„çˆ¶ç»„ä»¶æ˜¯å‡½æ•°ç»„ä»¶çš„æƒ…å†µï¼Œç»‘å®šå‡½æ•°è¦ç”¨ useCallback æˆ–è€… useMemo å¤„ç†ã€‚è¿™ç§æƒ…å†µè¿˜æ˜¯å¾ˆå®¹æ˜“å‘ç”Ÿçš„ï¼Œå°±æ˜¯åœ¨ç”¨ class + function  ç»„ä»¶å¼€å‘é¡¹ç›®çš„æ—¶å€™ï¼Œå¦‚æœçˆ¶ç»„ä»¶æ˜¯å‡½æ•°ï¼Œå­ç»„ä»¶æ˜¯ PureComponent ï¼Œé‚£ä¹ˆç»‘å®šå‡½æ•°è¦å°å¿ƒï¼Œå› ä¸ºå‡½æ•°ç»„ä»¶æ¯ä¸€æ¬¡æ‰§è¡Œï¼Œå¦‚æœä¸å¤„ç†ï¼Œè¿˜ä¼šå£°æ˜ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œæ‰€ä»¥ PureComponent å¯¹æ¯”åŒæ ·ä¼šå¤±æ•ˆï¼Œå¦‚ä¸‹æƒ…å†µï¼š</p>
<pre><code class="hljs language-js">
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Index</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">PureComponent</span></span>{}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">const</span> callback = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handerCallback</span>(<span class="hljs-params"></span>)</span>{} <span class="hljs-comment">/* æ¯ä¸€æ¬¡å‡½æ•°ç»„ä»¶æ‰§è¡Œé‡æ–°å£°æ˜ä¸€ä¸ªæ–°çš„callbackï¼ŒPureComponentæµ…æ¯”è¾ƒä¼šè®¤ä¸ºä¸æƒ³ç­‰ï¼Œä¿ƒä½¿ç»„ä»¶æ›´æ–°  */</span>
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">Index</span> <span class="hljs-attr">callback</span>=<span class="hljs-string">{callback}</span>  /></span></span>
}
</code></pre>
<p>ç»¼ä¸Šå¯ä»¥ç”¨ useCallback æˆ–è€… useMemo è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒuseCallback é¦–é€‰ï¼Œè¿™ä¸ª hooks åˆè¡·å°±æ˜¯ä¸ºäº†è§£å†³è¿™ç§æƒ…å†µçš„ã€‚</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">const</span> callback = React.useCallback(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handerCallback</span>(<span class="hljs-params"></span>)</span>{},[])
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">Index</span> <span class="hljs-attr">callback</span>=<span class="hljs-string">{callback}</span>  /></span></span>
}
</code></pre>
<p>useCallback æ¥å—äºŒä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯éœ€è¦ç¼“å­˜çš„å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºdeps, deps ä¸­ä¾èµ–é¡¹æ”¹å˜è¿”å›æ–°çš„å‡½æ•°ã€‚å¦‚ä¸Šå¤„ç†ä¹‹åï¼Œå°±èƒ½ä»æ ¹æœ¬ä¸Šè§£å†³ PureComponent å¤±æ•ˆé—®é¢˜ã€‚</p>
<p><strong>ï½œ--------é—®ä¸ç­”---------ï½œ</strong><br></p>
<p><code>useCallback</code> å’Œ <code>useMemo</code> æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p>
<p>ç­”ï¼šuseCallback ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯ç¼“å­˜çš„å†…å®¹ï¼ŒuseMemo éœ€è¦æ‰§è¡Œç¬¬ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›å€¼ä¸ºç¼“å­˜çš„å†…å®¹ï¼Œæ¯”èµ· useCallback ï¼Œ useMemo æ›´åƒæ˜¯ç¼“å­˜äº†ä¸€æ®µé€»è¾‘ï¼Œæˆ–è€…è¯´æ‰§è¡Œè¿™æ®µé€»è¾‘è·å–çš„ç»“æœã€‚é‚£ä¹ˆå¯¹äºç¼“å­˜ element ç”¨ useCallback å¯ä»¥å—ï¼Œç­”æ¡ˆæ˜¯å½“ç„¶å¯ä»¥äº†ã€‚</p>
<p><strong>ï½œ----------------------ï½œ</strong><br></p>
<h3>3 shouldComponentUpdate</h3>
<p>æœ‰çš„æ—¶å€™ï¼ŒæŠŠæ§åˆ¶æ¸²æŸ“ï¼Œæ€§èƒ½è°ƒä¼˜äº¤ç»™ React ç»„ä»¶æœ¬èº«å¤„ç†æ˜¾ç„¶æ˜¯é ä¸ä½çš„ï¼ŒReact éœ€è¦æä¾›ç»™ä½¿ç”¨è€…ä¸€ç§æ›´çµæ´»é…ç½®çš„è‡ªå®šä¹‰æ¸²æŸ“æ–¹æ¡ˆï¼Œä½¿ç”¨è€…å¯ä»¥è‡ªå·±å†³å®šæ˜¯å¦æ›´æ–°å½“å‰ç»„ä»¶ï¼ŒshouldComponentUpdate å°±èƒ½è¾¾åˆ°è¿™ç§æ•ˆæœã€‚åœ¨ç”Ÿå‘½å‘¨æœŸç« èŠ‚ä»‹ç»äº† shouldComponentUpdate çš„ç”¨æ³•ï¼Œæ¥ä¸‹æ¥è¯•ä¸€ä¸‹ shouldComponentUpdate å¦‚ä½•ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Index</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span></span>{ <span class="hljs-comment">//å­ç»„ä»¶</span>
    state={
        <span class="hljs-attr">stateNumA</span>:<span class="hljs-number">0</span>,
        <span class="hljs-attr">stateNumB</span>:<span class="hljs-number">0</span>
    }
    <span class="hljs-function"><span class="hljs-title">shouldComponentUpdate</span>(<span class="hljs-params">newProp,newState,newContext</span>)</span>{
        <span class="hljs-keyword">if</span>(newProp.propsNumA !== <span class="hljs-built_in">this</span>.props.propsNumA || newState.stateNumA !== <span class="hljs-built_in">this</span>.state.stateNumA ){
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span> <span class="hljs-comment">/* åªæœ‰å½“ props ä¸­ propsNumA å’Œ state ä¸­ stateNumA å˜åŒ–æ—¶ï¼Œæ›´æ–°ç»„ä»¶  */</span>
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> 
    }
    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'ç»„ä»¶æ¸²æŸ“'</span>)
        <span class="hljs-keyword">const</span> { stateNumA ,stateNumB } = <span class="hljs-built_in">this</span>.state
        <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>
            <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{</span> ()=></span> this.setState({ stateNumA: stateNumA + 1 }) } >æ”¹å˜stateä¸­numA<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
            <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{</span> ()=></span> this.setState({ stateNumB: stateNumB + 1 }) } >æ”¹å˜stataä¸­numB<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
            <span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>hello,let us learn React!<span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>
        <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>
    }
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Home</span>(<span class="hljs-params"></span>)</span>{ <span class="hljs-comment">// çˆ¶ç»„ä»¶</span>
    <span class="hljs-keyword">const</span> [ numberA , setNumberA ] = React.useState(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">const</span> [ numberB , setNumberB ] = React.useState(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{</span> ()=></span> setNumberA(numberA + 1) } >æ”¹å˜propsä¸­numA<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{</span> ()=></span> setNumberB(numberB + 1) } >æ”¹å˜propsä¸­numB<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">Index</span> <span class="hljs-attr">propsNumA</span>=<span class="hljs-string">{numberA}</span>  <span class="hljs-attr">propsNumB</span>=<span class="hljs-string">{numberB}</span>   /></span>
    <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>
}
</code></pre>
<p><strong>æ•ˆæœ</strong></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1be67563c9ba4e3487b8209664439491~tplv-k3u1fbpfcp-watermark.image" alt="4.gif"></p>
<p>shouldComponentUpdate å¯ä»¥æ ¹æ®ä¼ å…¥çš„æ–°çš„ props å’Œ state ï¼Œæˆ–è€…  newContext æ¥ç¡®å®šæ˜¯å¦æ›´æ–°ç»„ä»¶ï¼Œå¦‚ä¸Šé¢ä¾‹å­ğŸŒ°ï¼Œåªæœ‰å½“ props ä¸­ propsNumA å±æ€§å’Œ state ä¸­ stateNumA æ”¹å˜çš„æ—¶å€™ï¼Œç»„ä»¶æ‰æ¸²æŸ“ã€‚ä½†æ˜¯æœ‰ä¸€ç§æƒ…å†µå°±æ˜¯å¦‚æœå­ç»„ä»¶çš„ props æ˜¯å¼•ç”¨æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚ object ï¼Œè¿˜æ˜¯ä¸èƒ½ç›´è§‚æ¯”è¾ƒæ˜¯å¦ç›¸ç­‰ã€‚é‚£ä¹ˆå¦‚æœæƒ³æœ‰å¯¹æ¯”æ–°è€å±æ€§ç›¸ç­‰ï¼Œæ€ä¹ˆå¯¹æ¯”å‘¢ï¼Œè€Œä¸”å¾ˆå¤šæƒ…å†µä¸‹ï¼Œç»„ä»¶ä¸­æ•°æ®å¯èƒ½æ¥æºäºæœåŠ¡ç«¯äº¤äº’ï¼Œå¯¹äºå±æ€§ç»“æ„æ˜¯æœªçŸ¥çš„ã€‚</p>
<p><code>immutable.js</code> å¯ä»¥è§£å†³æ­¤é—®é¢˜ï¼Œimmutable.js ä¸å¯å˜çš„çŠ¶æ€ï¼Œå¯¹ Immutable å¯¹è±¡çš„ä»»ä½•ä¿®æ”¹æˆ–æ·»åŠ åˆ é™¤æ“ä½œéƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ Immutable å¯¹è±¡ã€‚é‰´äºè¿™ä¸ªåŠŸèƒ½ï¼Œæ‰€ä»¥å¯ä»¥æŠŠéœ€è¦å¯¹æ¯”çš„ props æˆ–è€… state æ•°æ®å˜æˆ Immutable å¯¹è±¡ï¼Œé€šè¿‡å¯¹æ¯” Immutable æ˜¯å¦ç›¸ç­‰ï¼Œæ¥è¯æ˜çŠ¶æ€æ˜¯å¦æ”¹å˜ï¼Œä»è€Œç¡®å®šæ˜¯å¦æ›´æ–°ç»„ä»¶ã€‚</p>
<p>å¯¹äº shouldComponentUpdate ç”Ÿå‘½å‘¨æœŸç¯‡ç« å’Œä¸Šé¢éƒ½æœ‰æåŠï¼Œå®ƒçš„æ‰§è¡Œæ˜¯åœ¨ checkShouldComponentUpdateï¼Œä¼šæ‰§è¡Œæ­¤ç”Ÿå‘½å‘¨æœŸã€‚</p>
<h3>4 React.memo</h3>
<pre><code class="hljs language-js">React.memo(Component,compare)
</code></pre>
<p>React.memo å¯ä½œä¸ºä¸€ç§å®¹å™¨åŒ–çš„æ§åˆ¶æ¸²æŸ“æ–¹æ¡ˆï¼Œå¯ä»¥å¯¹æ¯” props å˜åŒ–ï¼Œæ¥å†³å®šæ˜¯å¦æ¸²æŸ“ç»„ä»¶ï¼Œé¦–å…ˆå…ˆæ¥çœ‹ä¸€ä¸‹ memo çš„åŸºæœ¬ç”¨æ³•ã€‚React.memo æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•° Component åŸå§‹ç»„ä»¶æœ¬èº«ï¼Œç¬¬äºŒä¸ªå‚æ•° compare æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥æ ¹æ®ä¸€æ¬¡æ›´æ–°ä¸­ props æ˜¯å¦ç›¸åŒå†³å®šåŸå§‹ç»„ä»¶æ˜¯å¦é‡æ–°æ¸²æŸ“ã€‚</p>
<p>memoçš„å‡ ä¸ªç‰¹ç‚¹æ˜¯ï¼š</p>
<ul>
<li>React.memo: ç¬¬äºŒä¸ªå‚æ•° è¿”å› true ç»„ä»¶ä¸æ¸²æŸ“ ï¼Œ è¿”å› false ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚å’Œ shouldComponentUpdate ç›¸åï¼ŒshouldComponentUpdate : è¿”å› true ç»„ä»¶æ¸²æŸ“ ï¼Œ è¿”å› false ç»„ä»¶ä¸æ¸²æŸ“ã€‚</li>
<li>memo å½“äºŒä¸ªå‚æ•° compare ä¸å­˜åœ¨æ—¶ï¼Œä¼šç”¨<strong>æµ…æ¯”è¾ƒåŸåˆ™</strong>å¤„ç† props ï¼Œç›¸å½“äºä»…æ¯”è¾ƒ props ç‰ˆæœ¬çš„ pureComponent ã€‚</li>
<li>memo åŒæ ·é€‚åˆç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶ã€‚</li>
</ul>
<p>è¢« memo åŒ…è£¹çš„ç»„ä»¶ï¼Œelement ä¼šè¢«æ‰“æˆ <code>REACT_MEMO_TYPE</code> ç±»å‹çš„ element æ ‡ç­¾ï¼Œåœ¨ element å˜æˆ fiber çš„æ—¶å€™ï¼Œ fiber ä¼šè¢«æ ‡è®°æˆ MemoComponent çš„ç±»å‹ã€‚</p>
<blockquote>
<p>react/src/ReactMemo.js</p>
</blockquote>
<pre><code class="hljs language-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">memo</span>(<span class="hljs-params">type,compare</span>)</span>{
  <span class="hljs-keyword">const</span> elementType = {
    <span class="hljs-attr">$$typeof</span>: REACT_MEMO_TYPE, 
    type,  <span class="hljs-comment">// æˆ‘ä»¬çš„ç»„ä»¶</span>
    <span class="hljs-attr">compare</span>: compare === <span class="hljs-literal">undefined</span> ? <span class="hljs-literal">null</span> : compare,  <span class="hljs-comment">//ç¬¬äºŒä¸ªå‚æ•°ï¼Œä¸€ä¸ªå‡½æ•°ç”¨äºåˆ¤æ–­propï¼Œæ§åˆ¶æ›´æ–°æ–¹å‘ã€‚</span>
  };
  <span class="hljs-keyword">return</span> elementType
}
</code></pre>
<blockquote>
<p>react-reconciler/src/ReactFiber.js</p>
</blockquote>
<pre><code class="hljs language-js">  <span class="hljs-keyword">case</span> REACT_MEMO_TYPE:
  fiberTag = MemoComponent;
</code></pre>
<p>é‚£ä¹ˆå¯¹äº MemoComponent React å†…éƒ¨åˆæ˜¯å¦‚ä½•å¤„ç†çš„å‘¢ï¼Ÿé¦–å…ˆ React å¯¹ MemoComponent ç±»å‹çš„ fiber æœ‰å•ç‹¬çš„æ›´æ–°å¤„ç†é€»è¾‘ updateMemoComponent ã€‚é¦–å…ˆä¸€èµ·çœ‹ä¸€ä¸‹ä¸»è¦é€»è¾‘ï¼š</p>
<blockquote>
<p>react-reconciler/src/ReactFiberBeginWork.js</p>
</blockquote>
<pre><code class="hljs language-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateMemoComponent</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">if</span> (updateExpirationTime &#x3C; renderExpirationTime) {
         <span class="hljs-keyword">let</span> compare = Component.compare;
         compare = compare !== <span class="hljs-literal">null</span> ? compare : shallowEqual <span class="hljs-comment">//å¦‚æœ memo æœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œåˆ™ç”¨äºŒä¸ªå‚æ•°åˆ¤å®šï¼Œæ²¡æœ‰åˆ™æµ…æ¯”è¾ƒpropsæ˜¯å¦ç›¸ç­‰ã€‚</span>
        <span class="hljs-keyword">if</span> (compare(prevProps, nextProps) &#x26;&#x26; current.ref === workInProgress.ref) {
            <span class="hljs-keyword">return</span> bailoutOnAlreadyFinishedWork(current,workInProgress,renderExpirationTime); <span class="hljs-comment">//å·²ç»å®Œæˆå·¥ä½œåœæ­¢å‘ä¸‹è°ƒå’ŒèŠ‚ç‚¹ã€‚</span>
        }
    }
    <span class="hljs-comment">// è¿”å›å°†è¦æ›´æ–°ç»„ä»¶,memoåŒ…è£…çš„ç»„ä»¶å¯¹åº”çš„fiberï¼Œç»§ç»­å‘ä¸‹è°ƒå’Œæ›´æ–°ã€‚</span>
}
</code></pre>
<p>memo ä¸»è¦é€»è¾‘æ˜¯</p>
<ul>
<li>é€šè¿‡ memo ç¬¬äºŒä¸ªå‚æ•°ï¼Œåˆ¤æ–­æ˜¯å¦æ‰§è¡Œæ›´æ–°ï¼Œå¦‚æœæ²¡æœ‰é‚£ä¹ˆç¬¬äºŒä¸ªå‚æ•°ï¼Œé‚£ä¹ˆä»¥æµ…æ¯”è¾ƒ props ä¸º diff è§„åˆ™ã€‚å¦‚æœç›¸ç­‰ï¼Œå½“å‰ fiber å®Œæˆå·¥ä½œï¼Œåœæ­¢å‘ä¸‹è°ƒå’ŒèŠ‚ç‚¹ï¼Œæ‰€ä»¥è¢«åŒ…è£¹çš„ç»„ä»¶å³å°†ä¸æ›´æ–°ã€‚</li>
<li>memo å¯ä»¥ç†è§£ä¸ºåŒ…äº†ä¸€å±‚çš„é«˜é˜¶ç»„ä»¶ï¼Œå®ƒçš„é˜»æ–­æ›´æ–°æœºåˆ¶ï¼Œæ˜¯é€šè¿‡æ§åˆ¶ä¸‹ä¸€çº§ children ï¼Œä¹Ÿå°±æ˜¯ memo åŒ…è£…çš„ç»„ä»¶ï¼Œæ˜¯å¦ç»§ç»­è°ƒå’Œæ¸²æŸ“ï¼Œæ¥è¾¾åˆ°ç›®çš„çš„ã€‚</li>
</ul>
<p>æ¥ä¸‹æ¥åšä¸€ä¸ªå°æ¡ˆä¾‹ï¼Œåˆ©ç”¨ memo åšåˆ°è‡ªå®šä¹‰ props æ¸²æŸ“ã€‚
è§„åˆ™ï¼š æ§åˆ¶ props ä¸­çš„ number ã€‚</p>
<ul>
<li>1 åªæœ‰ number æ›´æ”¹ï¼Œç»„ä»¶æ¸²æŸ“ã€‚</li>
<li>2 åªæœ‰ number å°äº 5 ï¼Œç»„ä»¶æ¸²æŸ“ã€‚</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">TextMemo</span>(<span class="hljs-params">props</span>)</span>{ / /å­ç»„ä»¶
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'å­ç»„ä»¶æ¸²æŸ“'</span>)
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>hello,world<span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span> 
}
<span class="hljs-keyword">const</span> controlIsRender = <span class="hljs-function">(<span class="hljs-params">pre,next</span>)=></span>{
   <span class="hljs-keyword">return</span> ( pre.number === next.number ) ||  (pre.number !== next.number &#x26;&#x26; next.number > <span class="hljs-number">5</span>) <span class="hljs-comment">// numberä¸æ”¹å˜æˆ–number æ”¹å˜ä½†å€¼å¤§äº5->ä¸æ¸²æŸ“ç»„ä»¶ | å¦åˆ™æ¸²æŸ“ç»„ä»¶</span>
}
<span class="hljs-keyword">const</span> NewTexMemo = memo(TextMemo,controlIsRender)
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Index</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span></span>{
    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">props</span>)</span>{
        <span class="hljs-built_in">super</span>(props)
        <span class="hljs-built_in">this</span>.state={
            <span class="hljs-attr">number</span>:<span class="hljs-number">1</span>,
            <span class="hljs-attr">num</span>:<span class="hljs-number">1</span>
        }
    }
    <span class="hljs-function"><span class="hljs-title">render</span>(<span class="hljs-params"></span>)</span>{
        <span class="hljs-keyword">const</span> { num , number }  = <span class="hljs-built_in">this</span>.state
        <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>
            <span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>
                æ”¹å˜numï¼šå½“å‰å€¼ { num }  
                <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{</span> ()=></span>this.setState({ num:num + 1 }) } >num++<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
                <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{</span> ()=></span>this.setState({ num:num - 1 }) } >num--<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>  
            <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>
            <span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>
                æ”¹å˜numberï¼š å½“å‰å€¼ { number } 
                <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{</span> ()=></span>this.setState({ number:number + 1 }) } > number ++<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
                <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{</span> ()=></span>this.setState({ number:number - 1 }) } > number -- <span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>  
            <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>
            <span class="hljs-tag">&#x3C;<span class="hljs-name">NewTexMemo</span> <span class="hljs-attr">num</span>=<span class="hljs-string">{</span> <span class="hljs-attr">num</span> } <span class="hljs-attr">number</span>=<span class="hljs-string">{number}</span>  /></span>
        <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>
    }
}
</code></pre>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/823787ff6ac5492c9da013b1acb4dfbc~tplv-k3u1fbpfcp-watermark.image" alt="memo.gif"></p>
<p><strong>å®Œç¾è¾¾åˆ°æ•ˆæœ</strong></p>
<p>memo æ³¨æ„äº‹é¡¹ï¼Œåƒå¦‚ä¸‹è¿™æ ·ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸è¦è¯•å›¾ç»„ä»¶é€šè¿‡ç¬¬äºŒä¸ªå‚æ•°ç›´æ¥è¿”å› true æ¥é˜»æ–­æ¸²æŸ“ã€‚è¿™æ ·å¯èƒ½ä¼šé€ æˆå¾ˆå¤šéº»çƒ¦ã€‚</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// å°½é‡ä¸è¦è¿™ä¹ˆå°è¯•</span>
<span class="hljs-keyword">const</span> NewIndex = React.memo(Index,<span class="hljs-function">() =></span> <span class="hljs-literal">true</span> )
</code></pre>
<h3>5 æ‰“ç ´æ¸²æŸ“é™åˆ¶</h3>
<ul>
<li>
<p>1 forceUpdateã€‚ç±»ç»„ä»¶æ›´æ–°å¦‚æœè°ƒç”¨çš„æ˜¯ forceUpdate è€Œä¸æ˜¯  setState ï¼Œä¼šè·³è¿‡ PureComponent çš„æµ…æ¯”è¾ƒå’Œ shouldComponentUpdate è‡ªå®šä¹‰æ¯”è¾ƒã€‚å…¶åŸç†æ˜¯ç»„ä»¶ä¸­è°ƒç”¨ forceUpdate æ—¶å€™ï¼Œå…¨å±€ä¼šå¼€å¯ä¸€ä¸ª hasForceUpdate çš„å¼€å…³ã€‚å½“ç»„ä»¶æ›´æ–°çš„æ—¶å€™ï¼Œæ£€æŸ¥è¿™ä¸ªå¼€å…³æ˜¯å¦æ‰“å¼€ï¼Œå¦‚æœæ‰“å¼€ï¼Œå°±ç›´æ¥è·³è¿‡ shouldUpdate ã€‚</p>
</li>
<li>
<p>2 contextç©¿é€ï¼Œä¸Šè¿°çš„å‡ ç§æ–¹å¼ï¼Œéƒ½ä¸èƒ½æœ¬è´¨ä¸Šé˜»æ–­ context æ”¹å˜ï¼Œè€Œå¸¦æ¥çš„æ¸²æŸ“ç©¿é€ï¼Œæ‰€ä»¥å¼€å‘è€…åœ¨ä½¿ç”¨ Context è¦æ ¼å¤–å°å¿ƒï¼Œæ—¢ç„¶é€‰æ‹©äº†æ¶ˆè´¹ context ï¼Œå°±è¦æ‰¿æ‹… context æ”¹å˜ï¼Œå¸¦æ¥çš„æ›´æ–°ä½œç”¨ã€‚</p>
</li>
</ul>
<h3>6 æ¸²æŸ“æ§åˆ¶æµç¨‹å›¾</h3>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3df03000a39549bead3c84750c62576c~tplv-k3u1fbpfcp-watermark.image" alt="5.jpg"></p>
<h2>å›› å¯¹äºrenderçš„æ€è€ƒ</h2>
<h3>1 æœ‰æ²¡æœ‰å¿…è¦åœ¨ä¹ç»„ä»¶ä¸å¿…è¦æ¸²æŸ“ã€‚</h3>
<p>åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ— é¡»è¿‡åˆ†åœ¨ä¹ React æ²¡æœ‰å¿…è¦çš„æ¸²æŸ“ï¼Œè¦ç†è§£æ‰§è¡Œ render ä¸ç­‰äºçœŸæ­£çš„æµè§ˆå™¨æ¸²æŸ“è§†å›¾ï¼Œrender é˜¶æ®µæ‰§è¡Œæ˜¯åœ¨ js å½“ä¸­ï¼Œjs ä¸­è¿è¡Œä»£ç è¿œå¿«äºæµè§ˆå™¨çš„ Rendering å’Œ Painting çš„ï¼Œæ›´ä½•å†µ React è¿˜æä¾›äº† diff ç®—æ³•ç­‰æ‰‹æ®µï¼Œå»å¤ç”¨çœŸå® DOM ã€‚</p>
<h3>2 ä»€ä¹ˆæ—¶å€™éœ€è¦æ³¨æ„æ¸²æŸ“èŠ‚æµã€‚</h3>
<p>ä½†æ˜¯å¯¹äºä»¥ä¸‹æƒ…å†µï¼Œå€¼å¾—å¼€å‘è€…æ³¨æ„ï¼Œéœ€è¦é‡‡ç”¨æ¸²æŸ“èŠ‚æµï¼š</p>
<ul>
<li>
<p>ç¬¬ä¸€ç§æƒ…å†µæ•°æ®å¯è§†åŒ–çš„æ¨¡å—ç»„ä»¶ï¼ˆå±•ç¤ºäº†å¤§é‡çš„æ•°æ®ï¼‰ï¼Œè¿™ç§æƒ…å†µæ¯”è¾ƒå°å¿ƒå› ä¸ºä¸€æ¬¡æ›´æ–°ï¼Œå¯èƒ½ä¼´éšå¤§é‡çš„ diff ï¼Œæ•°æ®é‡è¶Šå¤§ä¹Ÿå°±è¶Šæµªè´¹æ€§èƒ½ï¼Œæ‰€ä»¥å¯¹äºæ•°æ®å±•ç¤ºæ¨¡å—ç»„ä»¶ï¼Œæœ‰å¿…è¦é‡‡å– memo ï¼Œ shouldComponentUpdate ç­‰æ–¹æ¡ˆæ§åˆ¶è‡ªèº«ç»„ä»¶æ¸²æŸ“ã€‚</p>
</li>
<li>
<p>ç¬¬äºŒç§æƒ…å†µå«æœ‰å¤§é‡è¡¨å•çš„é¡µé¢ï¼ŒReact ä¸€èˆ¬ä¼šé‡‡ç”¨å—æ§ç»„ä»¶çš„æ¨¡å¼å»ç®¡ç†è¡¨å•æ•°æ®å±‚ï¼Œè¡¨å•æ•°æ®å±‚å®Œå…¨æ‰˜ç®¡äº props æˆ–æ˜¯ state ï¼Œè€Œç”¨æˆ·æ“ä½œè¡¨å•å¾€å¾€æ˜¯é¢‘ç¹çš„ï¼Œéœ€è¦é¢‘ç¹æ”¹å˜æ•°æ®å±‚ï¼Œæ‰€ä»¥å¾ˆæœ‰å¯èƒ½è®©æ•´ä¸ªé¡µé¢ç»„ä»¶é«˜é¢‘ç‡ render ã€‚</p>
</li>
<li>
<p>ç¬¬ä¸‰ç§æƒ…å†µå°±æ˜¯è¶Šæ˜¯é è¿‘ app root æ ¹ç»„ä»¶è¶Šå€¼å¾—æ³¨æ„ï¼Œæ ¹ç»„ä»¶æ¸²æŸ“ä¼šæ³¢åŠåˆ°æ•´ä¸ªç»„ä»¶æ ‘é‡æ–° render ï¼Œå­ç»„ä»¶ render ï¼Œä¸€æ˜¯æµªè´¹æ€§èƒ½ï¼ŒäºŒæ˜¯å¯èƒ½æ‰§è¡Œ useEffect ï¼ŒcomponentWillReceiveProps ç­‰é’©å­ï¼Œé€ æˆæ„æƒ³ä¸åˆ°çš„æƒ…å†µå‘ç”Ÿã€‚</p>
</li>
</ul>
<h3>3 ä¸€äº›å¼€å‘ä¸­çš„ç»†èŠ‚é—®é¢˜</h3>
<ul>
<li>å¼€å‘è¿‡ç¨‹ä¸­å¯¹äºå¤§é‡æ•°æ®å±•ç¤ºçš„æ¨¡å—ï¼Œå¼€å‘è€…æœ‰å¿…è¦ç”¨ shouldComponentUpdate ï¼ŒPureComponentæ¥ä¼˜åŒ–æ€§èƒ½ã€‚</li>
<li>å¯¹äºè¡¨å•æ§ä»¶ï¼Œæœ€å¥½åŠæ³•å•ç‹¬æŠ½ç¦»ç»„ä»¶ï¼Œç‹¬è‡ªç®¡ç†è‡ªå·±çš„æ•°æ®å±‚ï¼Œè¿™æ ·å¯ä»¥è®© state æ”¹å˜ï¼Œæ³¢åŠçš„èŒƒå›´æ›´å°ã€‚</li>
<li>å¦‚æœéœ€è¦æ›´ç²¾è‡´åŒ–æ¸²æŸ“ï¼Œå¯ä»¥é…åˆ immutable.js ã€‚</li>
<li>ç»„ä»¶é¢—ç²’åŒ–ï¼Œé…åˆ memo ç­‰ api ï¼Œå¯ä»¥åˆ¶å®šç§æœ‰åŒ–çš„æ¸²æŸ“ç©ºé—´ã€‚</li>
</ul>
<h2>äº” æ€»ç»“</h2>
<p>æœ¬èŠ‚ä¸»è¦è®²äº†ï¼š</p>
<ol>
<li>è¯¦ç»†ä»‹ç»Reactçš„å‡ ç§æ§åˆ¶æ¸²æŸ“ï¼Œä¼˜åŒ–æ¸²æŸ“çš„æ‰‹æ®µåŠå…¶åŸç†ã€‚</li>
<li>å…³äºReactä»€ä¹ˆæƒ…å†µä¸‹é€‚åˆåšæ¸²æŸ“ä¼˜åŒ–ã€‚åŠå…¶å¼€å‘è¿‡ç¨‹ä¸­ä¸€äº›ç»†èŠ‚é—®é¢˜ã€‚</li>
</ol></div>
</body></html>