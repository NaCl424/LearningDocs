<!DOCTYPE html><html lang="en"><head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>第 01 讲：设计一份吸引面试官的简历</title>
<style type="text/css">
:root {
    --control-text-color: #777;
    --select-text-bg-color: rgba(223, 197, 223);  /*#7e66992e;*/
    
    /* side bar */
    --side-bar-bg-color: rgb(255, 255, 255);
    --active-file-text-color: #8163bd;
    --active-file-bg-color: #E9E4F0;
    --item-hover-bg-color: #E9E4F0;
    --active-file-border-color: #8163bd;

    --title-color: #6c549c;
    --font-sans-serif: 'Ubuntu', 'Source Sans Pro', sans-serif !important;
    --font-monospace: 'Fira Code', 'Roboto Mono', monospace !important;
    --purple-1: #8163bd;
    --purple-2: #79589F;
    --purple-3: #fd5eb8;
    --purple-light-1: rgba(99, 99, 172, .05);
    --purple-light-2: rgba(99, 99, 172, .1);
    --purple-light-3: rgba(99, 99, 172, .2);
    --purple-light-4: rgba(129, 99, 189, .3);
    --purple-light-5: #E9E4F0;
    --purple-light-6: rgba(129, 99, 189, .8);
}

/* html {
    font-size: 16px;
} */

body {
    font-family: var(--font-sans-serif);
    color: #34495e;
    -webkit-font-smoothing: antialiased;
    line-height: 1.6rem;
    letter-spacing: 0;
    margin: 0;
    overflow-x: hidden;
}

/* 页边距 和 页面大小 */
#write {
    padding-left: 6ch;
    padding-right: 6ch;
    margin: 0 auto;
}

#write p {
    line-height: 1.6rem;
    word-spacing: .05rem;
}

#write ol li {
    padding-left: 0.5rem;
}

#write > ul:first-child,
#write > ol:first-child {
    margin-top: 30px;
}

body > *:first-child {
    margin-top: 0 !important;
}

body > *:last-child {
    margin-bottom: 0 !important;
}

a {
    color: var(--purple-1);
    padding: 0 2px;
    text-decoration: none;
}
.md-content {
    color: var(--purple-light-6);
}
#write a {
    border-bottom: 1px solid var(--purple-1);
    color: var(--purple-1);
    text-decoration: none;
}

h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 0.5rem;
    /* font-weight: bold; */
    font-weight: 500 !important;
    line-height: 1.4;
    cursor: text;
    color: var(--title-color);
    font-family: var(--font-sans-serif);
}

h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}

h1 tt,
h1 code {
    font-size: inherit !important;
}
h2 tt,
h2 code {
    font-size: inherit !important;
}
h3 tt,
h3 code {
    font-size: inherit !important;
}
h4 tt,
h4 code {
    font-size: inherit !important;
}
h5 tt,
h5 code {
    font-size: inherit !important;
}
h6 tt,
h6 code {
    font-size: inherit !important;
}


h1 {
    padding-bottom: .4rem;
    font-size: 2.2rem;
    line-height: 1.3;
}
h1 {
    text-align: center;
    padding-bottom: 0.3em;
    font-size: 2.2em;
    line-height: 1.2;
    margin: 2.4em auto 1.2em;
}
h1:after {
    content: '';
    display: block;
    margin: 0.2em auto 0;
    width: 100px;
    height: 2px;
    border-bottom: 2px solid var(--title-color);
}

h2 {
    margin: 1.6em auto 0.5em;
    padding-left: 10px;
    line-height: 1.4;
    font-size: 1.8em;
    border-left: 9px solid var(--title-color);
    border-bottom: 1px solid var(--title-color);
}
h3 {
    font-size: 1.5rem;
    margin: 1.2em auto 0.5em;
}
h4 {
    font-size: 1.3rem;
}
h5 {
    font-size: 1.2rem;
}
h6 {
    font-size: 1.1rem;
}

p,
blockquote,
ul,
ol,
dl,
table {
    margin: 0.8em 0;
}

li > ol,
li > ul {
    margin: 0 0;
}

hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

body > h2:first-child {
    margin-top: 0;
    padding-top: 0;
}

body > h1:first-child {
    margin-top: 0;
    padding-top: 0;
}

body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0;
}

body > h3:first-child,
body > h4:first-child,
body > h5:first-child,
body > h6:first-child {
    margin-top: 0;
    padding-top: 0;
}

a:first-child h1,
a:first-child h2,
a:first-child h3,
a:first-child h4,
a:first-child h5,
a:first-child h6 {
    margin-top: 0;
    padding-top: 0;
}

h1 p,
h2 p,
h3 p,
h4 p,
h5 p,
h6 p {
    margin-top: 0;
}

li p.first {
    display: inline-block;
}

ul,
ol {
    padding-left: 30px;
}

ul:first-child,
ol:first-child {
    margin-top: 0;
}

ul:last-child,
ol:last-child {
    margin-bottom: 0;
}

/* 引用 */
blockquote {
    /* margin-left: 1rem; */
    border-left: 4px solid var(--purple-light-4);
    padding: 10px 15px;
    color: #777;
    background-color: var(--purple-light-1);
}

/* 表格 */
table {
    padding: 0;
    word-break: initial;
}

table tr {
    border-top: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}

/* 表格 背景色 */
table tr:nth-child(2n),
thead {
    background-color: var(--purple-light-1);
}
#write table thead th {
    background-color: var(--purple-light-2);
}

table tr th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}

table tr td {
    border: 1px solid #dfe2e5;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}

table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}

table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}

/* 粗体 */
#write strong {
    padding: 0 2px;
    color: var(--purple-1);
}

/* 斜体 */
#write em {
    padding: 0 5px 0 2px;
    /* font-style: normal; */
    color: #42b983;
}

/* inline code */
#write code, tt {
    padding: 2px 4px;
    border-radius: 2px;
    font-family: var(--font-monospace);
    font-size: 0.92rem;
    color: var(--purple-3); 
    background-color: rgba(99, 99, 172, .05);
}

tt {
    margin: 0 2px;
}

#write .md-footnote {
    background-color: #f8f8f8;
    color: var(--purple-3);
}

/* heighlight. */
#write mark {
    background-color: #fbd3ea;
    border-radius: 2px;
    padding: 2px 4px;
    margin: 0 2px;
}

#write del {
    padding: 1px 2px;
}

.md-task-list-item > input {
    margin-left: -1.3em;
}

@media print {
    html {
        font-size: 0.9rem;
    }

    table,
    pre {
        page-break-inside: avoid;
    }

    pre {
        word-wrap: break-word;
    }
}

#write pre.md-meta-block {
    padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block > .code-tooltip {
    bottom: .375rem;
}

/* 图片 */
.md-image > .md-meta {
    border-radius: 3px;
    font-family: var(--font-monospace);
    padding: 2px 0 0 4px;
    font-size: 0.9em;
    color: inherit;
}
p .md-image:only-child{
    width: auto;
    text-align: left;
    margin-left: 2rem;
}
.md-tag {
    color: inherit;
}
/* 当 “![shadow-随便写]()”写时，会有阴影 */
.md-image img[alt|='shadow'] {
    /* box-shadow: 0 4px 24px -6px #ddd; */
    box-shadow:var(--purple-light-2) 0px 10px 15px;
}

#write a.md-toc-inner {
    line-height: 1.6;
    white-space: pre-line;
    border-bottom: none;
    font-size: 0.9rem;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

#md-notification:before {
    top: 10px;
}

header,
.context-menu,
.megamenu-content,
footer {
    font-family: var(--font-sans-serif);
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state {
    visibility: visible;
}

.md-lang {
    color: #b4654d;
}

.html-for-mac .context-menu {
    --item-hover-bg-color: #E6F0FE;
}

/* 代码框 */
/* CodeMirror 3024 Day theme */

/* 代码段 背景 */
pre {
    --select-text-bg-color: rgba(223, 197, 223) !important;
    margin: .5em 0;
    padding: 1em 1.4em;
    border-radius: 8px;
    background: #f6f8fa;
    overflow-x: auto;
    box-sizing: border-box;
    font-size: 14px;
}

/* 边框 */
.md-fences {
    border: 1px solid #e7eaed;
    border-radius: 3px;
}

.cm-s-inner {
  padding: .25rem;
  border-radius: .25rem;
}

.cm-s-inner.CodeMirror, .cm-s-inner .CodeMirror-gutters {
  background-color: #f8f8f8 !important;
  color: #3a3432 !important;
  border: none;
}

.cm-s-inner .CodeMirror-gutters {
  color: #6d8a88;
}

.cm-s-inner .CodeMirror-cursor {
  border-left: solid thin #5c5855 !important;
}

.cm-s-inner .CodeMirror-linenumber {
  color: #807d7c;
}

.cm-s-inner .CodeMirror-line::selection, .cm-s-inner .CodeMirror-line::-moz-selection,
.cm-s-inner .CodeMirror-line > span::selection,
.cm-s-inner .CodeMirror-line > span::-moz-selection,
.cm-s-inner .CodeMirror-line > span > span::selection,
.cm-s-inner .CodeMirror-line > span > span::-moz-selection {
  background: var(--purple-light-2);
}

.cm-s-inner span.cm-comment {
  color: #cdab53;
}

.cm-s-inner span.cm-string, .cm-s-inner span.cm-string-2 {
  color: #f2b01d;
}

.cm-s-inner span.cm-number {
  color: #a34e8f;
}

.cm-s-inner span.cm-variable {
  color: #01a252;
}

.cm-s-inner span.cm-variable-2 {
  color: #01a0e4;
}

.cm-s-inner span.cm-def {
  /* color: #e8bbd0; */
  color: #e2287f;
}

.cm-s-inner span.cm-operator {
  color: #ff79c6;
}

.cm-s-inner span.cm-keyword {
  color: #db2d20;
}

.cm-s-inner span.cm-atom {
  color: #a34e8f;
}

.cm-s-inner span.cm-meta {
  color: inherit;
}

.cm-s-inner span.cm-tag {
  color: #db2d20;
}

.cm-s-inner span.cm-attribute {
  color: #01a252;
}

.cm-s-inner span.cm-qualifier {
  color: #388aa3;
}

.cm-s-inner span.cm-property {
  color: #01a252;
}

.cm-s-inner span.cm-builtin {
  color: #388aa3;
}

.cm-s-inner span.cm-variable-3, .cm-s-inner span.cm-type {
  color: #ffb86c;
}

.cm-s-inner span.cm-bracket {
  color: #3a3432;
}

.cm-s-inner span.cm-link {
  color: #a34e8f;
}

.cm-s-inner span.cm-error {
  background: #db2d20;
  color: #5c5855;
}

/* .md-fences.md-focus .cm-s-inner .CodeMirror-activeline-background {
  background: var(--purple-light-2);
} */

.cm-s-inner .CodeMirror-matchingbracket {
  text-decoration: underline;
  color: #a34e8f !important;
}

#fences-auto-suggest .active {
  background: #ddd;
}

#write .code-tooltip {
  bottom: initial;
  top: calc(100% - 1px);
  background: #f7f7f7;
  border: 1px solid #ddd;
  border-top: 0;
}

.auto-suggest-container {
  border-color: #b4b4b4;
}

.auto-suggest-container .autoComplt-hint.active {
  background: #b4b4b4;
  color: inherit;
}

/* task list */
#write .md-task-list-item > input {
  -webkit-appearance: initial;
  display: block;
  position: absolute;
  border: 1px solid #b4b4b4;
  border-radius: .25rem;
  margin-top: .1rem;
  margin-left: -1.8rem;
  height: 1.2rem;
  width: 1.2rem;
  transition: background 0.3s;
}

#write .md-task-list-item > input:focus {
  outline: none;
  box-shadow: none;
}

#write .md-task-list-item > input:hover {
  background: #ddd;
}

#write .md-task-list-item > input[checked]::before {
  content: '';
  position: absolute;
  top: 20%;
  left: 50%;
  height: 60%;
  width: 2px;
  transform: rotate(40deg);
  background: #333;
}

#write .md-task-list-item > input[checked]::after {
  content: '';
  position: absolute;
  top: 46%;
  left: 25%;
  height: 30%;
  width: 2px;
  transform: rotate(-40deg);
  background: #333;
}

#write .md-task-list-item > p {
  transition: color 0.3s, opacity 0.3s;
}

#write .md-task-list-item.task-list-done > p {
  color: #b4b4b4;
  text-decoration: line-through;
}

#write .md-task-list-item.task-list-done > p > .md-emoji {
  opacity: .5;
}

#write .md-task-list-item.task-list-done > p > .md-link > a {
  opacity: .6;
}

/* sidebar and outline */
.pin-outline .outline-active {
  color: var(--active-file-text-color); 
}

.file-list-item {
    border-bottom: 1px solid;
    border-color: var(--purple-light-5);
}

.file-list-item-summary {
    font-weight: 400;
}

.file-list-item.active {
    color: var(--active-file-text-color);
    background-color: var(--purple-light-5);
}

.file-tree-node.active>.file-node-background {
    background-color: var(--purple-light-5);
    font-weight: 700;
} 

.file-tree-node.active>.file-node-content {
    color: var(--active-file-text-color);
    font-weight: 700;
}

.file-node-content {
    color: #5e676d;
}

.sidebar-tabs {
    border-bottom: none;
}
.sidebar-tab.active {
    font-weight: 400;
}

.sidebar-content-content {
    font-size: 0.9rem;
}

img {
    max-width: 100%;
}

body {
    background-color: rgb(237, 237, 237);
}
#content {
    width: 836px;
    padding: 50px;
    background: #fff;
    margin: 0 auto;
}/*# sourceURL=/Users/young/Documents/Codes/Fun/lagou/public/purple.css*/</style><style type="text/css">.hljs{display:block;overflow-x:auto;padding:.5em;color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}/*# sourceURL=/Users/young/Documents/Codes/Fun/lagou/public/atom-one-light.min.css*/</style></head>
<body>
<div id="content"><h1>分析：西方哲学中心的“迁徙之旅”</h1>
<p>本章我们将以地理视角看哲学家，学会使用地理可视化完成 “苏菲的世界中，哲学中心如何变化？” 这个任务。</p>
<h2>任务分析</h2>
<p>我们要分析哲学家的地理位置分布，首先需要找到与“地理”相关的信息，这里刚好有哲学家的所在国家名，我们以哲学家的所在国家作为地理数据，就可以分析“哲学家所在国家分布情况”，然后我们可以利用哲学家的出生日期来分析“哲学中心如何变化”。</p>
<p>大致需要以下几步完成任务</p>
<ul>
<li>拾取全世界各个国家的地理数据</li>
<li>将国家名与拾取到的国家地理进行关联</li>
<li>使用地理数据可视化库 <a href="https://github.com/antvis/L7" target="_blank" rel="nofollow noopener noreferrer">L7</a> &#x26; <a href="https://github.com/antvis/L7Plot" target="_blank" rel="nofollow noopener noreferrer">L7Plot</a> 将数据给可视化出来</li>
<li>获取数据洞察</li>
</ul>
<p>下面按照这几个步骤，实现一个哲学家所在国的区域分布图与哲学中心变化图，并从中获得数据洞察。</p>
<h2>可视分析</h2>
<h3>获取数据</h3>
<p>我们要分析的数据”<a href="https://github.com/sparrow-vis/challenge-2021/blob/main/data/philosophers.json" target="_blank" rel="nofollow noopener noreferrer">哲学家的所在国家</a>”，数据格式如下：</p>









































<table><thead><tr><th align="left">name</th><th>points</th><th>lifespan</th><th>country</th></tr></thead><tbody><tr><td align="left">泰利斯</td><td>"水是万物之源。"</td><td>[-624, -546]</td><td>希腊</td></tr><tr><td align="left">安纳克西曼德</td><td>"形成万物的物质不可能是一定是这些已经被创造出来的物质。"</td><td>[-610, -546]</td><td>希腊</td></tr><tr><td align="left">亚里士多德</td><td>"现实生活中最高层次的事物不是那些我们用理性来探索的事物，而是我们用感官察觉的事物。","事物是由本身的形式与质料和谐一致的事物所构成的，质料总是致力于实现一种内在的可能性。"</td><td>[-384, -322]</td><td>雅典</td></tr><tr><td align="left">苏格拉底</td><td>"我只知道一件事情，就是我一无所知。", "明辨是非的能力就存在于人的理性中，而不存在于社会中。"</td><td>[-470, -399]</td><td>雅典</td></tr><tr><td align="left">普罗汀</td><td>"宇宙间万事万物都是一体的，因为上帝存在于万事万物之中。"</td><td>[-270, -205]</td><td>意大利</td></tr></tbody></table>
<p>接下来拾取全世界各个<a href="https://github.com/sparrow-vis/challenge-2021/blob/geo-map/data/countrys.json" target="_blank" rel="nofollow noopener noreferrer">国家的地理数据</a>，这里使用地理数据共享开源组织 <a href="https://download.geofabrik.de/" target="_blank" rel="nofollow noopener noreferrer">openstreetmap</a> 的数据，为了方便使用采用 GeoJson 格式的地理数据，数据格式如下：</p>
<pre><code class="hljs language-json">{
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"FeatureCollection"</span>,
  <span class="hljs-attr">"features"</span>: [
    {
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Feature"</span>,
      <span class="hljs-attr">"geometry"</span>: {
        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Polygon"</span>,
        <span class="hljs-attr">"coordinates"</span>: [ <span class="hljs-comment">// ... ]</span>
      },
      <span class="hljs-string">"properties"</span>: {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"希腊"</span>,
        <span class="hljs-attr">"centroid"</span>: [<span class="hljs-number">22.989178297364294</span>,<span class="hljs-number">39.04355317366236</span>]
      }
    },
    {
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Feature"</span>,
      <span class="hljs-attr">"geometry"</span>: {
        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Polygon"</span>,
        <span class="hljs-attr">"coordinates"</span>: [ <span class="hljs-comment">// ... ]</span>
      },
      <span class="hljs-string">"properties"</span>: {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"意大利"</span>,
        <span class="hljs-attr">"centroid"</span>: [<span class="hljs-number">12.075174042231398</span>,<span class="hljs-number">42.78877076169903</span>]
      }
    },
  ]
}
</code></pre>
<h3>Sparrow 绘制气泡地图</h3>
<p>有了数据之后，我们首先尝试用 Sparrow 去绘制一个气泡地图。如果在书中出现了该国家的哲学家，那么这个国家会有一个气泡，出现的哲学家数量越多，这个地方的气泡越大。</p>
<p>同样 Sparrow 本身不具备计算地图路径的能力，所以这个地方我们借助 <a href="https://github.com/d3/d3-geo" target="_blank" rel="nofollow noopener noreferrer">d3-geo</a> 去完成我们的可视化。</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d6c35274a9d04dcea366b3483346a6a1~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p>
<pre><code class="hljs language-js">(<span class="hljs-keyword">async</span> () => {
  <span class="hljs-comment">//@see https://observablehq.com/@d3/world-airports?collection=@d3/d3-geo</span>

  <span class="hljs-comment">// 获取数据</span>
  <span class="hljs-keyword">const</span> URLS = [
    <span class="hljs-string">"https://gw.alipayobjects.com/os/bmw-prod/a51018d2-69ef-4e6b-8095-5d4f5815166e.json"</span>,
    <span class="hljs-string">"https://gw.alipayobjects.com/os/bmw-prod/d345d2d7-a35d-4d27-af92-4982b3e6b213.json"</span>,
    <span class="hljs-string">"https://gw.alipayobjects.com/os/bmw-prod/1070dc04-329e-4655-95b0-f1dc094206b1.json"</span>,
  ];
  <span class="hljs-keyword">const</span> [world, people, country] = <span class="hljs-keyword">await</span> <span class="hljs-built_in">Promise</span>.all(
    URLS.map(<span class="hljs-keyword">async</span> (url) => {
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> fetch(url);
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> response.json();
    })
  );

  <span class="hljs-keyword">const</span> projection = d3.geoNaturalEarth1();

  <span class="hljs-comment">// 确定视图大小</span>
  <span class="hljs-keyword">const</span> outline = { <span class="hljs-attr">type</span>: <span class="hljs-string">"Sphere"</span> };
  <span class="hljs-keyword">const</span> width = <span class="hljs-number">800</span>;
  <span class="hljs-keyword">const</span> height = (<span class="hljs-function">() =></span> {
    <span class="hljs-keyword">const</span> [[x0, y0], [x1, y1]] = d3
      .geoPath(projection.fitWidth(width, outline))
      .bounds(outline);
    <span class="hljs-keyword">const</span> dy = <span class="hljs-built_in">Math</span>.ceil(y1 - y0),
      l = <span class="hljs-built_in">Math</span>.min(<span class="hljs-built_in">Math</span>.ceil(x1 - x0), dy);
    projection.scale((projection.scale() * (l - <span class="hljs-number">1</span>)) / l).precision(<span class="hljs-number">0.2</span>);
    <span class="hljs-keyword">return</span> dy;
  })();

  <span class="hljs-comment">// compute paths data</span>
  <span class="hljs-keyword">const</span> path = d3.geoPath(projection);
  <span class="hljs-keyword">const</span> land = topojson.feature(world, world.objects.land);
  <span class="hljs-keyword">const</span> graticule = d3.geoGraticule10();
  <span class="hljs-keyword">const</span> paths = [
    { <span class="hljs-attr">d</span>: path(land), <span class="hljs-attr">fill</span>: <span class="hljs-string">"#ddd"</span>, <span class="hljs-attr">stroke</span>: <span class="hljs-string">"none"</span> },
    { <span class="hljs-attr">d</span>: path(graticule), <span class="hljs-attr">fill</span>: <span class="hljs-string">"none"</span>, <span class="hljs-attr">stroke</span>: <span class="hljs-string">"#ddd"</span> },
    { <span class="hljs-attr">d</span>: path(outline), <span class="hljs-attr">fill</span>: <span class="hljs-string">"none"</span>, <span class="hljs-attr">stroke</span>: <span class="hljs-string">"black"</span> },
  ];

  <span class="hljs-comment">// 计算气泡数据</span>
  <span class="hljs-keyword">const</span> countryCentroid = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>(
    country.features
      .filter(<span class="hljs-function">(<span class="hljs-params">d</span>) =></span> d.properties.name)
      .map(<span class="hljs-function">(<span class="hljs-params">d</span>) =></span> [d.properties.name, d.properties.centroid])
  );
  <span class="hljs-keyword">const</span> countryName = <span class="hljs-function">(<span class="hljs-params">d</span>) =></span> (d === <span class="hljs-string">"雅典"</span> ? <span class="hljs-string">"希腊"</span> : d);
  <span class="hljs-keyword">const</span> countries = <span class="hljs-built_in">Array</span>.from(
    d3.group(people, <span class="hljs-function">(<span class="hljs-params">d</span>) =></span> d.country),
    <span class="hljs-function">(<span class="hljs-params">[country, people]</span>) =></span> {
      <span class="hljs-keyword">const</span> [x, y] = projection(countryCentroid.get(countryName(country)));
      <span class="hljs-keyword">return</span> {
        country,
        <span class="hljs-attr">count</span>: people.length,
        x,
        y,
      };
    }
  );

  <span class="hljs-comment">// 绘制</span>
  <span class="hljs-keyword">return</span> sp.plot({
    <span class="hljs-attr">type</span>: <span class="hljs-string">"layer"</span>,
    width,
    height,
    <span class="hljs-attr">children</span>: [
      {
        <span class="hljs-attr">type</span>: <span class="hljs-string">"path"</span>,
        <span class="hljs-attr">data</span>: paths,
        <span class="hljs-attr">scales</span>: {
          <span class="hljs-attr">color</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">"identity"</span> },
        },
        <span class="hljs-attr">guides</span>: { <span class="hljs-attr">color</span>: { <span class="hljs-attr">display</span>: <span class="hljs-literal">false</span> } },
        <span class="hljs-attr">encodings</span>: {
          <span class="hljs-attr">d</span>: <span class="hljs-string">"d"</span>,
          <span class="hljs-attr">fill</span>: <span class="hljs-string">"fill"</span>,
          <span class="hljs-attr">stroke</span>: <span class="hljs-string">"stroke"</span>,
        },
      },
      {
        <span class="hljs-attr">type</span>: <span class="hljs-string">"point"</span>,
        <span class="hljs-attr">guides</span>: { <span class="hljs-attr">x</span>: { <span class="hljs-attr">display</span>: <span class="hljs-literal">false</span> }, <span class="hljs-attr">y</span>: { <span class="hljs-attr">display</span>: <span class="hljs-literal">false</span> } },
        <span class="hljs-attr">scales</span>: {
          <span class="hljs-attr">y</span>: { <span class="hljs-attr">range</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>], <span class="hljs-attr">domain</span>: [<span class="hljs-number">0</span>, height] },
          <span class="hljs-attr">x</span>: { <span class="hljs-attr">domain</span>: [<span class="hljs-number">0</span>, width] },
          <span class="hljs-attr">r</span>: { <span class="hljs-attr">range</span>: [<span class="hljs-number">3</span>, <span class="hljs-number">6</span>] },
        },
        <span class="hljs-attr">paddingLeft</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">paddingTop</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">paddingBottom</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">paddingRight</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">data</span>: countries,
        <span class="hljs-attr">encodings</span>: {
          <span class="hljs-attr">x</span>: <span class="hljs-string">"x"</span>,
          <span class="hljs-attr">y</span>: <span class="hljs-string">"y"</span>,
          <span class="hljs-attr">r</span>: <span class="hljs-string">"count"</span>,
          <span class="hljs-attr">fill</span>: <span class="hljs-string">"steelblue"</span>,
          <span class="hljs-attr">stroke</span>: <span class="hljs-string">"steelblue"</span>,
        },
      },
    ],
  });
})();
</code></pre>
<p>虽然 Sparrow 已经把一个简单的地图绘制完成了，但是可以发现过程还是比较繁琐的，为了解决这个问题，我们来看看 AntV 的 <a href="https://l7.antv.vision/zh/" target="_blank" rel="nofollow noopener noreferrer">L7</a> 是如何绘制地图的。</p>
<h3>L7 绘制地图</h3>
<p>L7 同样需要把地理数据给关联上，通过国家名称字段将我们拾取的地理数据关联，最后将数据处为理常用的 <a href="https://geojson.org/" target="_blank" rel="nofollow noopener noreferrer">GeoJson</a> 格式，需要注意的是，数据中的“雅典”是“希腊”的首都。</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> MappingName = { 雅典: <span class="hljs-string">"希腊"</span> };
<span class="hljs-keyword">const</span> joinData = <span class="hljs-function">(<span class="hljs-params">philosophers, geoData</span>) =></span> {
  <span class="hljs-keyword">const</span> philosopherCountryMap = philosophers.reduce(
    <span class="hljs-function">(<span class="hljs-params">countryMap, philosopher</span>) =></span> {
      <span class="hljs-keyword">const</span> { country } = philosopher;
      <span class="hljs-keyword">const</span> mappingCountry = MappingName[country] || country;
      <span class="hljs-keyword">if</span> (countryMap[mappingCountry]) {
        countryMap[mappingCountry].push(philosopher);
      } <span class="hljs-keyword">else</span> {
        countryMap[mappingCountry] = [philosopher];
      }
      <span class="hljs-keyword">return</span> countryMap;
    },
    {}
  );
  <span class="hljs-keyword">const</span> features = geoData.features.map(<span class="hljs-function">(<span class="hljs-params">feature</span>) =></span> {
    <span class="hljs-keyword">const</span> countryName = feature.properties.name;
    <span class="hljs-keyword">const</span> philosophers = philosopherCountryMap[countryName] || [];
    <span class="hljs-keyword">const</span> philosopherSum = philosophers.length;
    <span class="hljs-keyword">const</span> currentFeature = <span class="hljs-built_in">Object</span>.assign({}, feature, {
      <span class="hljs-attr">properties</span>: {
        ...feature.properties,
        philosophers,
        philosopherSum,
      },
    });

    <span class="hljs-keyword">return</span> currentFeature;
  });
  <span class="hljs-keyword">const</span> geoPhilosophers = <span class="hljs-built_in">Object</span>.assign({}, geoData, { features });

  <span class="hljs-keyword">return</span> geoPhilosophers;
};
</code></pre>
<p>我们有了数据，就可以开始利用数据做可视分析了。根据数据中各个国家的哲学家数量，我们先来实现一个<strong>气泡图</strong>，气泡的地理位置采用国家的行政中心，
气泡大小与各个国家的哲学家数量正相关，这里可视化库我们使用 <a href="https://github.com/antvis/L7" target="_blank" rel="nofollow noopener noreferrer">L7</a> 。</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { Scene, Mapbox, PointLayer } <span class="hljs-keyword">from</span> <span class="hljs-string">"@antv/l7"</span>;
<span class="hljs-keyword">import</span> countrys <span class="hljs-keyword">from</span> <span class="hljs-string">"./countrys.json"</span>;
<span class="hljs-keyword">import</span> philosophers <span class="hljs-keyword">from</span> <span class="hljs-string">"./philosophers.json"</span>;

<span class="hljs-comment">// 1. 创建场景，并创建 Mapbox 作为地图的底图</span>
<span class="hljs-keyword">const</span> scene = <span class="hljs-keyword">new</span> Scene({
  <span class="hljs-attr">id</span>: container,
  <span class="hljs-attr">map</span>: <span class="hljs-keyword">new</span> Mapbox({
    <span class="hljs-attr">style</span>: <span class="hljs-string">"light"</span>,
    <span class="hljs-attr">pitch</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">zoom</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">center</span>: [<span class="hljs-number">43.3573729</span>, <span class="hljs-number">9.5221543</span>],
  }),
});

<span class="hljs-comment">// 2. 生成地理数据</span>
<span class="hljs-keyword">const</span> geoPhilosophers = joinData(philosophers, countrys);
<span class="hljs-keyword">const</span> geoPositions = geoPhilosophers.features
  .map(<span class="hljs-function">(<span class="hljs-params">{ properties }</span>) =></span> properties)
  .filter(<span class="hljs-function">(<span class="hljs-params">{ philosopherSum }</span>) =></span> philosopherSum);

<span class="hljs-comment">// 3. 创建气泡图层，并将气泡大小映射到数据字段上</span>
<span class="hljs-keyword">const</span> pointLayer = <span class="hljs-keyword">new</span> PointLayer({
  <span class="hljs-attr">autoFit</span>: <span class="hljs-literal">true</span>,
})
  .source(geoPositions, {
    <span class="hljs-attr">parser</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">"json"</span>, <span class="hljs-attr">coordinates</span>: <span class="hljs-string">"centroid"</span> },
  })
  .shape(<span class="hljs-string">"circle"</span>)
  .size(<span class="hljs-string">"philosopherSum"</span>, [<span class="hljs-number">20</span>, <span class="hljs-number">60</span>])
  .color(<span class="hljs-string">"#204CCF"</span>)
  .style({ <span class="hljs-attr">opacity</span>: <span class="hljs-number">0.6</span> });

<span class="hljs-comment">// 4. 创建文本标注图层</span>
<span class="hljs-keyword">const</span> labelLayer = <span class="hljs-keyword">new</span> PointLayer({})
  .source(geoPositions, {
    <span class="hljs-attr">parser</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">"json"</span>, <span class="hljs-attr">coordinates</span>: <span class="hljs-string">"centroid"</span> },
  })
  .shape(<span class="hljs-string">"name"</span>, <span class="hljs-string">"text"</span>)
  .size(<span class="hljs-number">10</span>)
  .color(<span class="hljs-string">"#000"</span>)
  .style({ <span class="hljs-attr">opacity</span>: <span class="hljs-number">0.8</span>, <span class="hljs-attr">fontSize</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">stroke</span>: <span class="hljs-string">"#fff"</span>, <span class="hljs-attr">strokeWidth</span>: <span class="hljs-number">2</span> });

<span class="hljs-comment">// 5. 将图层挂载到场景上</span>
scene.addLayer(pointLayer);
scene.addLayer(labelLayer);
</code></pre>
<p>绘制出来的效果见下图。从图中可以看出，利用气泡的方式只能看国家点的分布，接下来我们来做国家区域分布的图，利用区域的颜色映射哲学家的数量，这里使用 <a href="https://github.com/antvis/L7Plot" target="_blank" rel="nofollow noopener noreferrer">L7Plot</a> 来完成一个<strong>区域分布图</strong>，关于 L7 与 L7Plot 的关系见后文“延伸”部分。</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { Area } <span class="hljs-keyword">from</span> <span class="hljs-string">"@antv/l7plot"</span>;
<span class="hljs-keyword">import</span> countrys <span class="hljs-keyword">from</span> <span class="hljs-string">"./countrys.json"</span>;
<span class="hljs-keyword">import</span> philosophers <span class="hljs-keyword">from</span> <span class="hljs-string">"./philosophers.json"</span>;

<span class="hljs-comment">// 1. 生成地理数据</span>
<span class="hljs-keyword">const</span> geoPhilosophers = joinData(philosophers, countrys);

<span class="hljs-comment">// 2. 创建图表</span>
<span class="hljs-keyword">const</span> areaMap = <span class="hljs-keyword">new</span> Area(container, {
  <span class="hljs-attr">map</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-string">"mapbox"</span>,
    <span class="hljs-attr">style</span>: <span class="hljs-string">"light"</span>,
    <span class="hljs-attr">pitch</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">zoom</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">center</span>: [<span class="hljs-number">12.075174042231398</span>, <span class="hljs-number">42.78877076169903</span>],
  },
  <span class="hljs-attr">source</span>: {
    <span class="hljs-attr">data</span>: geoPhilosophers,
    <span class="hljs-attr">parser</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">"geojson"</span> },
  },
  <span class="hljs-attr">autoFit</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">color</span>: {
    <span class="hljs-attr">field</span>: <span class="hljs-string">"philosopherSum"</span>,
    <span class="hljs-attr">value</span>: [<span class="hljs-string">"#B8E1FF"</span>, <span class="hljs-string">"#7DAAFF"</span>, <span class="hljs-string">"#3D76DD"</span>, <span class="hljs-string">"#0047A5"</span>],
    <span class="hljs-attr">scale</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">"quantize"</span> },
  },
  <span class="hljs-attr">style</span>: {
    <span class="hljs-attr">opacity</span>: <span class="hljs-number">0.8</span>,
    <span class="hljs-attr">stroke</span>: <span class="hljs-string">"#F2F7F7"</span>,
    <span class="hljs-attr">lineType</span>: <span class="hljs-string">"dash"</span>,
    <span class="hljs-attr">lineDash</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">10</span>],
    <span class="hljs-attr">lineWidth</span>: <span class="hljs-number">0.6</span>,
    <span class="hljs-attr">lineOpacity</span>: <span class="hljs-number">0.8</span>,
  },
  <span class="hljs-attr">label</span>: {
    <span class="hljs-attr">field</span>: <span class="hljs-string">"name"</span>,
    <span class="hljs-attr">style</span>: { <span class="hljs-attr">fill</span>: <span class="hljs-string">"#000"</span>, <span class="hljs-attr">fontSize</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">stroke</span>: <span class="hljs-string">"#fff"</span>, <span class="hljs-attr">strokeWidth</span>: <span class="hljs-number">2</span> },
  },
  <span class="hljs-attr">tooltip</span>: { <span class="hljs-attr">items</span>: [<span class="hljs-string">"name"</span>, <span class="hljs-string">"adcode"</span>] },
  <span class="hljs-attr">zoom</span>: { <span class="hljs-attr">position</span>: <span class="hljs-string">"bottomright"</span> },
  <span class="hljs-attr">legend</span>: { <span class="hljs-attr">position</span>: <span class="hljs-string">"bottomleft"</span> },
});
</code></pre>
<p>绘制出来的效果见下图。接下来我们以哲学家的出生日期为时间线，对相同生平区间的哲学家进行分组，来做一个哲学区域变化图，以时间递增顺序渲染哲学区域。</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { Area } <span class="hljs-keyword">from</span> <span class="hljs-string">"@antv/l7plot"</span>;
<span class="hljs-keyword">import</span> countrys <span class="hljs-keyword">from</span> <span class="hljs-string">"./countrys.json"</span>;
<span class="hljs-keyword">import</span> philosophers <span class="hljs-keyword">from</span> <span class="hljs-string">"./philosophers.json"</span>;

<span class="hljs-comment">// 1. 以时间顺序对相同生平区间的哲学家进行分组</span>
<span class="hljs-keyword">const</span> philosopherGroups = philosophers.reduce(<span class="hljs-function">(<span class="hljs-params">groups, philosopher</span>) =></span> {
  <span class="hljs-keyword">if</span> (groups.length === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> [[philosopher]];
  <span class="hljs-keyword">const</span> lastGroup = groups[groups.length - <span class="hljs-number">1</span>];
  <span class="hljs-keyword">const</span> lastPhilosopherLifeEndTime =
    lastGroup[lastGroup.length - <span class="hljs-number">1</span>].lifespan[<span class="hljs-number">1</span>];
  <span class="hljs-keyword">const</span> currentPhilosopherLifeStartTime = philosopher.lifespan[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">if</span> (lastPhilosopherLifeEndTime >= currentPhilosopherLifeStartTime) {
    lastGroup.push(philosopher);
  } <span class="hljs-keyword">else</span> {
    groups.push([philosopher]);
  }
  <span class="hljs-keyword">return</span> groups;
}, []);

<span class="hljs-comment">// 2. 创建图表</span>
<span class="hljs-keyword">const</span> areaMap = <span class="hljs-keyword">new</span> Area(container, {
  <span class="hljs-attr">map</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-string">"mapbox"</span>,
    <span class="hljs-attr">style</span>: <span class="hljs-string">"light"</span>,
    <span class="hljs-attr">center</span>: [<span class="hljs-number">20.3573729</span>, <span class="hljs-number">40.5221543</span>],
    <span class="hljs-attr">zoom</span>: <span class="hljs-number">3</span>,
    <span class="hljs-attr">pitch</span>: <span class="hljs-number">0</span>,
  },
  <span class="hljs-attr">source</span>: {
    <span class="hljs-attr">data</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">"FeatureCollection"</span>, <span class="hljs-attr">features</span>: [] },
    <span class="hljs-attr">parser</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">"geojson"</span> },
  },
  <span class="hljs-attr">autoFit</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">color</span>: {
    <span class="hljs-attr">field</span>: <span class="hljs-string">"philosopherSum"</span>,
    <span class="hljs-attr">value</span>: [<span class="hljs-string">"#B8E1FF"</span>, <span class="hljs-string">"#7DAAFF"</span>, <span class="hljs-string">"#3D76DD"</span>, <span class="hljs-string">"#0047A5"</span>],
    <span class="hljs-attr">scale</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">"quantize"</span> },
  },
  <span class="hljs-attr">style</span>: {
    <span class="hljs-attr">opacity</span>: <span class="hljs-number">0.8</span>,
    <span class="hljs-attr">stroke</span>: <span class="hljs-string">"#F2F7F7"</span>,
    <span class="hljs-attr">lineType</span>: <span class="hljs-string">"dash"</span>,
    <span class="hljs-attr">lineDash</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">10</span>],
    <span class="hljs-attr">lineWidth</span>: <span class="hljs-number">0.6</span>,
    <span class="hljs-attr">lineOpacity</span>: <span class="hljs-number">0.8</span>,
  },
  <span class="hljs-attr">label</span>: {
    <span class="hljs-attr">field</span>: <span class="hljs-string">"name"</span>,
    <span class="hljs-attr">style</span>: { <span class="hljs-attr">fill</span>: <span class="hljs-string">"#000"</span>, <span class="hljs-attr">fontSize</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">stroke</span>: <span class="hljs-string">"#fff"</span>, <span class="hljs-attr">strokeWidth</span>: <span class="hljs-number">2</span> },
  },
  <span class="hljs-attr">state</span>: { <span class="hljs-attr">active</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">select</span>: <span class="hljs-literal">false</span> },
  <span class="hljs-attr">tooltip</span>: {
    <span class="hljs-attr">items</span>: [
      { <span class="hljs-attr">field</span>: <span class="hljs-string">"name"</span> },
      { <span class="hljs-attr">field</span>: <span class="hljs-string">"philosopherSum"</span> },
      {
        <span class="hljs-attr">field</span>: <span class="hljs-string">"philosophers"</span>,
        <span class="hljs-attr">customValue</span>: <span class="hljs-function">(<span class="hljs-params">value</span>) =></span>
          value
            .map(
              <span class="hljs-function">(<span class="hljs-params">item</span>) =></span>
                <span class="hljs-string">`name: <span class="hljs-subst">${item.name}</span>, lifespan: <span class="hljs-subst">${item.lifespan.join(<span class="hljs-string">"~"</span>)}</span>`</span>
            )
            .join(<span class="hljs-string">";"</span>),
      },
    ],
  },
  <span class="hljs-attr">zoom</span>: { <span class="hljs-attr">position</span>: <span class="hljs-string">"bottomright"</span> },
  <span class="hljs-attr">legend</span>: { <span class="hljs-attr">position</span>: <span class="hljs-string">"bottomleft"</span> },
});

<span class="hljs-comment">// 3. 按时间递增顺序渲染更新区域变化图</span>
<span class="hljs-keyword">let</span> currentGroupIndex = <span class="hljs-number">0</span>;
chinaMap.on(<span class="hljs-string">"loaded"</span>, <span class="hljs-function">() =></span> {
  <span class="hljs-keyword">const</span> geoPhilosophers = joinData(
    philosopherGroups[currentGroupIndex],
    countrys
  );
  chinaMap.changeData(geoPhilosophers);
});
chinaMap.on(<span class="hljs-string">"change-data"</span>, <span class="hljs-function">() =></span> {
  currentGroupIndex =
    currentGroupIndex === philosopherGroups.length - <span class="hljs-number">1</span>
      ? <span class="hljs-number">0</span>
      : ++currentGroupIndex;
  <span class="hljs-keyword">const</span> geoPhilosophers = joinData(
    philosopherGroups[currentGroupIndex],
    countrys
  );
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =></span> {
    chinaMap.changeData(geoPhilosophers);
  }, <span class="hljs-number">1500</span>);
});
</code></pre>
<p>最后绘制出来的效果如下图所示，代码地址 <a href="https://github.com/sparrow-vis/visualize-sophie-world/tree/main/example/19" target="_blank" rel="nofollow noopener noreferrer">visualize-sophie-world</a>。</p>















<table><thead><tr><th align="center">各个国家的哲学家数量气泡图</th><th align="center">各个国家的哲学家数量区域分布</th><th>以时间顺序哲学区域分布变化</th></tr></thead><tbody><tr><td align="center"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3b7318d155e440efbab5e9d741e3096a~tplv-k3u1fbpfcp-zoom-1.image" alt=""></td><td align="center"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dd02f15fe13b45688c58230e226a52eb~tplv-k3u1fbpfcp-zoom-1.image" alt=""></td><td><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/242be57afb4a4656853dd1151ab57ca3~tplv-k3u1fbpfcp-zoom-1.image" alt=""></td></tr></tbody></table>
<h3>数据洞察</h3>
<p>从中我们可以获取一些有效信息和洞察：</p>
<ul>
<li>哲学家主要集中在欧洲这些国家</li>
<li>哲学家最多的国家，希腊哲学家最多，意大利次之</li>
<li>地中海沿岸国家，哲学家比较集中</li>
<li>随着时间的变化，哲学中心从地中海北部迁移至北海</li>
</ul>
<h2>延伸</h2>
<h3>地理数据可视化库</h3>
<blockquote>
<p>开源地理数据可视化库及相关工具类</p>
</blockquote>
<p><strong>2/2.5D</strong></p>
<ul>
<li>
<p><a href="https://github.com/d3/d3-geo" target="_blank" rel="nofollow noopener noreferrer">d3-geo</a> <code>图表类</code></p>
</li>
<li>
<p><a href="https://github.com/sgratzl/chartjs-chart-geo" target="_blank" rel="nofollow noopener noreferrer">Chart.js Geo</a> <code>图表类</code></p>
</li>
<li>
<p><a href="https://github.com/vega/vega" target="_blank" rel="nofollow noopener noreferrer">vega</a> <code>图表类</code></p>
</li>
<li>
<p><a href="https://github.com/apache/echarts" target="_blank" rel="nofollow noopener noreferrer">ECharts</a> <code>图表类</code></p>
</li>
<li>
<p><a href="https://github.com/Leaflet/Leaflet" target="_blank" rel="nofollow noopener noreferrer">Leaflet</a></p>
</li>
<li>
<p><a href="https://github.com/openlayers/openlayers" target="_blank" rel="nofollow noopener noreferrer">OpenLayers</a></p>
</li>
<li>
<p><a href="https://github.com/huiyan-fe/mapv" target="_blank" rel="nofollow noopener noreferrer">Mapv</a></p>
</li>
<li>
<p><a href="https://github.com/antvis/L7" target="_blank" rel="nofollow noopener noreferrer">L7</a></p>
</li>
<li>
<p><a href="https://github.com/antvis/L7Plot" target="_blank" rel="nofollow noopener noreferrer">L7Plot</a> <code>图表类</code></p>
</li>
</ul>
<p><strong>3D</strong></p>
<ul>
<li><a href="https://github.com/mapbox/mapbox-gl-js" target="_blank" rel="nofollow noopener noreferrer">Mapbox GL JS</a></li>
<li><a href="https://github.com/CesiumGS/cesium" target="_blank" rel="nofollow noopener noreferrer">Cesium</a></li>
<li><a href="https://github.com/visgl/deck.gl" target="_blank" rel="nofollow noopener noreferrer">Deck.gl</a></li>
<li><a href="https://github.com/maptalks/maptalks.js" target="_blank" rel="nofollow noopener noreferrer">maptalks.js</a></li>
</ul>
<h3>L7、L7Plot 关系</h3>
<p><strong>L7</strong></p>
<p>基于 WebGL 的地理空间数据可视化引擎，以图形符号学为理论基础，将抽象复杂的空间数据转化成 2D、3D 符号，通过颜色、大小、体积、纹理等视觉变量实现丰富的可视化表达。在 API 使用语法上跟 <a href="https://github.com/antvis/G2" target="_blank" rel="nofollow noopener noreferrer">G2</a> 一样基于图形语法。 与 <a href="https://github.com/antvis/G2" target="_blank" rel="nofollow noopener noreferrer">G2</a> 区别： <a href="https://github.com/antvis/L7" target="_blank" rel="nofollow noopener noreferrer">L7</a> 专注于地理空间数据可视分析，<a href="https://github.com/antvis/G2" target="_blank" rel="nofollow noopener noreferrer">G2</a> 专注于统计图表。它的取名中的 L 代表 Location，7 代表世界七大洲。</p>
<p><strong>L7Plot</strong></p>
<p><a href="https://github.com/antvis/L7Plot" target="_blank" rel="nofollow noopener noreferrer">L7Plot</a> 基于 <a href="https://github.com/antvis/L7" target="_blank" rel="nofollow noopener noreferrer">L7</a> 实现的<strong>开箱即用</strong>地理空间数据可视化图表库，与 <a href="https://github.com/antvis/L7" target="_blank" rel="nofollow noopener noreferrer">L7</a> 区别：</p>
<ul>
<li><a href="https://github.com/antvis/L7" target="_blank" rel="nofollow noopener noreferrer">L7</a> 基于图形符号学为理论，以图形语法 API 方式使用，概念较多，实现简单的地理可视化业务需要不少代码量。</li>
<li><a href="https://github.com/antvis/L7Plot" target="_blank" rel="nofollow noopener noreferrer">L7Plot</a> 专注于专注于地理可视化图表；以声明配置式的方式，降低用户使用成本；以常见地理图表分类的方式，降低用户选择成本；内部集成全国行政区域数据，降低用户使用地理数据心智。</li>
<li><a href="https://github.com/antvis/L7Plot" target="_blank" rel="nofollow noopener noreferrer">L7Plot</a> L7Plot 专注于地理数据可视化展示，不会涉及数据编辑能力。</li>
</ul>
<h2>小结</h2>
<p>这一章我们完成了：“苏菲的世界中，哲学中心如何变化？”这一个任务。</p>
<p>到此为止，我们所有的开发和分析任务就都结束了，那么下一章将是我们的最后一章：<strong>看看通过本小册子我们学到了什么，还有什么可以深入学习的东西。</strong></p></div>
</body></html>