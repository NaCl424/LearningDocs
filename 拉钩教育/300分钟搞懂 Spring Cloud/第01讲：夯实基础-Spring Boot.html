<!DOCTYPE html><html lang="en"><head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>第01讲：夯实基础-Spring Boot</title>
<style type="text/css">
:root {
    --control-text-color: #777;
    --select-text-bg-color: rgba(223, 197, 223);  /*#7e66992e;*/
    
    /* side bar */
    --side-bar-bg-color: rgb(255, 255, 255);
    --active-file-text-color: #8163bd;
    --active-file-bg-color: #E9E4F0;
    --item-hover-bg-color: #E9E4F0;
    --active-file-border-color: #8163bd;

    --title-color: #6c549c;
    --font-sans-serif: 'Ubuntu', 'Source Sans Pro', sans-serif !important;
    --font-monospace: 'Fira Code', 'Roboto Mono', monospace !important;
    --purple-1: #8163bd;
    --purple-2: #79589F;
    --purple-3: #fd5eb8;
    --purple-light-1: rgba(99, 99, 172, .05);
    --purple-light-2: rgba(99, 99, 172, .1);
    --purple-light-3: rgba(99, 99, 172, .2);
    --purple-light-4: rgba(129, 99, 189, .3);
    --purple-light-5: #E9E4F0;
    --purple-light-6: rgba(129, 99, 189, .8);
}

/* html {
    font-size: 16px;
} */

body {
    font-family: var(--font-sans-serif);
    color: #34495e;
    -webkit-font-smoothing: antialiased;
    line-height: 1.6rem;
    letter-spacing: 0;
    margin: 0;
    overflow-x: hidden;
}

/* 页边距 和 页面大小 */
#write {
    padding-left: 6ch;
    padding-right: 6ch;
    margin: 0 auto;
}

#write p {
    line-height: 1.6rem;
    word-spacing: .05rem;
}

#write ol li {
    padding-left: 0.5rem;
}

#write > ul:first-child,
#write > ol:first-child {
    margin-top: 30px;
}

body > *:first-child {
    margin-top: 0 !important;
}

body > *:last-child {
    margin-bottom: 0 !important;
}

a {
    color: var(--purple-1);
    padding: 0 2px;
    text-decoration: none;
}
.md-content {
    color: var(--purple-light-6);
}
#write a {
    border-bottom: 1px solid var(--purple-1);
    color: var(--purple-1);
    text-decoration: none;
}

h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 0.5rem;
    /* font-weight: bold; */
    font-weight: 500 !important;
    line-height: 1.4;
    cursor: text;
    color: var(--title-color);
    font-family: var(--font-sans-serif);
}

h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}

h1 tt,
h1 code {
    font-size: inherit !important;
}
h2 tt,
h2 code {
    font-size: inherit !important;
}
h3 tt,
h3 code {
    font-size: inherit !important;
}
h4 tt,
h4 code {
    font-size: inherit !important;
}
h5 tt,
h5 code {
    font-size: inherit !important;
}
h6 tt,
h6 code {
    font-size: inherit !important;
}


h1 {
    padding-bottom: .4rem;
    font-size: 2.2rem;
    line-height: 1.3;
}
h1 {
    text-align: center;
    padding-bottom: 0.3em;
    font-size: 2.2em;
    line-height: 1.2;
    margin: 2.4em auto 1.2em;
}
h1:after {
    content: '';
    display: block;
    margin: 0.2em auto 0;
    width: 100px;
    height: 2px;
    border-bottom: 2px solid var(--title-color);
}

h2 {
    margin: 1.6em auto 0.5em;
    padding-left: 10px;
    line-height: 1.4;
    font-size: 1.8em;
    border-left: 9px solid var(--title-color);
    border-bottom: 1px solid var(--title-color);
}
h3 {
    font-size: 1.5rem;
    margin: 1.2em auto 0.5em;
}
h4 {
    font-size: 1.3rem;
}
h5 {
    font-size: 1.2rem;
}
h6 {
    font-size: 1.1rem;
}

p,
blockquote,
ul,
ol,
dl,
table {
    margin: 0.8em 0;
}

li > ol,
li > ul {
    margin: 0 0;
}

hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

body > h2:first-child {
    margin-top: 0;
    padding-top: 0;
}

body > h1:first-child {
    margin-top: 0;
    padding-top: 0;
}

body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0;
}

body > h3:first-child,
body > h4:first-child,
body > h5:first-child,
body > h6:first-child {
    margin-top: 0;
    padding-top: 0;
}

a:first-child h1,
a:first-child h2,
a:first-child h3,
a:first-child h4,
a:first-child h5,
a:first-child h6 {
    margin-top: 0;
    padding-top: 0;
}

h1 p,
h2 p,
h3 p,
h4 p,
h5 p,
h6 p {
    margin-top: 0;
}

li p.first {
    display: inline-block;
}

ul,
ol {
    padding-left: 30px;
}

ul:first-child,
ol:first-child {
    margin-top: 0;
}

ul:last-child,
ol:last-child {
    margin-bottom: 0;
}

/* 引用 */
blockquote {
    /* margin-left: 1rem; */
    border-left: 4px solid var(--purple-light-4);
    padding: 10px 15px;
    color: #777;
    background-color: var(--purple-light-1);
}

/* 表格 */
table {
    padding: 0;
    word-break: initial;
}

table tr {
    border-top: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}

/* 表格 背景色 */
table tr:nth-child(2n),
thead {
    background-color: var(--purple-light-1);
}
#write table thead th {
    background-color: var(--purple-light-2);
}

table tr th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}

table tr td {
    border: 1px solid #dfe2e5;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}

table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}

table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}

/* 粗体 */
#write strong {
    padding: 0 2px;
    color: var(--purple-1);
}

/* 斜体 */
#write em {
    padding: 0 5px 0 2px;
    /* font-style: normal; */
    color: #42b983;
}

/* inline code */
#write code, tt {
    padding: 2px 4px;
    border-radius: 2px;
    font-family: var(--font-monospace);
    font-size: 0.92rem;
    color: var(--purple-3); 
    background-color: rgba(99, 99, 172, .05);
}

tt {
    margin: 0 2px;
}

#write .md-footnote {
    background-color: #f8f8f8;
    color: var(--purple-3);
}

/* heighlight. */
#write mark {
    background-color: #fbd3ea;
    border-radius: 2px;
    padding: 2px 4px;
    margin: 0 2px;
}

#write del {
    padding: 1px 2px;
}

.md-task-list-item > input {
    margin-left: -1.3em;
}

@media print {
    html {
        font-size: 0.9rem;
    }

    table,
    pre {
        page-break-inside: avoid;
    }

    pre {
        word-wrap: break-word;
    }
}

#write pre.md-meta-block {
    padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block > .code-tooltip {
    bottom: .375rem;
}

/* 图片 */
.md-image > .md-meta {
    border-radius: 3px;
    font-family: var(--font-monospace);
    padding: 2px 0 0 4px;
    font-size: 0.9em;
    color: inherit;
}
p .md-image:only-child{
    width: auto;
    text-align: left;
    margin-left: 2rem;
}
.md-tag {
    color: inherit;
}
/* 当 “![shadow-随便写]()”写时，会有阴影 */
.md-image img[alt|='shadow'] {
    /* box-shadow: 0 4px 24px -6px #ddd; */
    box-shadow:var(--purple-light-2) 0px 10px 15px;
}

#write a.md-toc-inner {
    line-height: 1.6;
    white-space: pre-line;
    border-bottom: none;
    font-size: 0.9rem;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

#md-notification:before {
    top: 10px;
}

header,
.context-menu,
.megamenu-content,
footer {
    font-family: var(--font-sans-serif);
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state {
    visibility: visible;
}

.md-lang {
    color: #b4654d;
}

.html-for-mac .context-menu {
    --item-hover-bg-color: #E6F0FE;
}

/* 代码框 */
/* CodeMirror 3024 Day theme */

/* 代码段 背景 */
pre {
    --select-text-bg-color: rgba(223, 197, 223) !important;
    margin: .5em 0;
    padding: 1em 1.4em;
    border-radius: 8px;
    background: #f6f8fa;
    overflow-x: auto;
    box-sizing: border-box;
    font-size: 14px;
}

/* 边框 */
.md-fences {
    border: 1px solid #e7eaed;
    border-radius: 3px;
}

.cm-s-inner {
  padding: .25rem;
  border-radius: .25rem;
}

.cm-s-inner.CodeMirror, .cm-s-inner .CodeMirror-gutters {
  background-color: #f8f8f8 !important;
  color: #3a3432 !important;
  border: none;
}

.cm-s-inner .CodeMirror-gutters {
  color: #6d8a88;
}

.cm-s-inner .CodeMirror-cursor {
  border-left: solid thin #5c5855 !important;
}

.cm-s-inner .CodeMirror-linenumber {
  color: #807d7c;
}

.cm-s-inner .CodeMirror-line::selection, .cm-s-inner .CodeMirror-line::-moz-selection,
.cm-s-inner .CodeMirror-line > span::selection,
.cm-s-inner .CodeMirror-line > span::-moz-selection,
.cm-s-inner .CodeMirror-line > span > span::selection,
.cm-s-inner .CodeMirror-line > span > span::-moz-selection {
  background: var(--purple-light-2);
}

.cm-s-inner span.cm-comment {
  color: #cdab53;
}

.cm-s-inner span.cm-string, .cm-s-inner span.cm-string-2 {
  color: #f2b01d;
}

.cm-s-inner span.cm-number {
  color: #a34e8f;
}

.cm-s-inner span.cm-variable {
  color: #01a252;
}

.cm-s-inner span.cm-variable-2 {
  color: #01a0e4;
}

.cm-s-inner span.cm-def {
  /* color: #e8bbd0; */
  color: #e2287f;
}

.cm-s-inner span.cm-operator {
  color: #ff79c6;
}

.cm-s-inner span.cm-keyword {
  color: #db2d20;
}

.cm-s-inner span.cm-atom {
  color: #a34e8f;
}

.cm-s-inner span.cm-meta {
  color: inherit;
}

.cm-s-inner span.cm-tag {
  color: #db2d20;
}

.cm-s-inner span.cm-attribute {
  color: #01a252;
}

.cm-s-inner span.cm-qualifier {
  color: #388aa3;
}

.cm-s-inner span.cm-property {
  color: #01a252;
}

.cm-s-inner span.cm-builtin {
  color: #388aa3;
}

.cm-s-inner span.cm-variable-3, .cm-s-inner span.cm-type {
  color: #ffb86c;
}

.cm-s-inner span.cm-bracket {
  color: #3a3432;
}

.cm-s-inner span.cm-link {
  color: #a34e8f;
}

.cm-s-inner span.cm-error {
  background: #db2d20;
  color: #5c5855;
}

/* .md-fences.md-focus .cm-s-inner .CodeMirror-activeline-background {
  background: var(--purple-light-2);
} */

.cm-s-inner .CodeMirror-matchingbracket {
  text-decoration: underline;
  color: #a34e8f !important;
}

#fences-auto-suggest .active {
  background: #ddd;
}

#write .code-tooltip {
  bottom: initial;
  top: calc(100% - 1px);
  background: #f7f7f7;
  border: 1px solid #ddd;
  border-top: 0;
}

.auto-suggest-container {
  border-color: #b4b4b4;
}

.auto-suggest-container .autoComplt-hint.active {
  background: #b4b4b4;
  color: inherit;
}

/* task list */
#write .md-task-list-item > input {
  -webkit-appearance: initial;
  display: block;
  position: absolute;
  border: 1px solid #b4b4b4;
  border-radius: .25rem;
  margin-top: .1rem;
  margin-left: -1.8rem;
  height: 1.2rem;
  width: 1.2rem;
  transition: background 0.3s;
}

#write .md-task-list-item > input:focus {
  outline: none;
  box-shadow: none;
}

#write .md-task-list-item > input:hover {
  background: #ddd;
}

#write .md-task-list-item > input[checked]::before {
  content: '';
  position: absolute;
  top: 20%;
  left: 50%;
  height: 60%;
  width: 2px;
  transform: rotate(40deg);
  background: #333;
}

#write .md-task-list-item > input[checked]::after {
  content: '';
  position: absolute;
  top: 46%;
  left: 25%;
  height: 30%;
  width: 2px;
  transform: rotate(-40deg);
  background: #333;
}

#write .md-task-list-item > p {
  transition: color 0.3s, opacity 0.3s;
}

#write .md-task-list-item.task-list-done > p {
  color: #b4b4b4;
  text-decoration: line-through;
}

#write .md-task-list-item.task-list-done > p > .md-emoji {
  opacity: .5;
}

#write .md-task-list-item.task-list-done > p > .md-link > a {
  opacity: .6;
}

/* sidebar and outline */
.pin-outline .outline-active {
  color: var(--active-file-text-color); 
}

.file-list-item {
    border-bottom: 1px solid;
    border-color: var(--purple-light-5);
}

.file-list-item-summary {
    font-weight: 400;
}

.file-list-item.active {
    color: var(--active-file-text-color);
    background-color: var(--purple-light-5);
}

.file-tree-node.active>.file-node-background {
    background-color: var(--purple-light-5);
    font-weight: 700;
} 

.file-tree-node.active>.file-node-content {
    color: var(--active-file-text-color);
    font-weight: 700;
}

.file-node-content {
    color: #5e676d;
}

.sidebar-tabs {
    border-bottom: none;
}
.sidebar-tab.active {
    font-weight: 400;
}

.sidebar-content-content {
    font-size: 0.9rem;
}

img {
    max-width: 100%;
}

body {
    background-color: rgb(237, 237, 237);
}
#content {
    width: 836px;
    padding: 50px;
    background: #fff;
    margin: 0 auto;
}/*# sourceURL=/Users/young/Documents/Codes/Fun/lagou/public/purple.css*/</style><style type="text/css">.hljs{display:block;overflow-x:auto;padding:.5em;color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}/*# sourceURL=/Users/young/Documents/Codes/Fun/lagou/public/atom-one-light.min.css*/</style></head>
<body>
  <div id="content"><h1>第01讲：夯实基础-Spring Boot</h1><p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); text-indent: 0em; text-align: justify; line-height: 1.75em;"><span style="font-size: 16px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(63, 63, 63);">欢迎来到第 1 课时“夯实基础-Spring Boot”，这一课时主要包含以下内容：&nbsp;</span></p>
<ul style="">
 <li><p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); text-indent: 0em; text-align: justify; line-height: 1.75em;"><span style="font-size: 16px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(63, 63, 63);">Spring Boot 的基本介绍；</span></p></li>
 <li><p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); text-indent: 0em; text-align: justify; line-height: 1.75em;"><span style="font-size: 16px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(63, 63, 63);">Spring Boot 的使用；</span></p></li>
 <li><p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); text-indent: 0em; text-align: justify; line-height: 1.75em;"><span style="font-size: 16px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(63, 63, 63);">Spring Boot 配置管理；</span></p></li>
 <li><p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); text-indent: 0em; text-align: justify; line-height: 1.75em;"><span style="font-size: 16px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(63, 63, 63);">Spring Boot Starter 自定义；</span></p></li>
 <li><p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); text-indent: 0em; text-align: justify; line-height: 1.75em;"><span style="font-size: 16px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(63, 63, 63);">Spring Boot 监控等多个方面的内容。</span></p></li>
</ul>
<h1><p style="line-height: 1.75em;"><span style="font-size: 18px;">Spring Boot 介绍</span></p></h1>
<h3><p style="line-height: 1.75em;"><span style="font-size: 12pt;">Spring Boot 基础介绍</span></p></h3>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); text-align: justify; line-height: 1.75em;"><span style="font-size: 16px; font-family: &quot;Microsoft YaHei&quot;, sans-serif; color: rgb(63, 63, 63);">众所周知，Spring Boot 是由 Pivotal 团队提供的全新框架，并于 2014 年 4 月发布第一个版本，其设计目的是用来简化 Spring 应用的搭建，以及开发过程。Spring Boot 有以下特点：</span></p>
<ul style="">
 <li><p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); text-align: justify; line-height: 1.75em;"><span style="font-size: 16px; color: rgb(63, 63, 63);">Spring Boot 通过简单的步骤就可以创建一个 Spring 应用。</span></p></li>
 <li><p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); text-align: justify; line-height: 1.75em;"><span style="font-size: 16px; color: rgb(63, 63, 63);">Spring Boot 为 Spring 整合第三方框架提供了开箱即用功能。</span></p></li>
 <li><p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); text-align: justify; line-height: 1.75em;"><span style="color: rgb(63, 63, 63); font-size: 16px; text-indent: 29.33px;">Spring Boot 的核心思想是约定大于配置。</span></p></li>
</ul>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); text-align: justify; line-height: 1.75em;"><span style="font-size: 16px; color: rgb(63, 63, 63);">使用 Spring Boot 可以大大简化开发模式，提高开发效率。<span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">我对 Spring Boot 的评价就一句话：Java 开发者的福音。</span></span></p>
<h3><p style="line-height: 1.75em;"><span style="font-size: 16px;">Spring Boot 解决的问题</span></p></h3>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="color: rgb(75, 75, 75); font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">在没接触 Spring Boot 之前，使用 Spring 进行开发时，经常会遇到以下问题。</span></p>
<ul style="">
 <li><p style="line-height: 1.75em;"><span style="color: rgb(75, 75, 75); font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">搭建后端框架时需要手动添加框架的 Maven 配置，会涉及很多 XML 配置文件，增加了搭建项目框架的难度和时间成本。</span></p></li>
 <li><p style="line-height: 1.75em;"><span style="color: rgb(75, 75, 75); font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">无论是本地调试还是线上部署，都需要首先安装 Tomcat，然后将项目编译成 war 包，部署到 Tomcat 中，这样非常不方便。</span></p></li>
 <li><p style="line-height: 1.75em;"><span style="color: rgb(75, 75, 75); font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">应用监控做的比较简单，通常都是通过一个没有任何逻辑的接口来判断应用的存活状态。</span></p></li>
</ul>
<h3><p style="line-height: 1.75em;"><span style="font-size: 16px;">Spring Boot 亮点</span></p></h3>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63);">随着 Spring Boot 的出现，轻松解决了上面的这些问题，我们下面来看看为什么 Spring Boot 可以解决这些问题。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 16px; color: rgb(63, 63, 63);">&nbsp;</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63);">主要是因为 Spring Boot 的 4 个亮点，分别是自动装配、内嵌容器、应用监控、Starter 包简化框架集成难度。</span></p>
<ul style="">
 <li><p style="line-height: 1.75em;"><span style="color: rgb(63, 63, 63);"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">自动装配：</span><span style="color: rgb(102, 102, 102); font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">Spring Boot 会根据某些规则对所有配置的 Bean 进行初始化。可以</span><span style="color: rgb(77, 77, 77); font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">减少了很多重复性的工作。比如使用 MongoDB 时，只需要在 pom.xml 中加入 MongoDB 的 Starter 包，然后配置 MongoDB 的连接信息，就可以直接使用 MongoTemplate 自动装配来操作数据库了。</span></span></p></li>
 <li><p style="line-height: 1.75em;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; color: rgb(63, 63, 63);">内嵌容器：Spring Boot 应用程序可以不用部署到外部容器中，比如 Tomcat。Spring Boot 应用程序可以直接通过 Maven 命令编译成可执行的 jar 包，通过 java-jar 命令启动即可，非常方便。</span></p></li>
 <li><p style="line-height: 1.75em;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; color: rgb(63, 63, 63);">应用监控：Spring Boot 中自带监控功能 Actuator，可以实现对程序内部运行情况进行监控，比如 Bean 加载情况、环境变量、日志信息、线程信息等。当然也可以自定义跟业务相关的监控，通过Actuator 的端点信息进行暴露。</span></p></li>
 <li><p style="line-height: 1.75em;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; color: rgb(63, 63, 63);">Starter 包简化框架集成难度：将 Bean 的自动装配逻辑封装在 Starter 包内部，同时也简化了 Maven Jar 包的依赖，对框架的集成只需要加入一个 Starter 包的配置，降低了烦琐配置的出错几率。</span></p></li>
</ul>
<h3><p style="line-height: 1.75em;"><span style="font-size: 16px;">Spring Boot 常用 Starter 包</span></p></h3>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif; color: rgb(63, 63, 63);">Spring Boot 的 Starter 包有很多，几乎覆盖了 Java 领域的大部分框架，这里列举几个常用的 Starter 包。</span></p>
<ul style="">
 <li><p style="line-height: 1.75em; text-align: justify;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif; color: rgb(63, 63, 63);">spring-boot-starter-web：用于快速构建基于 Spring MVC 的 Web 项目。</span></p></li>
 <li><p style="line-height: 1.75em; text-align: justify;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif; color: rgb(63, 63, 63);">spring-boot-starter-data-redis：用于快速整合并操作 Redis。</span></p></li>
 <li><p style="line-height: 1.75em; text-align: justify;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif; color: rgb(63, 63, 63);">spring-boot-starter-data-mongodb：用于对 MongoDB 的集成。</span></p></li>
 <li><p style="line-height: 1.75em; text-align: justify;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif; color: rgb(63, 63, 63);">spring-boot-starter-data-jpa：用于操作 MySQL。</span></p></li>
 <li><p style="line-height: 1.75em; text-align: justify;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif; color: rgb(63, 63, 63);">spring-boot-starter-activemq：用于操作 ActiveMQ。</span></p></li>
</ul>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif; color: rgb(63, 63, 63);">除了这些比较常用的 Starter 包之外，还有很多是你在工作中需要使用的，这里不再赘述，请你课下参考官方文档查询。</span></p>
<h1><p style="line-height: 1.75em;"><span style="font-size: 18px;">Spring Boot 使用</span></p></h1>
<h3><p style="line-height: 1.75em;"><span style="font-size: 16px;">Spring Boot 项目创建</span></p></h3>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">Spring Boot 的项目创建方式分为两种：</span></p>
<ol style="">
 <li><p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">首先创建一个 Maven 项目，然后手动往这个 Maven 项目中添加 Spring Boot 需要的依赖；</span></p></li>
 <li><p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">通过官方脚手架页面创建 Spring Boot 项目。</span></p></li>
</ol>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-indent: 0em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">相比于第一种方式，方式二降低了学习难度，也是目前最简单的创建方式。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;">&nbsp;</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="background-color: rgb(255, 217, 0);"></span></p>
<p style="margin-top: 0px; margin-bottom: 0px; box-sizing: border-box; color: rgb(73, 73, 73); font-size: 14.66px; font-variant-numeric: normal; font-variant-east-asian: normal; line-height: 22.66px; outline-style: none; outline-width: 0px; padding: 0px; white-space: normal; text-align: center;"><span style="box-sizing: border-box; margin: 0px; outline-style: none; outline-width: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp;<img src="http://s0.lgstatic.com/i/image2/M01/8B/B8/CgoB5l16CcGASwhHAACb19MWf5Y813.png" style="border-style: none; box-sizing: border-box; margin: 0px; outline-style: none; outline-width: 0px; padding: 0px;"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;">&nbsp;</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">进入页面后，你可以选择即将创建项目的类型是 Maven 或是 Gradle, 以及开发语言，Spring Boot 版本，依赖的 Starter 等信息，最后生成项目，下载到本地，然后导入开发工具中。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;">&nbsp;</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">如果你不想在官方提供的网站中创建项目，也可以在开发工具中创建项目，下面我们搭建一个 Spring Boot 的 Web 后端服务。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="background-color: rgb(255, 192, 0);"><img src="http://s0.lgstatic.com/i/image2/M01/8B/C0/CgoB5l16F5CANbFZAMhzV5onKV0396.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">首先，我们需要通过脚手架创建一个 Spring Boot 项目并导入开发工具中，这里使用的是 STS, 当然你也可以选择自己熟悉的工具，比如 IDEA。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;">&nbsp;</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">这里事先创建好了一个 Spring Boot 项目，然后将项目导入了开发工具 STS 中。查看项目的 pom.xml 文件，parent 节点配置了 Spring Boot 的信息，指定了版本为 2.1.6.RELEASE，并且依赖了 spring-boot-starter-web。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;">&nbsp;</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="background-color: rgb(255, 192, 0);"><img src="http://s0.lgstatic.com/i/image2/M01/8B/C0/CgoB5l16F7yAfj3KAINssw4qZtI832.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">第二步，需要对项目进行配置，配置都在 application.properties 中进行添加，配置 Tomcat 的端口信息，令 server.port=8082，也可以不用配置，默认是 8080 端口。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;">&nbsp;</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="background-color: rgb(255, 192, 0);"><img src="http://s0.lgstatic.com/i/image2/M01/8B/E0/CgotOV16F8KAMXJ_AGVdCQqkM-0530.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">第三步，需要编写 RestController，开发业务接口，这里简单以 hello 接口为例，然后返回一个字符串。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;">&nbsp;</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="background-color: rgb(255, 192, 0);"><img src="http://s0.lgstatic.com/i/image2/M01/8B/C0/CgoB5l16F-iASQEGAQ-_KSlfEgg265.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">第四步，在 Spring Boot 中只需要执行启动类中的 Main 方法启动项目即可，启动后可以看到控制台输出 Tomcat started on port，显示当前服务的端口号，在浏览器中访问&nbsp;</span><a style="color: rgb(112, 177, 231);">http://localhost:8082/hello</a><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">，就可以看到我们在接口中返回的内容了。</span></p>
<h3><p style="line-height: 1.75em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">Spring Boot 编译打包</span></p></h3>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif; color: rgb(63, 63, 63);">通过上面这个简单的示列，相信你一定体会到了 Spring Boot 的简便性，不要着急，我们继续来学习 Spring Boot 的其他功能，相信你一定会对 Spring Boot 这个框架爱不释手。</span><span style="font-size: 11pt;">&nbsp; &nbsp; &nbsp; &nbsp;</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 16px; color: rgb(63, 63, 63); font-family: &quot;Microsoft YaHei&quot;, sans-serif;">对 Spring Boot 项目进行打包，首先需要配置一个 spring-boot-maven-plugin&nbsp;打包插件，在 configuration 节点中添加 mainClass 节点，指定程序的启动类。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; white-space: normal; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; white-space: normal; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><img src="http://s0.lgstatic.com/i/image2/M01/8B/C3/CgoB5l16IDyAJGK5ADq0_nQL4t8907.gif"></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63);">配置完成后就可以通过 Maven 的命令进行编译打包了，最简单的方式是直接用开发工具自带的 Maven 插件进行编译，选中项目，单击右键，可以看到 Run As 菜单，选中 Maven Build 选项，输入编译的命令 clean package，编译后，进入项目源码的 target 目录，可以看到打包好了的可执行的 jar 包，部署的时候直接用这个 jar 部署启动即可。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63);">这里需要注意，在开发工具中只是给大家演示 Spring Boot 的打包过程，在公司中都有专门的部署平台来负责拉代码，编译，打包，最后发布到对应的机器上。</span></p>
<h3><p style="line-height: 1.75em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">Spring Boot配置管理</span></p></h3>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 16px; color: rgb(63, 63, 63);">在实际工作中我们无法避免如何区分多环境的问题，开发环境连接的是开发环境的数据库，测试环境连接的是测试环境的数据库，等等，不同环境下的配置信息是不一样的。如果我们只有一个配置文件，意味着每次在发布前都需要手动修改配置文件为当前发布环境，这样非常不方便，而且也很容易出错。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 16px; color: rgb(63, 63, 63);">而在 Spring Boot 中解决这个问题非常简单，我们可以为每个环境定义一个配置文件，最后通过 spring.profiles.active 来激活对应的配置文件。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 16px; color: rgb(63, 63, 63); background-color: rgb(255, 192, 0);"><img src="http://s0.lgstatic.com/i/image2/M01/8B/E0/CgotOV16GBaAGEOiAH_Dc2S7jJ0705.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 16px; color: rgb(63, 63, 63);">首先在 resources 目录下创建一个 application-dev.properties，配置 server.port=8082。&nbsp;</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 16px; color: rgb(63, 63, 63); background-color: rgb(255, 192, 0);"><img src="http://s0.lgstatic.com/i/image2/M01/8B/C0/CgoB5l16GBeAVp78AIMD4WizaMw065.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 16px; color: rgb(63, 63, 63);">然后再创建一个&nbsp;</span><span style="color: rgb(63, 63, 63); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 16px;">application-test.properties，配置 server.port=8083，现在相当于有 dev 和 test 两个环境的配置。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="color: rgb(63, 63, 63); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 16px; background-color: rgb(255, 192, 0);"><img src="http://s0.lgstatic.com/i/image2/M01/8B/C3/CgoB5l16HdGAEcguADyOblBXdxk142.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="color: rgb(63, 63, 63); font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 16px;">那么该使用哪个环境下的配置取决于 spring.profiles.active 的值，在默认的 application.properties 中配置 spring.profiles.active=dev，启动项目，可以看到当前的端口是 8082，再次将 spring.profiles.active=dev 改成 test，启动项目，端口变成 8083，这样我们就可以做到在不同环境下使用不同的配置了。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 16px; color: rgb(63, 63, 63);">&nbsp;</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 16px; color: rgb(63, 63, 63);">在后面的课时中会讲解通过配置中心的方式来集中管理配置信息，通过配置中心来区分多环境，在配置中心修改的配置会实时推送到应用内，可以不用重启，非常方便。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 16px; color: rgb(63, 63, 63);">&nbsp;</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 16px; color: rgb(63, 63, 63);">我记得刚工作时，在第一家公司接触的项目都是基于 SSH 搭建的，项目中的配置信息也是存储在 properties 属性文件中的，不同的是读取配置用的是手动封装的 PropertiesUtils 工具类。使用工具类可以指定你要读取的文件和对应的 Key。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 16px; color: rgb(63, 63, 63);">&nbsp;</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 16px; color: rgb(63, 63, 63);">我们在用官方提供的脚手架创建 Spring Boot 项目后，会默认在项目的 resources 目录下生成一个 application.properties 配置文件，项目中所有配置内容都可以放在这个文件中，这时我们是否还需要使用 PropertiesUtils 这种工具类来读取配置文件的内容呢？</span><span style="font-size: 11pt;">&nbsp; &nbsp; &nbsp; &nbsp;</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63);">答案是完全不需要，在 Spring Boot 中读取配置内容有以下三种方式：</span></p>
<ul style="">
 <li><p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63);">Environment</span></p></li>
 <li><p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63);">@Value</span></p></li>
 <li><p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63);">@ConfigurationProperties</span></p></li>
</ul>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63);">第一种方式：Environment。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63); background-color: rgb(255, 192, 0);"><img src="http://s0.lgstatic.com/i/image2/M01/8B/E0/CgotOV16GGiADV0UANCdt_kBzKo893.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-size: 16px; color: rgb(63, 63, 63);"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">Environment 用于管理当前的应用环境信息，定义了获取 Profile 的方法，同时继承了 PropertyResolver，</span><span style="color: rgb(34, 34, 34); font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">PropertyResolver 提供了属性访问的相关方法。</span></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-size: 16px; color: rgb(63, 63, 63);"><span style="color: rgb(34, 34, 34); font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">所以我们</span><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">通过 Environment 的 getProperty() 方法读取指定配置 Key 的内容。</span></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63);"><br></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63);">在 Controller 中注入 Environment 的实例，通过 getProperty 就可以获取对应的 Key 的属性值。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;">&nbsp; &nbsp; &nbsp; &nbsp;</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">第二种方式：@Value注解。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif; background-color: rgb(255, 192, 0);"><img src="http://s0.lgstatic.com/i/image2/M01/8B/C0/CgoB5l16GHiAP27rAMoepDQ1FXI596.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">在注解中指定配置 Key，直接可以将属性值注入到该字段中。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;"><br></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">在 Controller 中定义一个 port 字段，在 port 上使用 @Value 注入当前项目的端口值，冒号后面是在无值的情况下给的默认值，避免没配置值的报错问题。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; white-space: normal; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; white-space: normal; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif; background-color: rgb(255, 192, 0);"><img src="http://s0.lgstatic.com/i/image2/M01/8B/C3/CgoB5l16HeyABtn8AE5Ic7f5ZlA175.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 11pt;">第三种方式：<span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif;">@ConfigurationProperties。</span></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 11pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;"><br></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">前面我们讲解了通过 Environment 和 @Value 注解的方式来读取配置文件中的属性值，这两种方式都是对单独的属性进行读取，使用的时候也都是散落在各个类中，然后很多场景下，我们需要有一组配置，都是服务于某个功能或者业务的，比如数据源的配置：</span><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 12pt;">spring.datasource.url、spring.datasource.username，这些配置我们希望能够集中管理和使用，这个时候可以使用 @ConfigurationProperties 注解将属性值注入到实体类中。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="background-color: rgb(255, 192, 0);"><img src="http://s0.lgstatic.com/i/image2/M01/8B/C0/CgoB5l16GHyAHUb1ANhD9ySCkrI105.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">这里定义了一个 User 的实体类，并定义了 name 字段和对应的 get、set 方法，在类上添加 @Configuration 和 @ConfigurationProperties(prefix="spring")&nbsp; 注解，并指定前缀为 spring。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;">&nbsp;</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">然后在配置文件中填加 spring.name 的配置，spring.name 将会自动注入 User 实体中，由于 User 类添加了 @Configuration 注解，我们在使用时可以直接通过 @Autowired 进行注入，然后就可以访问 User 类的 getName 方法获取 name 的值了。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="background-color: rgb(255, 192, 0);"><img src="http://s0.lgstatic.com/i/image2/M01/8B/E0/CgotOV16GIaAIfPXACGjQ0529lk579.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif; color: rgb(63, 63, 63);">最后我们在浏览器中访问 config 接口，可以看到三种方式分别读取的配置内容。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="color: rgb(63, 63, 63);">&nbsp;</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="color: rgb(63, 63, 63);">此时你是不是会感慨一句，Spring Boot 真方便。其实我们使用框架就是为了提高开发效率，框架的职责就是将一些通用的功能封装好，方便使用。你会发现框架随着时间的推移会变得越来越简单，这个简单不是说框架提供的能力简单，而是对使用者来说使用越来越简单，复杂的都在框架内部实现了。</span></p>
<h2><p style="line-height: 1.75em; text-align: justify;"><span style="font-size: 18px;">Spring Boot Starter 自定义<span style="color: rgb(73, 73, 73);">&nbsp; &nbsp;</span></span><span style="color: rgb(73, 73, 73); font-size: 11pt;">&nbsp;&nbsp; &nbsp;</span></p></h2>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63);">Starter 包可以说是 Spring Boot 中的核心功能，Starter 的出现，简化了很多工作，在Spring Cloud 中我们也会接触到各种的 Starter，除了使用官方提供的 Starter 包之外，我们也会遇到需要自定义 Starter 的场景。所以需要了解 Starter 的构建原理，以及能够自己动手构建一个 Starter，这样在集成的 Starter 包报错时，能够去分析错误，以及解决错误，正所谓知己知彼，才能百战百胜。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-size: 16px; color: rgb(63, 63, 63);">&nbsp;</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63);">这里总结了自定义一个 Starter 需要的6个步骤：</span></p>
<ol style="">
 <li><p style="line-height: 1.75em; text-align: justify;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; color: rgb(63, 63, 63);">创建 Starter 项目；</span></p></li>
 <li><p style="line-height: 1.75em; text-align: justify;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; color: rgb(63, 63, 63);">项目创建完后定义 Starter 需要的配置（Properties）类，比如数据库的连接信息；</span></p></li>
 <li><p style="line-height: 1.75em; text-align: justify;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; color: rgb(63, 63, 63);">编写自动配置类，自动配置类就是获取配置，根据配置来自动装配 Bean；</span></p></li>
 <li><p style="line-height: 1.75em; text-align: justify;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; color: rgb(63, 63, 63);">编写 spring.factories 文件加载自动配置类，Spring 启动的时候会扫描 spring.factories 文件，指定文件中配置的类；</span></p></li>
 <li><p style="line-height: 1.75em; text-align: justify;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; color: rgb(63, 63, 63);">编写配置提示文件 spring-configuration-metadata.json（不是必须的），在添加配置的时候，我们想要知道具体的配置项是什么作用，可以通过编写提示文件来提示；</span></p></li>
 <li><p style="line-height: 1.75em; text-align: justify;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; color: rgb(63, 63, 63);">最后就是使用，在项目中引入自定义 Starter 的 Maven 依赖，增加配置值后即可使用。</span></p></li>
</ol>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63);">以上是我总结出来定义 Starter 包需要执行的步骤，接下来我们根据上面的步骤来看下实际的代码部分怎么编写。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="background-color: rgb(255, 217, 0);"><img src="http://s0.lgstatic.com/i/image2/M01/8B/E3/CgotOV16HfaAI3bcAGA3upBSYqM629.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63);">首先我们需要创建一个 springboot-starter-demo 的 Spring Boot 项目，并依赖 spring-boot-starter-web，lombok 是用来简化 get、set 方法的类库，需要在开发工具中安装插件，spring-boot-configuration-processor 这个是专门配合@ConfigurationProperties 注解来使用的。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 16px; color: rgb(63, 63, 63);">&nbsp;</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; color: rgb(63, 63, 63); font-size: 16px;">接着</span><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63);">编写配置类，也就是自定义的 Starter 需要的配置信息，直接使用 @ConfigurationProperties 来注入配置信息。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; white-space: normal; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="background-color: rgb(255, 217, 0);"><img src="http://s0.lgstatic.com/i/image2/M01/8B/E5/CgotOV16JqeAV7NkAClhxNljPA4771.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 16px; color: rgb(63, 63, 63);"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">配置完信息后，就需要开始进行自动装配工作了，新建一个 UserAutoConfigure 类，用于装配 UserClient，类上添加 @EnableConfigurationProperties 注解，作用是启用&nbsp;</span><span style="color: rgb(47, 47, 47); font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">@ConfigurationProperties 注解的类，否则无法读取到配置信息。</span></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 16px; color: rgb(63, 63, 63);">&nbsp;</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63);">通过 @Bean 注解构建一个 UserClient，将配置信息通过 UserClient 的构造函数传入。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 16px; color: rgb(63, 63, 63);">&nbsp;</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63);">UserClient 中定义了一个 getName 方法，用于读取配置中的值。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="font-size: 16px; color: rgb(63, 63, 63); background-color: rgb(255, 192, 0);"><img src="http://s0.lgstatic.com/i/image2/M01/8B/C3/CgoB5l16Hp-AZy8aAGR-zCc9Gc8937.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63);">接下来需要让自动装配的类生效，很多 Starter 只要在 pom.xml 中依赖了，项目启动的时候就会自动装配，这是因为在项目的 resource 下的 META-INF 目录中有一个 spring.factories 文件，里面指定了需要被装配的类。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63);">我们也需要创建一个 spring.factories，里面指定我们的装配类 UserAutoConfigure。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; white-space: normal; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; white-space: normal; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 16px; color: rgb(63, 63, 63); background-color: rgb(255, 192, 0);"><br></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63);">配置提示不是必须的，为了让使用体验更好，最好是编写一个 spring-configuration-metadata.json 文件，这样使用时就知道你的 Starter 有哪些配置，以及配置项的含义和默认值了。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 16px; color: rgb(63, 63, 63);">&nbsp;</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63);">提示文件内容的格式也很简单，就是一个 json 数据，properties 中配置每个属性的信息，name 表示属性的名称，type 表示属性的数据类型，defaultValue 表示默认值。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="font-size: 16px; color: rgb(63, 63, 63); background-color: rgb(255, 192, 0);"><img src="http://s0.lgstatic.com/i/image2/M01/8B/C3/CgoB5l16HtiAEZE3AC6E2sTHc-4083.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63);">如果你不知道怎么编写，或者想知道其他更多的提示内容编写方式，可以通过查看 Spring Boot 自带的配置来参考编写。我们找到项目中 spring-boot-autoconfigure 这个 jar, 找到 spring-configuration-metadata.json 文件，可以看到里面定义了很多配置属性的提示信息。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="font-size: 16px; color: rgb(63, 63, 63); background-color: rgb(255, 192, 0);"><img src="http://s0.lgstatic.com/i/image2/M01/8B/E3/CgotOV16HvWAUv8UAFBYdAsnN2Y247.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63);">最后一步，我们需要在使用的项目中加入我们自定义的 Starter 的依赖，然后在配置文件中增加配置 spring.user.name，这样就完成了整个流程。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="font-size: 16px; color: rgb(63, 63, 63); background-color: rgb(255, 192, 0);"><img src="http://s0.lgstatic.com/i/image2/M01/8B/C3/CgoB5l16HwWAURJJAEi-bnY39_0581.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63);">项目在启动的时候会自动构建 UserClient，我们可以编写一个 Controller 来验证一下效果，在 Controller 中可以直接注入 UserClient，然后调用 getName 方法，这个方法返回的就是我们刚刚配置的值。就相当于你只依赖了一个 Starter，然后加了一些配置，就可以直接使用 UserClient，关于 UserClient 怎么构建的你不需要关心，逻辑都封装在 Starter 内部，降低了使用难度。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="font-size: 16px; color: rgb(63, 63, 63); background-color: rgb(255, 192, 0);"><img src="http://s0.lgstatic.com/i/image2/M01/8B/E3/CgotOV16HweAcDlpAF9VpJeeMRQ119.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63);">在某些场景下，我们的 Starter 不需要被依赖就开启自动装配，而是需要使用者进行手动的开启，为了满足这个需求，我们需要去掉 spring.factories，大部分手动开启都是通过在启动类上加一个注解来开启某个功能，我们同样也可以定义一个开启 UserClient 的注解 @EnableUserClient。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 16px; color: rgb(63, 63, 63);">&nbsp;</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63);">最核心的点在于使用了 @Import 注解来导入我们的自动配置类，这样只有使用者在启动类上增加了 @EnableUserClient 注解，然后通过 @Import 导入自动配置类，开启自动装配工作。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; white-space: normal; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; white-space: normal; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="background-color: rgb(255, 192, 0); color: rgb(63, 63, 63); font-size: 16px;"><img src="http://s0.lgstatic.com/i/image2/M01/8B/E3/CgotOV16HwKALWE1AHNGVxBJkVI623.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63);">需求总是多样化的，假如你的 Starter 自动装配，需要装配很多内容，但里面的某些内容需要进一步的满足某些条件才进行初始化，这个时候我们往往会通过配置的方式来指定需不需要开启装配。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-family: &quot;Microsoft YaHei&quot;, sans-serif; font-size: 16px; color: rgb(63, 63, 63);">可以使用 @ConditionalOnProperty 注解来实现，作用是当配置中某个属性的值满足条件才开启装配，我们定义一个 spring.user.enabled=true 的配置项，如果配置中没有 spring.user.enabled 配置或者没有等于 true, 那么 UserClient 将不会进行装配。将配置中的 spring.user.enabled 去掉，你会发现启动的时候报错了，项目中注入了 UserClient，但是 UserClient 并没有创建。</span></p>
<h1><p style="line-height: 1.75em;"><span style="font-size: 18px;">Spring Boot 监控</span></p></h1>
<h3><p style="line-height: 1.75em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">Spring Boot actuator</span><span style="font-size: 11pt; color: rgb(73, 73, 73);">&nbsp; &nbsp; &nbsp;</span></p></h3>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">健康监控在项目部署时是必不可少的一个环节，强大的监控能够帮助我们及时发现应用程序故障。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;">&nbsp;</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">我见过很多项目中通过自己编写一个接口的方式来判断当前应用是否健康，其实就是返回一个字符串，只要这个接口能正常返回就认为当前应用是健康状态。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;">&nbsp;</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">这种方式存在很大的问题，当数据库在运行过程中出问题，这个自定义的健康检查接口只是返回一个固定的内容而已，不会去对数据库进行操作，是无法感知数据库是否正常，如果数据库都不正常了，那么当前应用在检测的时候还处于一个正常的状态，这样就失去了检测的意义。也无法快速及时的通过监控来发现问题，监控不是万能的，监控就是作为辅助你的一个工具而已，能够在发生问题时，及时将这个情况通知到对应的负责人。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;">&nbsp;</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">Spring Boot 中提供了一个用于监控和管理自身应用信息的模块，它就是 spring-boot-starter-actuator。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;">&nbsp;</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">通过集成 actuator 可以将 Spring Boot 应用本身的一些信息</span><span style="color: rgb(47, 47, 47); font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">通过 HTTP 或 JMX 的方式</span><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">暴露出去，可以让第三方的监控工具拉取这些信息，进行信息的管理，查看，监控和告警。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="background-color: rgb(255, 217, 0);"><img src="http://s0.lgstatic.com/i/image2/M01/8B/C3/CgoB5l16HxWAXRe-ACFqVH78k3Y399.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">下面我们将 actuator 整合到 Spring Boot 中，整合的过程非常简单，这就是 Spring Boot 自带的魅力，只需要在项目的 pom.xml 文件中增加 spring-boot-starter-actuator 的依赖就可以将 actuator 整合到 Spring Boot 项目中。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="background-color: rgb(255, 192, 0);"><img src="http://s0.lgstatic.com/i/image2/M01/8B/E2/CgotOV16HAOARrhIAI1UMPi_4Kc713.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">然后我们启动下项目, 访问 actuator/health 这个端点，可以看到返回了 status为UP，证明当前健康状态是正常的，如果 status 为 DOWN 那就是不健康的状态。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="color: rgb(63, 63, 63); font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">Spring Boot actuator 中内置了很多 Endpoint，也就是端点信息，刚刚访问的 health 就是一个端点。这里列举了几个常用的端点信息：</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="color: rgb(63, 63, 63);">&nbsp;</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif; color: rgb(63, 63, 63);">/actuator/health 查看应用健康指标，health 端点能够及时反馈出当前应用的监控状态，health的值默认是当前磁盘的使用情况，同时也支持对很对框架的健康状态反馈。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="color: rgb(63, 63, 63); font-size: 16px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;;">讲到这里想必大家都应该清楚了 health 端点的原理，当我们需要在自己的项目中结合业务本身做一些健康监控时，可以实现自己的 HealthIndicator。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="color: rgb(63, 63, 63); font-size: 16px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;;">&nbsp;</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="color: rgb(63, 63, 63); font-size: 16px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;;">Spring Boot 中集成的框架基本上都有自己的 HealthIndicator，在这些框架出问题后，/health 能够及时反馈健康信息，这也是前面我们提到自定义接口返回固定的内容来做检测所欠缺的部分。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="color: rgb(63, 63, 63); background-color: rgb(255, 192, 0);"><img src="http://s0.lgstatic.com/i/image2/M01/8B/E3/CgotOV16HzeAS0fdADQaFXwau68863.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="color: rgb(63, 63, 63); font-size: 16px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;;">如果我们需要加入一些其他的判断来决定应用的监控状态时，可以继承 AbstractHealthIndicator 类，实现自己的 HealthIndicator。具体需要实现 doHealthCheck 方法，在 doHealthCheck 中进行健康状态的判断，健康状态使用 builder.up() 表示，不健康使用 builder.down() 方法表示，未知的状态使用 builder.unknown() 方法表示，应用已停止服务使用 builder.outOfService() 方法表示。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="color: rgb(63, 63, 63); background-color: rgb(255, 192, 0);"><img src="http://s0.lgstatic.com/i/image2/M01/8B/C2/CgoB5l16G9uAbVYEAHy-CeWcRWg801.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="color: rgb(63, 63, 63); font-size: 16px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;;">如果需要展示详细的信息，可以使用 withDetail 方法来添加详细信息，这样在访问 /health 端点时就可以显示这些详细信息了，前提是需要打开这个详情展示的功能，默认是关闭的，我们可以通过配置management.endpoint.health.show-details=ALWAYS 开启。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="color: rgb(63, 63, 63); background-color: rgb(255, 192, 0);"><img src="http://s0.lgstatic.com/i/image2/M01/8B/E2/CgotOV16G-CAfpHfAFvvUPKrgJE402.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-size: 16px; color: rgb(63, 63, 63);">自定义完成后，我们启动项目，访问一下actuator/health端点，可以看到自定义的信息。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="color: rgb(63, 63, 63);">&nbsp;</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif; color: rgb(63, 63, 63);">/actuator/beans 查看 bean 及其关系列表，其他的端点也是一样的访问方式，不做过多讲解。更多端点的信息请参考官方文档。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="color: rgb(63, 63, 63); background-color: rgb(255, 192, 0);"><img src="http://s0.lgstatic.com/i/image2/M01/8B/C3/CgoB5l16H0KAXtw_AD9Zu3LQPW8808.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="color: rgb(63, 63, 63); font-size: 16px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;;">需要注意的是 Spring Boot1 版本和 Spring Boot2 版本对 actuator 的访问路径和默认暴露都不太一样，我们这里是 Spring Boot2 的版本，所有开放的端点的路径都以 /actuator 开头，默认很多端点是不开放的，我们可以通过配置&nbsp;management.endpoints.web.exposure.include=*&nbsp;&nbsp;暴露全部的端点。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="color: rgb(63, 63, 63); font-size: 16px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;;">&nbsp;</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="color: rgb(63, 63, 63); font-size: 16px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;;">上面这些端点都是<span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">actuator中内置的，在实际工作中，你会有自定义端点的需求，比如说你封装了某个框架，这个时候你需要有检查这个框架健康的端点，健康检查我们可以扩展已有的 /health 端点来实现。除了健康检查，你可能还需要一个能够展示框架内部一些信息的端点。</span></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="color: rgb(63, 63, 63); font-size: 16px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; background-color: rgb(255, 192, 0);"><img src="http://s0.lgstatic.com/i/image2/M01/8B/C3/CgoB5l16H0iAVqguADsKdZyzlXg815.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="color: rgb(63, 63, 63); font-size: 16px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;;"><span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">自定义端点也是非常简单的，只需要一个&nbsp;</span>@Endpoint 注解就可以实现，我们来实现一个名称为 springcloud 的端点，创建一个类，增加 @Endpoint(id = "springcloud") 注解，指定 id 为 springcloud，这个类需要被 Spring 管理，我们加上 @Component 注解，然后定义一个用于展示信息的方法，返回类型可以自定义，这里定义一个 Map 返回，Map 中增加一个 title 的 Key，value 为 springcloud，最后一步需要在方法上增加 @ReadOperation 注解，大功告成。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="color: rgb(63, 63, 63); font-size: 16px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;;">&nbsp;</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="color: rgb(63, 63, 63); font-size: 16px; font-family: 微软雅黑, &quot;Microsoft YaHei&quot;;">启动项目，访问actuator/springcloud，就这么简单的几步，轻松的自定义了一个端点。</span></p>
<h3><p style="line-height: 1.75em;"><span style="font-size: 16px;">Spring Boot Admin</span></p></h3>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 16px; color: rgb(63, 63, 63);">目前所有的端点信息都是通过 HTTP 访问的，数据也是 Json 格式的，如果直接通过这些数据来查看某些指标不是很直观，这时我们可以通过 Spring Boot Admin 来对 actuator 信息进行管理。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 16px; color: rgb(63, 63, 63);">&nbsp;</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 16px; color: rgb(63, 63, 63);"><span style="color: rgb(64, 64, 64);">Spring Boot Admin 是一个开源的 Web 项目，用于管理和监控 Spring Boot 应用程序的运行状态。在 Spring Boot 项目中可以通过集成&nbsp;</span><span style="color: rgb(51, 51, 51);">Spring Boot Admin Client 向 Spring Boot Admin Server 进行注册，这样我们就可以在Spring Boot Admin Server 统一管理 Spring Boot 应用。</span></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 16px; color: rgb(63, 63, 63);">&nbsp;</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; font-size: 16px; color: rgb(63, 63, 63);"><span style="color: rgb(64, 64, 64); font-size: 14.6667px;">Spring Boot Admin&nbsp;</span>主要功能点：</span></p>
<ul style="">
 <li><p style="line-height: 1.75em;"><span style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(63, 63, 63);">显示应用程序的监控状态</span></p></li>
 <li><p style="line-height: 1.75em;"><span style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(63, 63, 63);">应用程序上下线监控 &nbsp;</span></p></li>
 <li><p style="line-height: 1.75em;"><span style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(63, 63, 63);">查看 JVM 和线程信息</span></p></li>
 <li><p style="line-height: 1.75em;"><span style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(63, 63, 63);">可视化的查看日志及下载日志文件</span></p></li>
 <li><p style="line-height: 1.75em;"><span style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(63, 63, 63);">动态切换日志级别</span></p></li>
 <li><p style="line-height: 1.75em;"><span style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(63, 63, 63);">HTTP 请求信息跟踪等实用功能</span></p></li>
 <li><p style="line-height: 1.75em;"><span style="font-family: 微软雅黑, &quot;Microsoft YaHei&quot;; color: rgb(63, 63, 63);">将&nbsp;<span style="font-size: 12pt; font-family: &quot;Microsoft YaHei&quot;, sans-serif;">actuator 提供的数据进行可视化</span></span></p></li>
</ul>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="background-color: rgb(255, 217, 0);"><img src="http://s0.lgstatic.com/i/image2/M01/8B/E3/CgotOV16H1GAWLFkAEFaRNGGwc8148.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;">接下来体验一下 Spring Boot Admin，首先我们需要创建一个 Spring Boot 项目，我这里创建了一个 Spring Boot Admin 的项目，然后在 pom 中加入 spring-boot-admin-starter-server</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;">的依赖。然后创建一个启动类，在启动类上增加 @EnableAdminServer 的注解，启用&nbsp;<span style="color: rgb(51, 51, 51);">Spring Boot Admin Server。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;">&nbsp;</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;">启动项目后，访问&nbsp;<a style="color: rgb(112, 177, 231);">http://localhost:8080</a>，这就是 Spring Boot Admin 的主页面，目前没有服务注册上来。</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="background-color: rgb(255, 192, 0);"><img src="http://s0.lgstatic.com/i/image2/M01/8B/C3/CgoB5l16H1OAAdE6ADSt7V6hKic032.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;">刚刚介绍的时候有讲过，Spring Boot 项目需要集成&nbsp;<span style="color: rgb(51, 51, 51);">Spring Boot Admin Client 向 Spring Boot Admin Server 进行注册，那我们就在项目中增加&nbsp;</span>spring-boot-admin-starter-client 的依赖，光增加依赖可不行，需要用户必须得知道注册到哪里去了，所以我们需要在配置文件中指定&nbsp;<span style="color: rgb(51, 51, 51);">Spring Boot Admin Server 的地址才行，配置为&nbsp;</span>spring.boot.admin.client.url=<a style="color: rgb(112, 177, 231);">http://localhost:8080</a></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; white-space: normal; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; white-space: normal; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><span style="background-color: rgb(255, 192, 0);"><img src="http://s0.lgstatic.com/i/image2/M01/8B/C2/CgoB5l16G1mASUWEAF93SfdZYCk697.gif"></span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;">启动 Spring Boot 项目后，可以看到 S<span style="color: rgb(51, 51, 51);">pring Boot Admin Server 中已经有服务注册上来了，可以清楚的知道应用的名称和 IP 端口信息，应用名称是默认的，可以在配置文件中通过&nbsp;</span>spring.application.name 来自定义名称。</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><br></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;">点击服务信息进去查看详情，左边是对应的功能菜单，右边是数据展示的页面。Detail 中有健康信息、线程信息、JVM 内存等信息，都通过图形的方式展示，一目了然。</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;">&nbsp;</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;">除了这些还有 Log、Web、Cache 等管理功能，由于时间关系，就不带你一一体验了，课后你可以自己去实际操作下。</p>
<h1><p style="line-height: 1.75em;"><span style="font-size: 18px;">Spring Boot常用功能点</span><span style="color: rgb(73, 73, 73); font-size: 11pt;">&nbsp;</span></p></h1>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 16px; color: rgb(63, 63, 63);">在 Spring Boot 中，还有一些比较常用的功能点，选取了几个常用的简单介绍下。</span></p>
<h3><p style="line-height: 1.75em;"><span style="font-size: 16px;">替换内置 Tomcat 容器</span></p></h3>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-size: 16px; color: rgb(63, 63, 63);">第一个是怎么去替换内置的 Tomcat 容器</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-size: 16px; color: rgb(63, 63, 63);">&nbsp;</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-size: 16px; color: rgb(63, 63, 63);">spring-boot-starter-web 中默认自带的容器是 Tomcat，如果想要替换成 Jetty 也是非常简单的。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-size: 16px; color: rgb(63, 63, 63);">&nbsp;</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-size: 16px; color: rgb(63, 63, 63);">首先需要排除 spring-boot-starter-web 包中的 Tomcat，然后单独增加对应容器的依赖，比如我们加入 Jetty，就需要增加 spring-boot-starter-jetty 的配置。然后重启项目，可以看到控制台输出的是 Jetty started on port 的内容，证明内置容器已经被成功替换成了 Jetty。替换成其他容器步骤也是一样。</span></p>
<h3><p style="line-height: 1.75em;"><span style="font-size: 16px;">容器的参数配置</span></p></h3>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 16px; color: rgb(63, 63, 63);">第二个是容器的参数如何配置</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 16px; color: rgb(63, 63, 63);">&nbsp;</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 16px; color: rgb(63, 63, 63);">以前使用外部的 Tomcat，参数的调整都是在 Tomcat 的 server.xml 中进行配置，在 Spring Boot 中，内置容器的参数可以在 application 配置文件中进行指定，不同容器的参数配置有对应的前缀，server.tomcat 就是配置 Tomcat 的参数，server.jetty 就是配置 Jetty 的参数。</span></p>
<h3><p style="line-height: 1.75em;"><span style="font-size: 16px;">启动监听</span></p></h3>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 16px; color: rgb(63, 63, 63);">第三个是启动监听</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 16px; color: rgb(63, 63, 63);">&nbsp;</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 16px; color: rgb(63, 63, 63);">很多时候，我们需要在程序启动后，回调一些方法来处理某些事情，比如初始化本地缓存。这种场景我们可以使用 CommandLineRunner 和 ApplicationRunner 两个监听接口来实现。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 16px; color: rgb(63, 63, 63);">&nbsp;</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 16px; color: rgb(63, 63, 63);">CommandLineRunner 和 ApplicationRunner 本质上是一样的，不同的就是 ApplicationRunner 对方法的参数进行了封装。</span></p>
<h3><p style="line-height: 1.75em;"><span style="font-size: 16px;">Filter 的注册</span></p></h3>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 16px; color: rgb(63, 63, 63);">第四个是Filter的注册</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 16px; color: rgb(63, 63, 63);">&nbsp;</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 16px; color: rgb(63, 63, 63);">Filter的注册有两种方式，一种是直接用 @WebFilter 注解，另一种是通过 FilterRegistrationBean 进行注册。</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 16px; color: rgb(63, 63, 63);"><br></span></p>
<h6 style="margin-bottom: 0pt; margin-top: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 16px;">总结</span></h6>
<h6 style="margin-bottom: 0pt; margin-top: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;"><span style="font-size: 16px;"><br></span></h6>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: center;"><img src="http://s0.lgstatic.com/i/image2/M01/8B/C5/CgoB5l16KS-AaroPAAM--cSCVG0340.png"></p>
<p style="margin-top: 0px; margin-bottom: 0px; box-sizing: border-box; color: rgb(73, 73, 73); font-size: 14.66px; font-variant-numeric: normal; font-variant-east-asian: normal; line-height: 24.92px; outline-style: none; outline-width: 0px; padding: 0px; white-space: normal;"><span style="box-sizing: border-box; margin: 0px; outline-style: none; outline-width: 0px; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp;</span></p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em;">&nbsp; &nbsp; &nbsp; &nbsp;</p>
<p style="margin-top: 0pt; margin-bottom: 0pt; font-size: 11pt; color: rgb(73, 73, 73); line-height: 1.75em; text-align: justify;"><span style="font-size: 16px; color: rgb(63, 63, 63);">在这一课时我们主要巩固了 Spring Boot 的基础知识，主要包括 Spring Boot 的基础介绍，解决的问题，以及亮点和常用的 Starter 包，并手把手的带你创建了 Spring Boot 项目，并学会了打包编译和配置管理，还自定义了 Spring Boot Starter 包，添加了自定义的 Spring Boot actuator 监控，并学习了使用了开源的 Spring Boot Admin Web 项目，了解了 Spring Boot 的常用功能点。</span></p></div>

</body></html>